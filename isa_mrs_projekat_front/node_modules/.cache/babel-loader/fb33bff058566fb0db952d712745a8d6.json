{"ast":null,"code":"import ImageSlider from \"@/components/UnregisteredUser/components/Rental/ImageSlider\";\nimport RentalDescription from \"@/components/UnregisteredUser/components/Rental/RentalDescription\";\nimport RentalTags from \"@/components/UnregisteredUser/components/Rental/RentalTags\";\nimport RentalAddress from \"@/components/UnregisteredUser/components/Rental/RentalAddress\";\nimport RentalRules from \"@/components/UnregisteredUser/components/Rental/RentalRules\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faBed, faCircleCheck, faCircleXmark, faClock, faDoorOpen, faLocationDot, faUser, faUserTie, faPencil, faTrash, faTag, faBookmark } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios/index\";\nimport { useStore } from \"vuex\";\nimport StarRating from 'vue-star-rating';\nimport store from \"@/store\";\nlibrary.add(faUser, faDoorOpen, faBed, faClock, faLocationDot, faCircleCheck, faCircleXmark, faUserTie, faPencil, faTrash, faTag, faBookmark);\nexport default {\n  name: \"VacationRentalProfile\",\n  components: {\n    RentalRules,\n    RentalAddress,\n    RentalTags,\n    RentalDescription,\n    ImageSlider,\n    FontAwesomeIcon,\n    StarRating\n  },\n\n  data() {\n    return {\n      rentalObject: null,\n      currentPage: 0,\n      totalPages: null,\n      pageSize: 6,\n      images: [],\n      bedsPerRoom: null\n    };\n  },\n\n  computed: {\n    clientCantReserve() {\n      return this.rentalObject.penalties === 3;\n    },\n\n    ownerOrInstructor() {\n      if (this.rentalObject.rentalObjectType === \"Adventure\") return \"Instructor\";\n      return \"Owner\";\n    },\n\n    isOwner() {\n      return this.$store.getters.user === \"fishingInstructor\";\n    },\n\n    isVacationRentalOwner() {\n      return this.$store.getters.user === \"vacationRentalOwner\";\n    },\n\n    isBoatOwner() {\n      return this.$store.getters.user === \"boatOwner\";\n    },\n\n    buttonText() {\n      return this.isUserSubscribed ? \"Subscribed!\" : \"Subscribe\";\n    },\n\n    reviews() {\n      return this.rentalObject.reviews.content;\n    },\n\n    getNumberOfRooms() {\n      return this.rentalObject.rooms.length;\n    },\n\n    getNumberOfBeds() {\n      let beds = 0;\n      this.rentalObject.rooms.forEach(room => {\n        beds += room.beds;\n      });\n      return beds;\n    },\n\n    doesRentalHavePhotos() {\n      return this.rentalObject.photos.length > 0;\n    },\n\n    isUserSubscribed() {\n      return this.rentalObject.isUserSubscribed;\n    },\n\n    showSubscriptionArea() {\n      return this.$store.getters.user === \"client\";\n    },\n\n    isVacationRental() {\n      return this.rentalObject.rentalObjectType === \"VacationRental\";\n    },\n\n    isBoat() {\n      return this.rentalObject.rentalObjectType === \"Boat\";\n    },\n\n    getOwnerFullName() {\n      return this.rentalObject.rentalObjectOwner.name + \" \" + this.rentalObject.rentalObjectOwner.surname;\n    },\n\n    getAccessToken() {\n      return store.state.access_token;\n    },\n\n    rentalHasReviews() {\n      return this.reviews.length > 0;\n    },\n\n    button1Content() {\n      return this.currentPage === 0 ? this.currentPage + 1 : this.totalPages - this.currentPage === 1 ? this.currentPage - 1 : this.currentPage;\n    },\n\n    button2Content() {\n      return this.currentPage === 0 ? this.currentPage + 2 : this.totalPages - this.currentPage === 1 ? this.currentPage : this.currentPage + 1;\n    },\n\n    button3Content() {\n      return this.currentPage === 0 ? this.currentPage + 3 : this.totalPages - this.currentPage === 1 ? this.currentPage + 1 : this.currentPage + 2;\n    }\n\n  },\n\n  mounted() {\n    const store = useStore();\n\n    if (this.$route.params.type === \"Boat\") {\n      axios.get(\"/RentalObjects/getBoat\", {\n        headers: {\n          Authorization: \"Bearer \" + store.state.access_token\n        },\n        params: {\n          id: this.$route.params.id,\n          page: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(response => {\n        this.rentalObject = response.data;\n        this.currentPage = this.rentalObject.reviews.currentPage;\n        this.totalPages = this.rentalObject.reviews.pages;\n        this.getReviewPics();\n      });\n    } else {\n      axios.get(\"/RentalObjects/getVacationRental\", {\n        headers: {\n          Authorization: \"Bearer \" + store.state.access_token\n        },\n        params: {\n          id: this.$route.params.id,\n          page: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(response => {\n        this.rentalObject = response.data;\n        this.currentPage = this.rentalObject.reviews.currentPage;\n        this.totalPages = this.rentalObject.reviews.pages;\n        this.getReviewPics();\n        this.numOfBedsPerRoom();\n      });\n    }\n  },\n\n  methods: {\n    numOfBedsPerRoom() {\n      let result = \"Beds per room: \";\n\n      for (let i = 0; i < this.rentalObject.rooms.length; i++) {\n        result += this.rentalObject.rooms[i].beds;\n        if (i === this.rentalObject.rooms.length - 1) break;\n        result += \" + \";\n      }\n\n      this.bedsPerRoom = result;\n    },\n\n    getEquipment(equipment) {\n      let printEquipment = \"\";\n      const collectionSize = equipment.length;\n\n      for (let i = 0; i < collectionSize; i++) {\n        printEquipment += equipment[i].name;\n        if (i === collectionSize - 1) break;\n        printEquipment += \", \";\n      }\n\n      if (printEquipment === \"\") return \"No equipment included.\";\n      return printEquipment;\n    },\n\n    formatTimeStamp(time) {\n      return time.slice(0, -3);\n    },\n\n    nextPage() {\n      this.currentPage += 1;\n      this.reloadReviews();\n    },\n\n    previousPage() {\n      this.currentPage -= 1;\n      this.reloadReviews();\n    },\n\n    numberedPage(buttonNumber) {\n      if (buttonNumber === 1) {\n        this.currentPage = this.button1Content - 1;\n      } else if (buttonNumber === 2) {\n        this.currentPage = this.button2Content - 1;\n      } else if (buttonNumber === 3) {\n        this.currentPage = this.button3Content - 1;\n      }\n\n      this.reloadReviews();\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ImageSlider","RentalDescription","RentalTags","RentalAddress","RentalRules","FontAwesomeIcon","library","faBed","faCircleCheck","faCircleXmark","faClock","faDoorOpen","faLocationDot","faUser","faUserTie","faPencil","faTrash","faTag","faBookmark","axios","useStore","StarRating","store","add","name","components","data","rentalObject","currentPage","totalPages","pageSize","images","bedsPerRoom","computed","clientCantReserve","penalties","ownerOrInstructor","rentalObjectType","isOwner","$store","getters","user","isVacationRentalOwner","isBoatOwner","buttonText","isUserSubscribed","reviews","content","getNumberOfRooms","rooms","length","getNumberOfBeds","beds","forEach","room","doesRentalHavePhotos","photos","showSubscriptionArea","isVacationRental","isBoat","getOwnerFullName","rentalObjectOwner","surname","getAccessToken","state","access_token","rentalHasReviews","button1Content","button2Content","button3Content","mounted","$route","params","type","get","headers","Authorization","id","page","then","response","pages","getReviewPics","numOfBedsPerRoom","methods","result","i","getEquipment","equipment","printEquipment","collectionSize","formatTimeStamp","time","slice","nextPage","reloadReviews","previousPage","numberedPage","buttonNumber"],"sourceRoot":"","sources":["C:\\Users\\Saška\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\VacationRentalOwner\\VacationRentalOwnerPage\\components\\VacationRentalProfile.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"rentalObject\" class=\"container-fluid mt-2 pe-0\">\r\n    <div class=\"row align-items-start\">\r\n      <div class=\"col-md-7 p-3\">\r\n        <ImageSlider :photos=\"this.rentalObject.photos\"/>\r\n\r\n      </div>\r\n\r\n      <!--------------------------------------------------------------------------------------------------------------------->\r\n\r\n      <div class=\"col-md-5 p-3 d-flex flex-grow-1 justify-content-center align-items-center rentalBasicInfo\">\r\n        <div style=\"width: 100%;\">\r\n          <div class=\"row\">\r\n            <div class=\"align-items-center text-start\" style=\"display: flex;\">\r\n              <hr class=\"ms-1\">\r\n              <div>\r\n                <h1 class=\"display-3 card-title cut-text\" :title=\"this.rentalObject.name\">{{ this.rentalObject.name }}\r\n                  <router-link :to=\"'/vacationRentalOwner/updateVacationRental/' + this.$route.params.id\" class=\"btn btn-default ms-2\" style=\"height: fit-content;\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\">\r\n                    <font-awesome-icon icon=\"pencil\"></font-awesome-icon>\r\n                  </router-link>\r\n                </h1>\r\n              </div>\r\n              <hr class=\"ms-1\">\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row my-0 mb-2\">\r\n            <div class=\"col-12 d-flex justify-content-center align-items-center\">\r\n              <star-rating v-model:rating=\"this.rentalObject.grade\" text-class=\"h1 my-0 font-weight-normal\" :read-only=\"true\" :round-start-rating=\"false\" :glow=\"5\" glow-color=\"#ffd055\"></star-rating>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isVacationRental\" class=\"row main mb-3\">\r\n            <div class=\"col main d-flex justify-content-center\" title=\"Capacity\">\r\n              <p class=\"display-5\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"user\"></font-awesome-icon><strong>{{ this.rentalObject.capacity }}</strong>\r\n              </p>\r\n            </div>\r\n            <div class=\"col main d-flex justify-content-center\" title=\"Number of rooms\">\r\n              <p class=\"display-5\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"door-open\"></font-awesome-icon><strong>{{ getNumberOfRooms }}</strong>\r\n              </p>\r\n            </div>\r\n            <div class=\"col main d-flex justify-content-center\" title=\"\">\r\n              <p class=\"display-5\" :title=\"this.bedsPerRoom\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"bed\"></font-awesome-icon><strong>{{ getNumberOfBeds }}</strong>\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isVacationRentalOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <button class=\"btn btn-red mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\" ><font-awesome-icon style=\"margin-right: 10px\" icon=\"trash\"></font-awesome-icon>Delete</button>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isVacationRentalOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <router-link :to=\"'/vacationRentalOwner/specialOfferVacationRental/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"tag\"></font-awesome-icon>Special Offer</router-link>\r\n              <router-link :to=\"'/vacationRentalOwner/reservation/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"bookmark\"></font-awesome-icon>Book</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isBoatOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <button class=\"btn btn-red mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\" ><font-awesome-icon style=\"margin-right: 10px\" icon=\"trash\"></font-awesome-icon>Delete</button>\r\n              <router-link :to=\"'/boatOwner/updateBoat/' + this.$route.params.id\" class=\"btn btn-yellow mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"pencil\"></font-awesome-icon>Edit</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isBoatOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <router-link :to=\"'/boatOwner/specialOfferBoat/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"tag\"></font-awesome-icon>Special Offer</router-link>\r\n              <router-link :to=\"'/boatOwner/reservation/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"bookmark\"></font-awesome-icon>Book</router-link>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--------------------------------------------------------------------------------------------------------------------->\r\n\r\n    <div class=\"row align-items-start mb-5\">\r\n      <div class=\"col-md-7 ps-3\">\r\n        <div class=\"row\">\r\n          <div class=\"\" style=\"\">\r\n            <RentalDescription :description=\"this.rentalObject.description\"/>\r\n\r\n            <div class=\"row ps-1\">\r\n              <p class=\"h5\" style=\"display: flex;\">\r\n                <span class=\"mt-1\" >\r\n                <font-awesome-icon class=\"me-2\" icon=\"user-tie\"></font-awesome-icon><i>{{ ownerOrInstructor }}: {{ getOwnerFullName }}</i>\r\n                </span>\r\n              </p>\r\n            </div>\r\n\r\n            <RentalTags :additional-services=\"this.rentalObject.additionalServices\"/>\r\n            <RentalRules :conduct-rules=\"this.rentalObject.conductRules\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n      <div class=\"col-md-5\" >\r\n        <div v-if=\"isBoat\" class=\"row main mb-4\">\r\n          <div class=\"lineTitle\">\r\n            <p class=\"h3\"><strong>Boat info</strong></p>\r\n            <hr class=\"ms-1\">\r\n          </div>\r\n          <div class=\"row-fluid main px-5\" style=\"font-weight: 700;\">\r\n            <div class=\"row mt-3 main\">\r\n              <div class=\"col main border\">{{\"Type: \" + this.rentalObject.type }}</div>\r\n              <div class=\"col main border\">{{\"Length: \" + this.rentalObject.length }}</div>\r\n            </div>\r\n            <div class=\"row main\">\r\n              <div class=\"col main border\">{{\"Engine number: \" + this.rentalObject.engineNumber }}</div>\r\n              <div class=\"col main border\">{{\"Engine power: \" + this.rentalObject.enginePower  }}</div>\r\n            </div>\r\n            <div class=\"row main text-center\">\r\n              <div class=\"col main border\">{{\"Maximum speed: \" + this.rentalObject.maxSpeed }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"isBoat\" class=\"row main mb-3\">\r\n          <div class=\"lineTitle\">\r\n            <p class=\"h3\"><strong>Navigation equipment</strong></p>\r\n            <hr class=\"ms-1\">\r\n          </div>\r\n          <p class=\"\" style=\"color: grey;\">\r\n            {{ getEquipment(this.rentalObject.navigationEquipment) }}\r\n          </p>\r\n        </div>\r\n\r\n        <div v-if=\"isBoat\" class=\"row main mb-5\">\r\n          <div class=\"lineTitle\">\r\n            <p class=\"h3\"><strong>Fishing equipment</strong></p>\r\n            <hr class=\"ms-1\">\r\n          </div>\r\n          <p class=\"\" style=\"color: grey;\">\r\n            {{ getEquipment(this.rentalObject.fishingEquipment) }}\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"row mb-5\" >\r\n          <div class=\"col-12 p-0 px-2 m-0\">\r\n            <RentalAddress :address=\"this.rentalObject.address\"/>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport ImageSlider from \"@/components/UnregisteredUser/components/Rental/ImageSlider\";\r\nimport RentalDescription from \"@/components/UnregisteredUser/components/Rental/RentalDescription\";\r\nimport RentalTags from \"@/components/UnregisteredUser/components/Rental/RentalTags\";\r\nimport RentalAddress from \"@/components/UnregisteredUser/components/Rental/RentalAddress\";\r\nimport RentalRules from \"@/components/UnregisteredUser/components/Rental/RentalRules\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faBed, faCircleCheck, faCircleXmark, faClock, faDoorOpen, faLocationDot, faUser, faUserTie, faPencil, faTrash, faTag, faBookmark } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios/index\";\r\nimport {useStore} from \"vuex\";\r\nimport StarRating from 'vue-star-rating';\r\nimport store from \"@/store\";\r\n\r\n\r\nlibrary.add(faUser, faDoorOpen, faBed, faClock, faLocationDot, faCircleCheck, faCircleXmark, faUserTie, faPencil, faTrash, faTag, faBookmark);\r\n\r\nexport default {\r\n  name: \"VacationRentalProfile\",\r\n  components: {\r\n    RentalRules, RentalAddress, RentalTags, RentalDescription, ImageSlider, FontAwesomeIcon, StarRating},\r\n  data() {\r\n    return {\r\n      rentalObject: null,\r\n      currentPage: 0,\r\n      totalPages: null,\r\n      pageSize: 6,\r\n      images: [],\r\n      bedsPerRoom: null,\r\n    }\r\n  },\r\n  computed: {\r\n    clientCantReserve() {\r\n      return this.rentalObject.penalties === 3;\r\n    },\r\n    ownerOrInstructor() {\r\n      if(this.rentalObject.rentalObjectType === \"Adventure\") return \"Instructor\";\r\n      return \"Owner\";\r\n    },\r\n    isOwner() {\r\n      return this.$store.getters.user === \"fishingInstructor\";\r\n    },\r\n    isVacationRentalOwner() {\r\n      return this.$store.getters.user === \"vacationRentalOwner\";\r\n    },\r\n    isBoatOwner() {\r\n      return this.$store.getters.user === \"boatOwner\";\r\n    },\r\n    buttonText() {\r\n      return this.isUserSubscribed ? \"Subscribed!\" : \"Subscribe\";\r\n    },\r\n    reviews() {\r\n      return this.rentalObject.reviews.content;\r\n    },\r\n    getNumberOfRooms() {\r\n      return this.rentalObject.rooms.length;\r\n    },\r\n    getNumberOfBeds() {\r\n      let beds = 0;\r\n      this.rentalObject.rooms.forEach(room => { beds += room.beds; });\r\n      return beds;\r\n    },\r\n    doesRentalHavePhotos() {\r\n      return this.rentalObject.photos.length > 0;\r\n    },\r\n    isUserSubscribed() {\r\n      return this.rentalObject.isUserSubscribed;\r\n    },\r\n    showSubscriptionArea() {\r\n      return this.$store.getters.user === \"client\";\r\n    },\r\n    isVacationRental() {\r\n      return this.rentalObject.rentalObjectType === \"VacationRental\";\r\n    },\r\n    isBoat() {\r\n      return this.rentalObject.rentalObjectType === \"Boat\";\r\n    },\r\n    getOwnerFullName() {\r\n      return this.rentalObject.rentalObjectOwner.name + \" \" + this.rentalObject.rentalObjectOwner.surname;\r\n    },\r\n    getAccessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    rentalHasReviews() {\r\n      return this.reviews.length > 0;\r\n    },\r\n    button1Content() {\r\n      return this.currentPage === 0 ? this.currentPage+1: this.totalPages - this.currentPage === 1 ? this.currentPage - 1 : this.currentPage;\r\n    },\r\n    button2Content() {\r\n      return this.currentPage === 0 ? this.currentPage+2: this.totalPages - this.currentPage === 1 ? this.currentPage : this.currentPage+1;\r\n    },\r\n    button3Content() {\r\n      return this.currentPage === 0 ? this.currentPage+3: this.totalPages - this.currentPage === 1 ? this.currentPage + 1 : this.currentPage+2;\r\n    }\r\n  },\r\n  mounted() {\r\n    const store = useStore();\r\n    if(this.$route.params.type === \"Boat\") {\r\n      axios.get(\"/RentalObjects/getBoat\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + store.state.access_token\r\n        },\r\n        params: {\r\n          id: this.$route.params.id,\r\n          page: this.currentPage,\r\n          pageSize: this.pageSize\r\n        }\r\n      })\r\n          .then((response) => {\r\n            this.rentalObject = response.data;\r\n            this.currentPage = this.rentalObject.reviews.currentPage;\r\n            this.totalPages = this.rentalObject.reviews.pages;\r\n            this.getReviewPics();\r\n          });\r\n    }\r\n    else {\r\n      axios.get(\"/RentalObjects/getVacationRental\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + store.state.access_token\r\n        },\r\n        params: {\r\n          id: this.$route.params.id,\r\n          page: this.currentPage,\r\n          pageSize: this.pageSize\r\n        }\r\n      })\r\n          .then((response) => {\r\n            this.rentalObject = response.data;\r\n            this.currentPage = this.rentalObject.reviews.currentPage;\r\n            this.totalPages = this.rentalObject.reviews.pages;\r\n            this.getReviewPics();\r\n            this.numOfBedsPerRoom();\r\n          });\r\n    }\r\n  },\r\n  methods: {\r\n    numOfBedsPerRoom() {\r\n      let result = \"Beds per room: \";\r\n      for(let i=0; i<this.rentalObject.rooms.length; i++) {\r\n        result += this.rentalObject.rooms[i].beds;\r\n        if(i === this.rentalObject.rooms.length - 1)\r\n          break\r\n        result += \" + \";\r\n      }\r\n      this.bedsPerRoom = result;\r\n    },\r\n    getEquipment(equipment) {\r\n      let printEquipment = \"\";\r\n      const collectionSize = equipment.length;\r\n      for(let i=0; i<collectionSize; i++) {\r\n        printEquipment += equipment[i].name;\r\n        if(i === collectionSize-1) break;\r\n        printEquipment += \", \"\r\n      }\r\n      if(printEquipment === \"\") return \"No equipment included.\";\r\n      return printEquipment;\r\n    },\r\n    formatTimeStamp(time) {\r\n      return time.slice(0, -3);\r\n    },\r\n    nextPage() {\r\n      this.currentPage += 1;\r\n      this.reloadReviews();\r\n    },\r\n    previousPage() {\r\n      this.currentPage -= 1;\r\n      this.reloadReviews();\r\n    },\r\n    numberedPage(buttonNumber) {\r\n      if (buttonNumber === 1) {\r\n        this.currentPage = this.button1Content - 1;\r\n      } else if (buttonNumber === 2) {\r\n        this.currentPage = this.button2Content - 1;\r\n      } else if (buttonNumber === 3) {\r\n        this.currentPage = this.button3Content - 1;\r\n      }\r\n      this.reloadReviews();\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cut-text {\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n.page-link {\r\n  background-color: white;\r\n  border: 2px solid black;\r\n}\r\ndiv.rentalObjectName {\r\n  display: flex;\r\n}\r\ndiv.lineTitle {\r\n  display: flex;\r\n}\r\n\r\nhr {\r\n  flex-grow: 1;\r\n}\r\n\r\ndiv.rentalBasicInfo {\r\n  height: 60vh;\r\n}\r\n\r\n.btn-default {\r\n  cursor: pointer;\r\n  user-select: none;\r\n  color: black;\r\n  text-decoration: none;\r\n  background-color: white;\r\n  border: none;\r\n}\r\n\r\n.btn-default:hover, .btn-default:active, .btn-default:focus {\r\n  border: 1px solid white;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}