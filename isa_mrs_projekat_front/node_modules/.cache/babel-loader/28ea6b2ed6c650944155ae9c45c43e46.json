{"ast":null,"code":"import { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faCheck, faBan } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios/index\";\nimport store from \"@/store\";\nlibrary.add(faCheck, faBan);\nexport default {\n  name: \"AdminRequestPreview\",\n  props: [\"request\"],\n  components: {\n    FontAwesomeIcon\n  },\n\n  data() {\n    return {\n      explanation: \"\",\n      action: \"\"\n    };\n  },\n\n  methods: {\n    setActionNo() {\n      this.action = \"Rejected\";\n    },\n\n    setActionYes() {\n      this.action = \"Accepted\";\n    },\n\n    createResponse() {\n      axios.put(\"/Requests/request\", null, {\n        headers: {\n          Authorization: \"Bearer \" + this.accessToken\n        },\n        params: {\n          id: this.request.id,\n          status: this.action,\n          reason: this.explanation,\n          adminEmail: this.adminEmail\n        }\n      }).then(response => {\n        const message = \"Request \" + response.data.id + \" was successfully \" + response.data.status.toLowerCase() + \".\";\n        this.$notify({\n          title: \"Request Management Notification\",\n          text: message,\n          type: \"success\"\n        });\n        this.$emit(\"requestManaged\");\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"Request Not Found\",\n            text: \"Request with the specified id does not exist!\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 400) {\n          this.$notify({\n            title: \"Invalid Request Status\",\n            text: \"Request status does not have the right form!\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later...\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  },\n  computed: {\n    fullName() {\n      return this.request.user.name + \" \" + this.request.user.surname;\n    },\n\n    role() {\n      if (this.request.user.userType === \"Admin\") {\n        return \"(Admin)\";\n      } else if (this.request.user.userType === \"SuperAdmin\") {\n        return \"(Supreme Admin)\";\n      } else if (this.request.user.userType === \"Instructor\") {\n        return \"(Fishing Instructor)\";\n      } else if (this.request.user.userType === \"VacationRentalOwner\") {\n        return \"(Vacation House Owner)\";\n      } else if (this.request.user.userType === \"BoatOwner\") {\n        return \"(Boat Owner)\";\n      } else {\n        return \"(Client)\";\n      }\n    },\n\n    title() {\n      if (this.request.type === \"SignUp\") {\n        return \"Sign Up Request\";\n      } else {\n        return \"Account Deletion Request\";\n      }\n    },\n\n    date() {\n      let data = this.request.timeStamp.split(\"T\");\n      let date = null;\n      let first_part = data[0].split(\"-\");\n      let second_part = data[1].split(\":\");\n      date = first_part[2].concat(\".\").concat(first_part[1]).concat(\".\").concat(first_part[0]).concat(\".\").concat(\" at \").concat(second_part[0]).concat(\":\").concat(second_part[1]);\n      return date;\n    },\n\n    explanationIsEntered() {\n      return this.explanation.length > 50 && this.explanation.length < 200;\n    },\n\n    accessToken() {\n      return store.state.access_token;\n    },\n\n    adminEmail() {\n      return store.state.email;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["FontAwesomeIcon","library","faCheck","faBan","axios","store","add","name","props","components","data","explanation","action","methods","setActionNo","setActionYes","createResponse","put","headers","Authorization","accessToken","params","id","request","status","reason","adminEmail","then","response","message","toLowerCase","$notify","title","text","type","$emit","catch","error","computed","fullName","user","surname","role","userType","date","timeStamp","split","first_part","second_part","concat","explanationIsEntered","length","state","access_token","email"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\Administrator\\AdminPage\\components\\AdminMainViews\\AdminRequestsView\\AdminRequestPreview\\AdminRequestPreview.vue"],"sourcesContent":["<template>\r\n  <div class=\"container-fluid rounded p-2 mb-3\">\r\n    <div class=\"row main-col align-items-end\">\r\n      <div class=\"col-md-8 main-col\">\r\n        <h5>{{fullName + \" \" + role}}</h5>\r\n      </div>\r\n      <div class=\"col-md-2 main-col\">\r\n        <button class=\"btn rounded-circle yes\" @click.prevent=\"setActionYes\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmationDialog\">\r\n          <font-awesome-icon icon=\"check\" style=\"color: forestgreen\"></font-awesome-icon>\r\n        </button>\r\n      </div>\r\n      <div class=\"col-md-2 main-col\">\r\n        <div class=\"dropdown d-flex justify-content-start\">\r\n          <button class=\"btn rounded-circle dropdown no\" type=\"button\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n            <font-awesome-icon icon=\"ban\" style=\"color: darkred\"></font-awesome-icon>\r\n          </button>\r\n          <div class=\"dropdown-menu\"  style=\"width: 300px; height: 230px; background-color: #f7f7f2; border: 1px solid #3f5b25\">\r\n            <div class=\"container-fluid\" style=\"background-color: #f7f7f2\">\r\n              <div class=\"row\">\r\n                <p>Please enter the reason for rejection below (50-200 characters):</p>\r\n              </div>\r\n              <div class=\"row\">\r\n                <form>\r\n                  <div class=\"form-group\">\r\n                    <textarea class=\"form-control\" style=\"resize: none\" rows=\"3\" maxlength=\"200\" v-model=\"explanation\"></textarea>\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <button class=\"btn btn-default\" :class=\"explanationIsEntered?null:'disabled'\" @click.prevent=\"setActionNo\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmationDialog\">Confirm</button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row main-col align-items-end\">\r\n      <div class=\"col-md-12 main-col\">\r\n        <p class=\"h-4\" style=\"color: gray\">{{date}}</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"row main-col align-items-end\">\r\n      <div class=\"col-md-12 main-col\">\r\n        <div class=\"lineTitle\">\r\n          <p class=\"h4\">{{title}}</p>\r\n          <hr class=\"ms-1\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row main-col align-items-end\">\r\n      <div class=\"col-md-12 main-col\">\r\n        <div class=\"rounded\" style=\"background-color: white\">\r\n          <p style=\"color: gray\">\r\n            {{this.request.reason}}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal fade\" id=\"confirmationDialog\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Request Management Confirmation</h5>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          Do you want to change request's status into {{action.toLowerCase()}} for the user {{fullName}}?\r\n          <div v-if=\"action==='Rejected'\">{{explanation}}</div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-danger\" style=\"margin-right: 2vh;\" data-bs-dismiss=\"modal\">No</button>\r\n          <button type=\"button\" class=\"btn btn-success\" @click=\"createResponse\" data-bs-dismiss=\"modal\">Yes</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faCheck, faBan } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios/index\";\r\nimport store from \"@/store\";\r\n\r\nlibrary.add(faCheck, faBan);\r\n\r\nexport default {\r\n  name: \"AdminRequestPreview\",\r\n  props: [\"request\"],\r\n  components: {\r\n    FontAwesomeIcon\r\n  },\r\n  data() {\r\n    return {\r\n      explanation: \"\",\r\n      action: \"\"\r\n    }\r\n  },\r\n  methods:{\r\n    setActionNo() {\r\n      this.action = \"Rejected\";\r\n    },\r\n    setActionYes() {\r\n      this.action = \"Accepted\";\r\n    },\r\n    createResponse() {\r\n      axios.put(\"/Requests/request\", null, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.accessToken,\r\n        },\r\n        params: {\r\n          id: this.request.id,\r\n          status: this.action,\r\n          reason: this.explanation,\r\n          adminEmail: this.adminEmail\r\n        }\r\n      })\r\n      .then((response)=> {\r\n        const message = \"Request \" + response.data.id + \" was successfully \" + response.data.status.toLowerCase() + \".\";\r\n        this.$notify({\r\n          title: \"Request Management Notification\",\r\n          text: message,\r\n          type: \"success\"\r\n        });\r\n        this.$emit(\"requestManaged\");\r\n      })\r\n      .catch((error) =>{\r\n        if (error.response.status===404) {\r\n          this.$notify({\r\n            title: \"Request Not Found\",\r\n            text: \"Request with the specified id does not exist!\" ,\r\n            type: \"warn\"\r\n          })\r\n        } else if (error.response.status===400) {\r\n          this.$notify({\r\n            title: \"Invalid Request Status\",\r\n            text: \"Request status does not have the right form!\",\r\n            type: \"warn\"\r\n          })\r\n        } else if (error.response.status===500) {\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text: \"Something went wrong on the server! Please try again later...\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    fullName() {\r\n      return this.request.user.name + \" \" + this.request.user.surname;\r\n    },\r\n    role() {\r\n      if (this.request.user.userType === \"Admin\") {\r\n        return \"(Admin)\";\r\n      } else if (this.request.user.userType === \"SuperAdmin\") {\r\n        return \"(Supreme Admin)\";\r\n      } else if (this.request.user.userType === \"Instructor\") {\r\n        return \"(Fishing Instructor)\";\r\n      } else if (this.request.user.userType === \"VacationRentalOwner\") {\r\n        return \"(Vacation House Owner)\";\r\n      } else if (this.request.user.userType === \"BoatOwner\") {\r\n        return \"(Boat Owner)\";\r\n      } else {\r\n        return \"(Client)\";\r\n      }\r\n    },\r\n    title() {\r\n      if (this.request.type === \"SignUp\") {\r\n        return \"Sign Up Request\";\r\n      } else {\r\n        return \"Account Deletion Request\";\r\n      }\r\n    },\r\n    date() {\r\n      let data = this.request.timeStamp.split(\"T\");\r\n      let date = null;\r\n      let first_part = data[0].split(\"-\");\r\n      let second_part = data[1].split(\":\");\r\n      date = first_part[2].concat(\".\").concat(first_part[1]).concat(\".\").concat(first_part[0]).concat(\".\").concat(\" at \").concat(second_part[0]).concat(\":\").concat(second_part[1]);\r\n      return date;\r\n    },\r\n    explanationIsEntered() {\r\n      return this.explanation.length > 50 && this.explanation.length < 200;\r\n    },\r\n    accessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    adminEmail() {\r\n      return store.state.email;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .container-fluid {\r\n    background-color: #f7f7f2;\r\n  }\r\n\r\n  .lineTitle {\r\n    display: flex;\r\n  }\r\n\r\n  hr {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  div.lineTitle {\r\n    display: flex;\r\n  }\r\n\r\n  .btn-default {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    cursor: pointer;\r\n    position: relative;\r\n    font-weight: 400;\r\n    user-select: none;\r\n\r\n    margin: 0.1em 0;\r\n    padding: 0.2em;\r\n    border-radius: 0.25em;\r\n    height: 2em;\r\n\r\n    color: #f7f7f2;\r\n    background-color: #3F9725;\r\n    text-decoration: none;\r\n  }\r\n\r\n  .btn-default:hover, .btn-default:active {\r\n    color: #378220;\r\n    background-color: #f7f7f2;\r\n  }\r\n\r\n  .btn-default .icon {\r\n    flex-shrink: 0;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .btn.yes:active, .btn.yes:hover, .btn.yes:focus {\r\n    outline: none;\r\n    background-color: greenyellow;\r\n  }\r\n\r\n  .btn.no:active, .btn.no:hover, .btn.no:focus {\r\n    outline: none;\r\n    background-color: red;\r\n  }\r\n</style>"]},"metadata":{},"sourceType":"module"}