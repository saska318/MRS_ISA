{"ast":null,"code":"import axios from \"axios/index\";\nexport default {\n  name: \"ReservationCancellation\",\n  props: [\"id\", \"cancellationFee\", \"reservationStartDate\", \"reservationId\", \"total\"],\n\n  data() {\n    return {\n      isCancelled: false,\n      confirmButtonTxt: \"Yes\",\n      denyButtonTxt: \"No\",\n      cantCancelText: \"You can only cancel reservation up until 3 days before. We are sorry for the inconvenience.\",\n      freeCancelText: \"Canceling this reservation is free.\",\n      fixedFeeCancelText: \"The fee for cancelling this reservation is $\" + this.cancellationFee + \".\",\n      percentileFeeCancelText: \"The fee for cancelling this reservation is $\" + (this.total / 100 * this.cancellationFee).toFixed(2) + \" (\" + this.cancellationFee + \"%).\",\n      proceedText: \"Would you like to proceed?\"\n    };\n  },\n\n  computed: {\n    // isFixed() {\n    //   return this.cancellationFee.feeType === \"Fixed\";\n    // },\n    isPercentile() {\n      return this.cancellationFee > 0;\n    },\n\n    // isFree() {\n    //   return this.cancellationFee === 0;\n    // },\n    isCancellable() {\n      let today = new Date(),\n          startDate = new Date(this.reservationStartDate);\n      today.setHours(0, 0, 0);\n      startDate.setHours(0, 0, 0);\n      let Difference_In_Time = startDate.getTime() - today.getTime();\n      let Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\n      Difference_In_Days = Math.round(Difference_In_Days);\n      return Difference_In_Days >= 3;\n    }\n\n  },\n  methods: {\n    getFeeAmount() {\n      return (this.total / 100 * this.cancellationFee).toFixed(2);\n    },\n\n    cancelReservation() {\n      // console.log(this.getFeeAmount());\n      axios.put(\"/Reservations/cancelReservation\", null, {\n        headers: {\n          Authorization: \"Bearer \" + this.$store.getters.access_token\n        },\n        params: {\n          id: this.reservationId,\n          feeAmount: this.getFeeAmount()\n        }\n      }).then(() => {\n        this.confirmButtonTxt = \"Cancelled!\";\n        this.isCancelled = true;\n        this.denyButtonTxt = \"Close\";\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"Invalid Status\",\n            text: \"Something went wrong. Try again later.\",\n            position: \"bottom right\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later...\",\n            position: \"bottom right\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  },\n\n  mounted() {}\n\n};","map":{"version":3,"mappings":"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","names":["axios","name","props","data","isCancelled","confirmButtonTxt","denyButtonTxt","cantCancelText","freeCancelText","fixedFeeCancelText","cancellationFee","percentileFeeCancelText","total","toFixed","proceedText","computed","isPercentile","isCancellable","today","Date","startDate","reservationStartDate","setHours","Difference_In_Time","getTime","Difference_In_Days","Math","round","methods","getFeeAmount","cancelReservation","put","headers","Authorization","$store","getters","access_token","params","id","reservationId","feeAmount","then","catch","error","response","status","$notify","title","text","position","type","mounted"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\Client\\ClientPage\\components\\ClientProfile\\ClientReservations\\ReservationCancellation.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal fade\" :id=\"'cancel-'+this.id\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header p-0 m-0\" style=\"border-bottom: none\">\r\n        </div>\r\n        <div class=\"modal-body py-0 my-0\">\r\n          <div v-if=\"!isCancellable\">\r\n            <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n              <h1 class=\"modal-title pb-1\" style=\"color: #e23c52; font-weight: 700;\">Cancellation Failed</h1>\r\n            </div>\r\n            <div class=\"row mt-3 px-1\" style=\"text-align: justify\">\r\n              <p class=\"h5\">{{ this.cantCancelText }}</p>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n              <h1 class=\"modal-title pb-1\" style=\"color: #008970; font-weight: 700;\">Cancel Reservation</h1>\r\n            </div>\r\n            <div v-if=\"!isPercentile\" class=\"row mt-3 px-1\" style=\"text-align: center\">\r\n              <p class=\"h5\">{{ this.freeCancelText }}</p>\r\n            </div>\r\n<!--            <div v-if=\"isFixed\" class=\"row mt-3 px-1\" style=\"text-align: center\">-->\r\n<!--              <p class=\"h5\">{{ this.fixedFeeCancelText }}</p>-->\r\n<!--            </div>-->\r\n            <div v-if=\"isPercentile\" class=\"row mt-3 px-1\" style=\"text-align: center\">\r\n              <p class=\"h5\">{{ this.percentileFeeCancelText }}</p>\r\n            </div>\r\n            <div class=\"row mt-3 px-1\" style=\"text-align: center\">\r\n              <p class=\"h5\">{{ this.proceedText }}</p>\r\n            </div>\r\n          </div>\r\n\r\n\r\n        </div>\r\n        <div class=\"modal-footer d-flex\" style=\"border-top: none; justify-content: space-evenly\">\r\n          <button v-if=\"isCancellable\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color:#e23c52; color: white; width: 40%\">{{ this.denyButtonTxt }}</button>\r\n          <button v-if=\"isCancellable\" type=\"button\" class=\"btn btn-secondary\" :disabled=\"isCancelled\"\r\n                  style=\"color: white; width: 40%\" @click=\"cancelReservation\">{{ this.confirmButtonTxt }}</button>\r\n          <button v-if=\"!isCancellable\" type=\"button\" class=\"btn btn-secondary w-100\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color:#e23c52; color: white;\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from \"axios/index\";\r\n\r\nexport default {\r\n  name: \"ReservationCancellation\",\r\n  props: [\"id\", \"cancellationFee\", \"reservationStartDate\", \"reservationId\", \"total\"],\r\n  data() {\r\n    return {\r\n      isCancelled: false,\r\n      confirmButtonTxt: \"Yes\",\r\n      denyButtonTxt: \"No\",\r\n      cantCancelText: \"You can only cancel reservation up until 3 days before. We are sorry for the inconvenience.\",\r\n      freeCancelText: \"Canceling this reservation is free.\",\r\n      fixedFeeCancelText: \"The fee for cancelling this reservation is $\" + this.cancellationFee + \".\",\r\n      percentileFeeCancelText: \"The fee for cancelling this reservation is $\"\r\n          + ((this.total/100)*this.cancellationFee).toFixed(2)\r\n          + \" (\" + this.cancellationFee + \"%).\",\r\n      proceedText: \"Would you like to proceed?\",\r\n    }\r\n  },\r\n  computed: {\r\n    // isFixed() {\r\n    //   return this.cancellationFee.feeType === \"Fixed\";\r\n    // },\r\n    isPercentile() {\r\n      return this.cancellationFee > 0;\r\n    },\r\n    // isFree() {\r\n    //   return this.cancellationFee === 0;\r\n    // },\r\n    isCancellable() {\r\n      let today = new Date(), startDate = new Date(this.reservationStartDate);\r\n      today.setHours(0, 0, 0);\r\n      startDate.setHours(0, 0, 0);\r\n      let Difference_In_Time = startDate.getTime() - today.getTime();\r\n      let Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\r\n      Difference_In_Days = Math.round(Difference_In_Days)\r\n      return Difference_In_Days >= 3;\r\n    },\r\n  },\r\n  methods: {\r\n    getFeeAmount() {\r\n      return ((this.total/100)*this.cancellationFee).toFixed(2);\r\n    },\r\n    cancelReservation() {\r\n      // console.log(this.getFeeAmount());\r\n      axios.put(\"/Reservations/cancelReservation\", null, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.$store.getters.access_token\r\n        },\r\n        params: {\r\n          id: this.reservationId,\r\n          feeAmount: this.getFeeAmount(),\r\n        }\r\n      })\r\n      .then(() => {\r\n        this.confirmButtonTxt = \"Cancelled!\";\r\n        this.isCancelled = true;\r\n        this.denyButtonTxt = \"Close\";\r\n      })\r\n      .catch(error => {\r\n        if (error.response.status === 404) {\r\n          this.$notify({\r\n            title: \"Invalid Status\",\r\n            text: \"Something went wrong. Try again later.\",\r\n            position: \"bottom right\",\r\n            type: \"warn\"\r\n          })\r\n        } else if (error.response.status === 500) {\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text: \"Something went wrong on the server! Please try again later...\",\r\n            position: \"bottom right\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nbutton:disabled {\r\n  background-color: #008970;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}