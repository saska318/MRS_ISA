{"ast":null,"code":"import axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: \"InitView\",\n\n  data() {\n    return {\n      email: \"\",\n      password: \"\"\n    };\n  },\n\n  created() {\n    this.$store.dispatch(\"user\", null);\n    this.$store.dispatch(\"isSuperAdmin\", false);\n    this.$store.dispatch(\"email\", null);\n    this.$store.dispatch(\"access_token\", null);\n    this.$store.dispatch(\"first_login\", null);\n  },\n\n  methods: {\n    handleSubmit() {\n      if (this.email === \"\") {\n        this.$notify({\n          title: \"Mandatory field empty\",\n          text: \"Email is a mandatory field! Please enter email to login.\",\n          type: \"error\"\n        });\n      } else if (this.password === \"\") {\n        this.$notify({\n          title: \"Mandatory field empty\",\n          text: \"Password is a mandatory field! Please enter password to login.\",\n          type: \"error\"\n        });\n      } else {\n        axios.post(\"login\", {\n          email: this.email,\n          password: this.password\n        }).then(response => {\n          this.$store.dispatch(\"user\", response.data.user_type);\n          this.$store.dispatch(\"access_token\", response.data.access_token);\n          this.$store.dispatch(\"first_login\", Boolean(response.data.first_login));\n          this.$store.dispatch(\"email\", this.email);\n\n          if (response.data.user_type === \"SuperAdmin\") {\n            this.$store.dispatch(\"user\", \"admin\");\n            this.$store.dispatch(\"isSuperAdmin\", true);\n\n            if (store.state.first_login) {\n              this.$router.push(\"/admin/changePass\");\n            } else {\n              this.$router.push(\"/admin\");\n            }\n          } else if (response.data.user_type === \"Admin\") {\n            this.$store.dispatch(\"user\", \"admin\");\n            this.$store.dispatch(\"isSuperAdmin\", false);\n\n            if (store.state.first_login) {\n              this.$router.push(\"/admin/changePass\");\n            } else {\n              this.$router.push(\"/admin\");\n            }\n          } else if (response.data.user_type === \"Instructor\") {\n            this.$store.dispatch(\"user\", \"fishingInstructor\");\n\n            if (store.state.first_login) {\n              this.$router.push(\"/fishingInstructor/changePass\");\n            } else {\n              this.$router.push(\"/fishingInstructor\");\n            }\n          } else if (response.data.user_type === \"VacationRentalOwner\") {\n            this.$store.dispatch(\"user\", \"vacationRentalOwner\");\n\n            if (store.state.first_login) {\n              this.$router.push(\"/vacationRentalOwner/changePass\");\n            } else {\n              this.$router.push(\"/vacationRentalOwner\");\n            }\n          } else if (response.data.user_type === \"BoatOwner\") {\n            this.$store.dispatch(\"user\", \"boatOwner\");\n\n            if (store.state.first_login) {\n              this.$router.push(\"/boatOwner/changePass\");\n            } else {\n              this.$router.push(\"/boatOwner\");\n            }\n          } else if (response.data.user_type === \"Client\") {\n            this.$store.dispatch(\"user\", \"client\");\n\n            if (store.state.first_login) {\n              this.$router.push(\"/client/changePass\");\n            } else {\n              this.$router.push(\"/client\");\n            }\n          }\n        }).catch(error => {\n          if (!error.response) {\n            this.$notify({\n              title: \"Server error\",\n              text: \"Server is currently off. Please try again later...\",\n              type: \"error\"\n            });\n          } else if (error.status === 403) {\n            this.$notify({\n              title: \"Login failed\",\n              text: \"Email or password are not correct. Please try again...\",\n              type: \"error\"\n            });\n          } else {\n            this.$notify({\n              title: \"Unknown error\",\n              text: \"Some unknown error occurred. Please try again later.\",\n              type: \"error\"\n            });\n          }\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","store","name","data","email","password","created","$store","dispatch","methods","handleSubmit","$notify","title","text","type","post","then","response","user_type","access_token","Boolean","first_login","state","$router","push","catch","error","status"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\UnregisteredUser\\InitView.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5\">\r\n      <form class=\"px-4 py-3 rounded form\" @submit.prevent=\"handleSubmit\">\r\n        <div class=\"row\" style=\"display: flex; justify-content: center\">\r\n          <img src=\"@/assets/leaf_app_logo_dark.svg\" class=\"logo rounded-circle\" alt=\"\"/>\r\n        </div>\r\n        <div class=\"form-group row\">\r\n          <div class=\"col-sm-12\" style=\"display: flex; justify-content: center\">\r\n            <div class=\"col-md-4\">\r\n              <label for=\"inputEmail3\" class=\"col-sm-2 col-form-label\">Email</label>\r\n              <input type=\"email\" v-model=\"email\" class=\"form-control\" id=\"inputEmail3\" placeholder=\"Email\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group row\">\r\n          <div class=\"col-sm-12\" style=\"display: flex; justify-content: center\">\r\n            <div class=\"col-md-4\">\r\n              <label for=\"inputPassword3\" class=\"col-sm-2 col-form-label\">Password</label>\r\n              <input type=\"password\" v-model=\"password\" class=\"form-control\" id=\"inputPassword3\" placeholder=\"Password\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group row\">\r\n          <div class=\"col-sm-12 text-center mt-3\">\r\n            <button type=\"submit\" class=\"btn\">Sign in</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div class=\"col-2\"></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"InitView\",\r\n  data() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"user\", null);\r\n    this.$store.dispatch(\"isSuperAdmin\", false);\r\n    this.$store.dispatch(\"email\", null);\r\n    this.$store.dispatch(\"access_token\", null);\r\n    this.$store.dispatch(\"first_login\", null);\r\n  },\r\n  methods: {\r\n    handleSubmit() {\r\n      if (this.email === \"\") {\r\n        this.$notify({\r\n          title: \"Mandatory field empty\",\r\n          text: \"Email is a mandatory field! Please enter email to login.\",\r\n          type: \"error\"\r\n        });\r\n      }\r\n      else if (this.password === \"\") {\r\n        this.$notify({\r\n          title: \"Mandatory field empty\",\r\n          text: \"Password is a mandatory field! Please enter password to login.\",\r\n          type: \"error\"\r\n        });\r\n      }\r\n      else {\r\n          axios.post(\"login\", {\r\n                email: this.email,\r\n                password: this.password\r\n              })\r\n              .then(response => {\r\n                this.$store.dispatch(\"user\", response.data.user_type);\r\n                this.$store.dispatch(\"access_token\", response.data.access_token)\r\n                this.$store.dispatch(\"first_login\", Boolean(response.data.first_login))\r\n                this.$store.dispatch(\"email\", this.email);\r\n                if (response.data.user_type === \"SuperAdmin\") {\r\n                  this.$store.dispatch(\"user\", \"admin\");\r\n                  this.$store.dispatch(\"isSuperAdmin\", true);\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/admin/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/admin\");\r\n                  }\r\n                } else if (response.data.user_type === \"Admin\") {\r\n                  this.$store.dispatch(\"user\", \"admin\");\r\n                  this.$store.dispatch(\"isSuperAdmin\", false);\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/admin/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/admin\");\r\n                  }\r\n                } else if (response.data.user_type === \"Instructor\") {\r\n                  this.$store.dispatch(\"user\", \"fishingInstructor\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/fishingInstructor/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/fishingInstructor\");\r\n                  }\r\n                } else if (response.data.user_type === \"VacationRentalOwner\") {\r\n                  this.$store.dispatch(\"user\", \"vacationRentalOwner\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/vacationRentalOwner/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/vacationRentalOwner\");\r\n                  }\r\n                } else if (response.data.user_type === \"BoatOwner\") {\r\n                  this.$store.dispatch(\"user\", \"boatOwner\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/boatOwner/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/boatOwner\");\r\n                  }\r\n                } else if (response.data.user_type === \"Client\") {\r\n                  this.$store.dispatch(\"user\", \"client\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/client/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/client\");\r\n                  }\r\n                }\r\n              })\r\n              .catch((error) => {\r\n                if (!error.response) {\r\n                  this.$notify({\r\n                    title: \"Server error\",\r\n                    text: \"Server is currently off. Please try again later...\",\r\n                    type: \"error\"\r\n                  });\r\n                } else if (error.status === 403) {\r\n                  this.$notify({\r\n                    title: \"Login failed\",\r\n                    text: \"Email or password are not correct. Please try again...\",\r\n                    type: \"error\"\r\n                  });\r\n                } else {\r\n                  this.$notify({\r\n                    title: \"Unknown error\",\r\n                    text: \"Some unknown error occurred. Please try again later.\",\r\n                    type: \"error\"\r\n                  })\r\n                }\r\n              });\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.logo {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: solid 5px #008970;\r\n  width: 15vh;\r\n  height: 15vh;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}