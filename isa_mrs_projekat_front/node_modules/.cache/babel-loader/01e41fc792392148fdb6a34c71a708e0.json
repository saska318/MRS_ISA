{"ast":null,"code":"import { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faCheck, faX } from \"@fortawesome/free-solid-svg-icons\";\nlibrary.add(faCheck, faX);\nimport InstructorClientPreview from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorClientPreview\";\nimport InstructorReservationServices from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorReservationServices\";\nexport default {\n  name: \"InstructorUpcomingReservations\",\n  components: {\n    FontAwesomeIcon,\n    InstructorClientPreview,\n    InstructorReservationServices\n  },\n  props: [\"reservations\", \"images\"],\n\n  data() {\n    return {};\n  },\n\n  methods: {\n    setRentalIdAndType(reservation) {\n      this.$store.dispatch(\"rentalId\", reservation.rentalObject.id);\n      this.$store.dispatch(\"rentalType\", reservation.rentalObject.rentalObjectType);\n    },\n\n    getPath(reservation) {\n      return \"/fishingInstructor/Adventure/\" + reservation.rentalObject.id;\n    },\n\n    showAdventureProfile(id) {\n      return this.$router.push('/fishingInstructor/Adventure/' + id);\n    },\n\n    getDateSpan(reservation) {\n      let initDate = reservation.initDate,\n          termDate = reservation.termDate;\n      let date1 = new Date(initDate),\n          date2 = new Date(termDate);\n      let dateDisplay = date1.getDate() + '.' + (date1.getMonth() + 1) + '.' + date1.getFullYear() + '.';\n      if (date1.getFullYear() !== date2.getFullYear() || date1.getMonth() !== date2.getMonth() || date1.getDate() !== date2.getDate()) dateDisplay += ' - ' + date2.getDate() + '.' + (date2.getMonth() + 1) + '.' + date2.getFullYear() + '.';\n      return dateDisplay;\n    },\n\n    isFeeNull(reservation) {\n      return reservation.rentalObject.cancellationFee !== null;\n    },\n\n    calculateTotal(reservation) {\n      let days = this.getNumberOfDays(reservation);\n      let services = this.calculateAdditionalServices(reservation);\n      let price = reservation.price;\n\n      if (reservation.specialOffer !== undefined && reservation.specialOffer !== null) {\n        console.log(reservation.specialOffer);\n        return days * price / 100 * (100 - reservation.specialOffer.discount);\n      }\n\n      return days * price + services;\n    },\n\n    getNumberOfDays(reservation) {\n      let initDate = reservation.initDate,\n          termDate = reservation.termDate;\n      let date1 = new Date(initDate),\n          date2 = new Date(termDate);\n      date1.setHours(0, 0, 0);\n      date2.setHours(0, 0, 0);\n      let timeDiff = date2.getTime() - date1.getTime();\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\n      return daysDiff + 1;\n    },\n\n    calculateAdditionalServices(reservation) {\n      let services = reservation.additionalServices,\n          totalServices = 0;\n\n      for (let i = 0; i < services.length; i++) totalServices += services[i].price;\n\n      return totalServices;\n    }\n\n  },\n\n  mounted() {}\n\n};","map":{"version":3,"mappings":"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","names":["FontAwesomeIcon","library","faCheck","faX","add","InstructorClientPreview","InstructorReservationServices","name","components","props","data","methods","setRentalIdAndType","reservation","$store","dispatch","rentalObject","id","rentalObjectType","getPath","showAdventureProfile","$router","push","getDateSpan","initDate","termDate","date1","Date","date2","dateDisplay","getDate","getMonth","getFullYear","isFeeNull","cancellationFee","calculateTotal","days","getNumberOfDays","services","calculateAdditionalServices","price","specialOffer","undefined","console","log","discount","setHours","timeDiff","getTime","daysDiff","additionalServices","totalServices","i","length","mounted"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\FishingInstructor\\FishingInstructorPage\\components\\InstructorMainViews\\InstructorReservations\\InstructorUpcomingReservations\\InstructorUpcomingReservations.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div v-for=\"(reservation, i) in reservations\" :key=\"i\" class=\"card reservation mb-3 px-0\" style=\"margin: 2%\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-7\" >\r\n          <router-link :to=\"getPath(reservation)\" class=\"link\" @click=\"setRentalIdAndType(reservation)\">\r\n            <img v-if=\"images[i]\" class=\"rentalPhoto\" :src=\"images[i]\" alt=\"\"/>\r\n          </router-link>\r\n        </div>\r\n        <div class=\"col-md-5 p-4 d-flex flex-grow-1 justify-content-center align-items-center\" style=\"height: 25vh;\">\r\n          <div style=\"width: 95%;\">\r\n            <div class=\"row\">\r\n              <button class=\"w-100 btn mb-2\" style=\"font-weight: 500; color: white;\" data-bs-toggle=\"modal\"\r\n                      :data-bs-target=\"'#addServices-'+reservation.id\">\r\n                Services\r\n              </button>\r\n              <InstructorReservationServices :additionalServices=\"reservation.additionalServices\"\r\n                                             :resId=\"reservation.id\"\r\n                                             :specialOffer=\"reservation.specialOffer\"/>\r\n            </div>\r\n            <div class=\"row\">\r\n              <button class=\"w-100 btn mb-2\" style=\"font-weight: 500; color: white;\" data-bs-toggle=\"modal\"\r\n                      :data-bs-target=\"'#clientProfile-'+reservation.id\">\r\n                Client Preview\r\n              </button>\r\n              <InstructorClientPreview :client=\"reservation.client\"\r\n                                       :reservationId=\"reservation.id\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"row\">\r\n            <div class=\"rentalObjectName align-items-center text-start\" style=\"display: flex;\">\r\n              <div>\r\n                <h1 class=\"display-6 me-1 card-title cut-text\">{{ reservation.rentalObject.name }}</h1>\r\n              </div>\r\n              <hr>\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <p class=\"h5\"><strong style=\"color:#008970;\">Date:</strong> {{  getDateSpan(reservation) }}</p>\r\n          </div>\r\n          <div class=\"row\">\r\n            <p class=\"h5\"><strong style=\"color:#008970;\">Profit:</strong>\r\n              ${{ (calculateTotal(reservation)-reservation.income.value).toFixed(2) }}\r\n            </p>\r\n          </div>\r\n          <div class=\"row\">\r\n            <p class=\"h5\">\r\n              <font-awesome-icon v-if=\"reservation.equipmentRequired\" icon=\"check\" style=\"color:#008970;\"></font-awesome-icon>\r\n              <font-awesome-icon v-else icon=\"x\" style=\"color:#e23c52;\"></font-awesome-icon>\r\n              Equipment\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faCheck, faX } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nlibrary.add(faCheck, faX);\r\n\r\nimport InstructorClientPreview\r\n  from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorClientPreview\";\r\nimport InstructorReservationServices\r\n  from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorReservationServices\";\r\nexport default {\r\n  name: \"InstructorUpcomingReservations\",\r\n  components: {FontAwesomeIcon, InstructorClientPreview, InstructorReservationServices},\r\n  props: [\"reservations\", \"images\"],\r\n  data() {\r\n    return {\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setRentalIdAndType(reservation) {\r\n      this.$store.dispatch(\"rentalId\", reservation.rentalObject.id);\r\n      this.$store.dispatch(\"rentalType\", reservation.rentalObject.rentalObjectType);\r\n    },\r\n    getPath(reservation) {\r\n      return \"/fishingInstructor/Adventure/\" + reservation.rentalObject.id;\r\n    },\r\n    showAdventureProfile(id) {\r\n      return this.$router.push('/fishingInstructor/Adventure/' + id);\r\n    },\r\n    getDateSpan(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      let dateDisplay = date1.getDate() + '.' + (date1.getMonth() + 1) + '.' +  date1.getFullYear() + '.';\r\n      if(date1.getFullYear() !== date2.getFullYear() || date1.getMonth() !== date2.getMonth() || date1.getDate() !== date2.getDate())\r\n        dateDisplay += ' - ' + date2.getDate() + '.' + (date2.getMonth() + 1) + '.' +  date2.getFullYear() + '.';\r\n      return dateDisplay;\r\n    },\r\n    isFeeNull(reservation) {\r\n      return reservation.rentalObject.cancellationFee !== null;\r\n    },\r\n    calculateTotal(reservation) {\r\n      let days = this.getNumberOfDays(reservation);\r\n      let services = this.calculateAdditionalServices(reservation);\r\n      let price = reservation.price;\r\n      if(reservation.specialOffer !== undefined && reservation.specialOffer !== null) {\r\n        console.log(reservation.specialOffer);\r\n        return (days*price)/100 * (100-reservation.specialOffer.discount);\r\n      }\r\n      return days*price+services;\r\n    },\r\n    getNumberOfDays(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      date1.setHours(0, 0, 0);\r\n      date2.setHours(0, 0, 0);\r\n      let timeDiff = date2.getTime() - date1.getTime();\r\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\r\n      return daysDiff + 1;\r\n    },\r\n    calculateAdditionalServices(reservation) {\r\n      let services = reservation.additionalServices, totalServices = 0;\r\n      for(let i=0; i<services.length; i++) totalServices += services[i].price;\r\n      return totalServices;\r\n    },\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nhr {\r\n  flex-grow: 1;\r\n}\r\n.cut-text {\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\ndiv.rentalObjectName {\r\n  display: flex;\r\n}\r\ndiv.reservation {\r\n  box-shadow: 0.1rem 0.1rem 0.4rem rgb(0 0 0 / 15%);\r\n  background-color: #ffffff;\r\n}\r\ndiv.reservation:hover {\r\n  padding: 3px;\r\n}\r\nimg.rentalPhoto {\r\n  height: 25vh;\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  object-fit: cover;\r\n  object-position: center;\r\n}\r\n.card {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: fit-content;\r\n  min-width: 0;\r\n  width: 45%;\r\n  word-wrap: break-word;\r\n  background-color: #fff;\r\n  background-clip: border-box;\r\n  border: none;\r\n  box-shadow: 0 0.5rem 1rem rgb(0 0 0 / 15%);\r\n  border-radius: 1rem;\r\n}\r\n.card-header:first-child {\r\n  border-radius: calc(1rem - 1px) calc(1rem - 1px) 0 0;\r\n}\r\n.card-header {\r\n  position: relative;\r\n  padding: 2rem 2rem;\r\n  border-bottom: none;\r\n  background-color: inherit;\r\n  box-shadow: 0 0.125rem 0.25rem rgb(0 0 0 / 8%);\r\n  z-index: 2;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}