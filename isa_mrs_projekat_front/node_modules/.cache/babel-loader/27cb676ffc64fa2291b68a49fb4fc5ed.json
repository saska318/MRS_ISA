{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6365155e\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"px-4 py-3 rounded content-center\"\n};\nconst _hoisted_2 = {\n  class: \"form-text\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"d-inline-block\",\n  style: {\n    \"color\": \"#3f5b25\"\n  }\n}, \"Account Deletion\", -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  style: {\n    \"color\": \"red\",\n    \"font-size\": \"small\"\n  }\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = {\n  class: \"modal fade\",\n  id: \"staticBackdrop\",\n  \"data-bs-backdrop\": \"static\",\n  \"data-bs-keyboard\": \"false\",\n  tabindex: \"-1\",\n  \"aria-labelledby\": \"Label\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_8 = {\n  class: \"modal-dialog\"\n};\nconst _hoisted_9 = {\n  class: \"modal-content\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"modal-header\"\n}, [/*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"modal-title\",\n  id: \"Label\",\n  style: {\n    \"color\": \"#3f5b25\"\n  }\n}, \"Password confirmation\"), /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"button\",\n  class: \"btn-close\",\n  \"data-bs-dismiss\": \"modal\",\n  \"aria-label\": \"Close\"\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_11 = {\n  class: \"modal-body\"\n};\nconst _hoisted_12 = {\n  key: 0,\n  style: {\n    \"color\": \"red\",\n    \"font-size\": \"small\"\n  }\n};\nconst _hoisted_13 = {\n  class: \"modal-footer\"\n};\nconst _hoisted_14 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n\n  return _openBlock(), _createElementBlock(\"form\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_font_awesome_icon, {\n    class: \"d-inline-block\",\n    icon: \"user-slash\",\n    style: {\n      \"color\": \"#3f5b25\",\n      \"height\": \"28px\"\n    }\n  }), _hoisted_3]), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"textarea\", {\n    id: \"enteredRequest\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.enteredRequest = $event),\n    class: \"form-control\",\n    placeholder: \"Please enter a request...\",\n    maxlength: \"255\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.enteredRequest]]), $data.enteredRequest.length === 255 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, \"Oops! The maximum number of characters is 255.\")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-default\",\n    disabled: $options.isDisabled,\n    \"data-bs-toggle\": \"modal\",\n    \"data-bs-target\": \"#staticBackdrop\"\n  }, \" Submit \", 8\n  /* PROPS */\n  , _hoisted_6), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"inputPassword\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.passwordConfirmation = $event),\n    placeholder: \"Please enter password...\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.passwordConfirmation]]), !$options.isFilled ? (_openBlock(), _createElementBlock(\"p\", _hoisted_12, \"You must enter a password.\")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    class: \"btn btn-default\",\n    id: \"button\",\n    onClick: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitRequest && $options.submitRequest(...args), [\"prevent\"])),\n    disabled: !$options.isFilled,\n    style: {\n      \"color\": \"#378220\"\n    }\n  }, \" Submit \", 8\n  /* PROPS */\n  , _hoisted_14)])])])])]);\n}","map":{"version":3,"mappings":";;;;;AACQA,OAAK,EAAC;;;AACLA,OAAK,EAAC;;;gEAETC,oBAAuE,IAAvE,EAAuE;AAAnED,OAAK,EAAC,gBAA6D;AAA5CE,OAAsB,EAAtB;AAAA;AAAA;AAA4C,CAAvE,EAAkD,kBAAlD,EAAkE;AAAA;AAAlE;;;AAGGF,OAAK,EAAC;;;;AAENE,OAAoC,EAApC;AAAA;AAAA;AAAA;;;;AAOAF,OAAK,EAAC;AAAaG,IAAE,EAAC;AAAiB,sBAAiB;AAAS,sBAAiB;AAAQC,UAAQ,EAAC;AAAK,qBAAgB;AAAQ,iBAAY;;;AAC1IJ,OAAK,EAAC;;;AACJA,OAAK,EAAC;;;iEACTC,oBAGM,KAHN,EAGM;AAHDD,OAAK,EAAC;AAGL,CAHN,EAAyB,cACvBC,oBAAoF,IAApF,EAAoF;AAAhFD,OAAK,EAAC,aAA0E;AAA5DG,IAAE,EAAC,OAAyD;AAAjDD,OAAsB,EAAtB;AAAA;AAAA;AAAiD,CAApF,EAA0D,uBAA1D,CADuB,eAEvBD,oBAA4F,QAA5F,EAA4F;AAApFI,MAAI,EAAC,QAA+E;AAAtEL,OAAK,EAAC,WAAgE;AAApD,qBAAgB,OAAoC;AAA5B,gBAAW;AAAiB,CAA5F,CAFuB,CAAzB;;AAAA;;;AAIKA,OAAK,EAAC;;;;AAENE,OAAoC,EAApC;AAAA;AAAA;AAAA;;;AAEAF,OAAK,EAAC;;;;;;uBA1BnBM,oBAkCO,MAlCP,cAkCO,CAjCLL,oBAGM,KAHN,cAGM,CAFJM,aAAoHC,4BAApH,EAAoH;AAAjGR,SAAK,EAAC,gBAA2F;AAA1ES,QAAI,EAAC,YAAqE;AAAxDP,SAAmC,EAAnC;AAAA;AAAA;AAAA;AAAwD,GAApH,CAEI,EADJQ,UACI,CAHN,CAiCK,EA5BLT,oBAGM,KAHN,cAGM,iBAFJA,oBAA+I,UAA/I,EAA+I;AAArIE,MAAE,EAAC,gBAAkI;+DAAxGQ,uBAAcC,OAA0F;AAAxFZ,SAAK,EAAC,cAAkF;AAAnEa,eAAW,EAAC,2BAAuD;AAA3BC,aAAS,EAAC;AAAiB,GAA/I;;AAAA,oBAAuCH,uBAEnC,EAD0CA,qBAAeI,MAAf,KAAqB,qBAAnET,oBAA+H,GAA/H,cAA6E,gDAA7E,sCACI,CAHN,CA4BK,EAvBLL,oBAES,QAFT,EAES;AAFDI,QAAI,EAAC,QAEJ;AAFaL,SAAK,EAAC,iBAEnB;AAFsCgB,YAAQ,EAAEC,mBAEhD;AAF4D,sBAAe,OAE3E;AAFmF,sBAAe;AAElG,GAFT,EAA6H,UAA7H,EAEA;AAAA;AAFA,IAEAC,UAFA,CAuBK,EAnBLjB,oBAkBM,KAlBN,cAkBM,CAjBJA,oBAgBM,KAhBN,cAgBM,CAfJA,oBAcM,KAdN,cAcM,CAbJkB,WAaI,EATJlB,oBAGM,KAHN,eAGM,iBAFJA,oBAAgH,OAAhH,EAAgH;AAAzGI,QAAI,EAAC,UAAoG;AAAzFF,MAAE,EAAC,eAAsF;+DAA7DQ,6BAAoBC,OAAyC;AAAvCC,eAAW,EAAC;AAA2B,GAAhH;;AAAA,oBAAmDF,6BAE/C,GAD2CM,mCAA/CX,oBAAuF,GAAvF,eAAyD,4BAAzD,sCACI,CAHN,CASI,EALJL,oBAIM,KAJN,eAIM,CAHJA,oBAES,QAFT,EAES;AAFDD,SAAK,EAAC,iBAEL;AAFuBG,MAAE,EAAC,QAE1B;AAFoCiB,WAAK,wDAAUH,yDAAV,EAAuB,WAAvB,EAEzC;AAFmED,YAAQ,GAAGC,iBAE9E;AAFwFf,SAAsB,EAAtB;AAAA;AAAA;AAExF,GAFT,EAAwH,UAAxH,EAEA;AAAA;AAFA,IAEAmB,WAFA,CAGI,CAJN,CAKI,CAdN,CAeI,CAhBN,CAiBI,CAlBN,CAmBK,CAlCP","names":["class","_createElementVNode","style","id","tabindex","type","_createElementBlock","_createVNode","_component_font_awesome_icon","icon","_hoisted_3","$data","$event","placeholder","maxlength","length","disabled","$options","_hoisted_6","_hoisted_10","onClick","_hoisted_14"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\GeneralComponents\\UserAccountForms\\AccountDeletionForm.vue"],"sourcesContent":["<template>\r\n  <form class=\"px-4 py-3 rounded content-center\">\r\n    <div class=\"form-text\">\r\n      <font-awesome-icon class=\"d-inline-block\" icon=\"user-slash\" style=\"color:#3f5b25; height: 28px\"></font-awesome-icon>\r\n      <h3 class=\"d-inline-block\" style=\"color: #3f5b25\">Account Deletion</h3>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <textarea id=\"enteredRequest\" v-model=\"enteredRequest\" class=\"form-control\" placeholder=\"Please enter a request...\" maxlength=\"255\"></textarea>\r\n      <p style=\"color: red; font-size: small\" v-if=\"enteredRequest.length === 255\">Oops! The maximum number of characters is 255.</p>\r\n    </div>\r\n\r\n    <button type=\"button\" class=\"btn btn-default\" :disabled='isDisabled' data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\r\n      Submit\r\n    </button>\r\n\r\n    <div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"Label\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"Label\" style=\"color: #3f5b25\">Password confirmation</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <input type=\"password\" id=\"inputPassword\" v-model=\"passwordConfirmation\" placeholder=\"Please enter password...\">\r\n            <p style=\"color: red; font-size: small\" v-if=\"!isFilled\">You must enter a password.</p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button class=\"btn btn-default\" id=\"button\" @click.prevent=\"submitRequest\" :disabled='!isFilled' style=\"color: #378220\">\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faUserSlash } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios/index\";\r\nimport store from \"@/store\";\r\n\r\nlibrary.add(faUserSlash);\r\nexport default {\r\n  name: \"AccountDeletionForm\",\r\n  components: {\r\n    FontAwesomeIcon\r\n  },\r\n  data() {\r\n    return {\r\n      passwordConfirmation: '',\r\n      enteredRequest: ''\r\n    }\r\n  },\r\n  methods: {\r\n    submitRequest () {\r\n      axios.post(\"/Requests/delAcc\", {\r\n        email: this.email,\r\n        password: this.passwordConfirmation,\r\n        enteredRequest: this.enteredRequest,\r\n        requestType: 'AccountDeletion'\r\n      }, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.accessToken\r\n        }\r\n      })\r\n      .then(() => {\r\n        this.$notify( {\r\n          title: \"Account deletion Notification\",\r\n          text: \"Request to delete account successfully sent.\",\r\n          position: \"bottom right\",\r\n          type: \"success\"\r\n        });\r\n      })\r\n      .catch ((error) =>{\r\n        if(error.response.status===404){\r\n          this.$notify({\r\n            title: \"User not found\",\r\n            text: \"User with the specified e-mail was not found!\",\r\n            type: \"warn\"\r\n          })\r\n        } else if(error.response.status===401){\r\n          this.$notify({\r\n            title: \"Authorization Failed\",\r\n            text: \"Password is not valid!\",\r\n            type: \"error\"\r\n          })\r\n        } else if(error.response.status===400) {\r\n          this.$notify({\r\n            title: \"Invalid Request Status\",\r\n            text: \"Request status does not have the right form!\",\r\n            type: \"warn\"\r\n          })\r\n        } else if(error.response.status===500){\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text:\"Something went wrong on the server! Please try again later.\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    isDisabled() {\r\n      return this.enteredRequest.length < 30;\r\n    },\r\n    isFilled() {\r\n      return this.passwordConfirmation !== '';\r\n    },\r\n    accessToken(){\r\n      return store.state.access_token;\r\n    },\r\n    email(){\r\n      return store.state.email;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nform {\r\n  background-color: #fcfcfc;\r\n  outline: solid 2px #3f5b25;\r\n  margin-top: 40px;\r\n  color: #3f5b25;\r\n}\r\n\r\ntextarea {\r\n  height: 300px;\r\n  min-height: 100px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}