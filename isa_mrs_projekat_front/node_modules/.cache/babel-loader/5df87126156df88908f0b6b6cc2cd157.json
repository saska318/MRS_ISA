{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/leaf_app_logo_dark.svg';\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-e35c26c4\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"row\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-2\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"col-8 pt-5\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row\",\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  class: \"logo rounded-circle\",\n  alt: \"\"\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = {\n  class: \"form-group row\"\n};\nconst _hoisted_6 = {\n  class: \"col-sm-12\",\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\"\n  }\n};\nconst _hoisted_7 = {\n  class: \"col-md-4\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"inputEmail3\",\n  class: \"col-sm-2 col-form-label\"\n}, \"Email\", -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = {\n  class: \"form-group row\"\n};\nconst _hoisted_10 = {\n  class: \"col-sm-12\",\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\"\n  }\n};\nconst _hoisted_11 = {\n  class: \"col-md-4\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"inputPassword3\",\n  class: \"col-sm-2 col-form-label\"\n}, \"Password\", -1\n/* HOISTED */\n));\n\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group row\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-sm-12 text-center mt-3\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn\"\n}, \"Sign in\")])], -1\n/* HOISTED */\n));\n\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-2\"\n}, null, -1\n/* HOISTED */\n));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    class: \"px-4 py-3 rounded form\",\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleSubmit && $options.handleSubmit(...args), [\"prevent\"]))\n  }, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    class: \"form-control\",\n    id: \"inputEmail3\",\n    placeholder: \"Email\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.email]])])])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n    class: \"form-control\",\n    id: \"inputPassword3\",\n    placeholder: \"Password\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.password]])])])]), _hoisted_13], 32\n  /* HYDRATE_EVENTS */\n  )]), _hoisted_14]);\n}","map":{"version":3,"mappings":";OAMeA,gBAAqC;;;;;AAL7CC,OAAK,EAAC;;;gEACTC,oBAAyB,KAAzB,EAAyB;AAApBD,OAAK,EAAC;AAAc,CAAzB,EAAkB,IAAlB,EAAkB;AAAA;AAAlB;;;AACKA,OAAK,EAAC;;;gEAEPC,oBAEM,KAFN,EAEM;AAFDD,OAAK,EAAC,KAEL;AAFWE,OAA8C,EAA9C;AAAA;AAAA;AAAA;AAEX,CAFN,gBACED,oBAA+E,KAA/E,EAA+E;AAA1EE,KAAqC,EAArCJ,UAA0E;AAApCC,OAAK,EAAC,qBAA8B;AAARI,KAAG,EAAC;AAAI,CAA/E,EADF;;AAAA;;;AAGKJ,OAAK,EAAC;;;AACJA,OAAK,EAAC;AAAYE,OAA8C,EAA9C;AAAA;AAAA;AAAA;;;AAChBF,OAAK,EAAC;;;gEACTC,oBAAsE,OAAtE,EAAsE;AAA/DI,KAAG,EAAC,aAA2D;AAA7CL,OAAK,EAAC;AAAuC,CAAtE,EAAyD,OAAzD,EAA8D;AAAA;AAA9D;;;AAKDA,OAAK,EAAC;;;AACJA,OAAK,EAAC;AAAYE,OAA8C,EAA9C;AAAA;AAAA;AAAA;;;AAChBF,OAAK,EAAC;;;iEACTC,oBAA4E,OAA5E,EAA4E;AAArEI,KAAG,EAAC,gBAAiE;AAAhDL,OAAK,EAAC;AAA0C,CAA5E,EAA4D,UAA5D,EAAoE;AAAA;AAApE;;iEAKNC,oBAIM,KAJN,EAIM;AAJDD,OAAK,EAAC;AAIL,CAJN,EAA2B,cACzBC,oBAEM,KAFN,EAEM;AAFDD,OAAK,EAAC;AAEL,CAFN,EAAuC,cACrCC,oBAAkD,QAAlD,EAAkD;AAA1CK,MAAI,EAAC,QAAqC;AAA5BN,OAAK,EAAC;AAAsB,CAAlD,EAAkC,SAAlC,CADqC,CAAvC,CADyB,CAA3B;;AAAA;;iEAOJC,oBAAyB,KAAzB,EAAyB;AAApBD,OAAK,EAAC;AAAc,CAAzB,EAAkB,IAAlB,EAAkB;AAAA;AAAlB;;;uBA9BFO,oBA+BM,KA/BN,cA+BM,CA9BJC,UA8BI,EA7BJP,oBA2BM,KA3BN,cA2BM,CA1BJA,oBAyBO,MAzBP,EAyBO;AAzBDD,SAAK,EAAC,wBAyBL;AAzB+BS,YAAM,wDAAUC,uDAAV,EAAsB,WAAtB;AAyBrC,GAzBP,GACEC,YAGAV,oBAOM,KAPN,cAOM,CANJA,oBAKM,KALN,cAKM,CAJJA,oBAGM,KAHN,cAGM,CAFJW,UAEI,kBADJX,oBAA+F,OAA/F,EAA+F;AAAxFK,QAAI,EAAC,OAAmF;+DAAlEO,cAAKC,OAA6D;AAA3Dd,SAAK,EAAC,cAAqD;AAAtCe,MAAE,EAAC,aAAmC;AAArBC,eAAW,EAAC;AAAS,GAA/F;;AAAA,oBAA6BH,cACzB,CAHN,CAII,CALN,CAMI,CAPN,GAQAZ,oBAOM,KAPN,cAOM,CANJA,oBAKM,KALN,eAKM,CAJJA,oBAGM,KAHN,eAGM,CAFJgB,WAEI,kBADJhB,oBAA0G,OAA1G,EAA0G;AAAnGK,QAAI,EAAC,UAA8F;+DAA1EO,iBAAQC,OAAkE;AAAhEd,SAAK,EAAC,cAA0D;AAA3Ce,MAAE,EAAC,gBAAwC;AAAvBC,eAAW,EAAC;AAAW,GAA1G;;AAAA,oBAAgCH,iBAC5B,CAHN,CAII,CALN,CAMI,CAPN,GAQAK,YApBF;;AAAA,GA0BI,CA3BN,CA6BI,EADJC,WACI,CA/BN","names":["_imports_0","class","_createElementVNode","style","src","alt","for","type","_createElementBlock","_hoisted_2","onSubmit","$options","_hoisted_4","_hoisted_8","$data","$event","id","placeholder","_hoisted_12","_hoisted_13","_hoisted_14"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\UnregisteredUser\\InitView.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5\">\r\n      <form class=\"px-4 py-3 rounded form\" @submit.prevent=\"handleSubmit\">\r\n        <div class=\"row\" style=\"display: flex; justify-content: center\">\r\n          <img src=\"@/assets/leaf_app_logo_dark.svg\" class=\"logo rounded-circle\" alt=\"\"/>\r\n        </div>\r\n        <div class=\"form-group row\">\r\n          <div class=\"col-sm-12\" style=\"display: flex; justify-content: center\">\r\n            <div class=\"col-md-4\">\r\n              <label for=\"inputEmail3\" class=\"col-sm-2 col-form-label\">Email</label>\r\n              <input type=\"email\" v-model=\"email\" class=\"form-control\" id=\"inputEmail3\" placeholder=\"Email\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group row\">\r\n          <div class=\"col-sm-12\" style=\"display: flex; justify-content: center\">\r\n            <div class=\"col-md-4\">\r\n              <label for=\"inputPassword3\" class=\"col-sm-2 col-form-label\">Password</label>\r\n              <input type=\"password\" v-model=\"password\" class=\"form-control\" id=\"inputPassword3\" placeholder=\"Password\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group row\">\r\n          <div class=\"col-sm-12 text-center mt-3\">\r\n            <button type=\"submit\" class=\"btn\">Sign in</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div class=\"col-2\"></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"InitView\",\r\n  data() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"user\", null);\r\n    this.$store.dispatch(\"isSuperAdmin\", false);\r\n    this.$store.dispatch(\"email\", null);\r\n    this.$store.dispatch(\"access_token\", null);\r\n    this.$store.dispatch(\"first_login\", null);\r\n  },\r\n  methods: {\r\n    handleSubmit() {\r\n      if (this.email === \"\") {\r\n        this.$notify({\r\n          title: \"Mandatory field empty\",\r\n          text: \"Email is a mandatory field! Please enter email to login.\",\r\n          type: \"error\"\r\n        });\r\n      }\r\n      else if (this.password === \"\") {\r\n        this.$notify({\r\n          title: \"Mandatory field empty\",\r\n          text: \"Password is a mandatory field! Please enter password to login.\",\r\n          type: \"error\"\r\n        });\r\n      }\r\n      else {\r\n          axios.post(\"login\", {\r\n                email: this.email,\r\n                password: this.password\r\n              })\r\n              .then(response => {\r\n                this.$store.dispatch(\"user\", response.data.user_type);\r\n                this.$store.dispatch(\"access_token\", response.data.access_token)\r\n                this.$store.dispatch(\"first_login\", Boolean(response.data.first_login))\r\n                this.$store.dispatch(\"email\", this.email);\r\n                if (response.data.user_type === \"SuperAdmin\") {\r\n                  this.$store.dispatch(\"user\", \"admin\");\r\n                  this.$store.dispatch(\"isSuperAdmin\", true);\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/admin/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/admin\");\r\n                  }\r\n                } else if (response.data.user_type === \"Admin\") {\r\n                  this.$store.dispatch(\"user\", \"admin\");\r\n                  this.$store.dispatch(\"isSuperAdmin\", false);\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/admin/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/admin\");\r\n                  }\r\n                } else if (response.data.user_type === \"Instructor\") {\r\n                  this.$store.dispatch(\"user\", \"fishingInstructor\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/fishingInstructor/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/fishingInstructor\");\r\n                  }\r\n                } else if (response.data.user_type === \"VacationRentalOwner\") {\r\n                  this.$store.dispatch(\"user\", \"vacationRentalOwner\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/vacationRentalOwner/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/vacationRentalOwner\");\r\n                  }\r\n                } else if (response.data.user_type === \"BoatOwner\") {\r\n                  this.$store.dispatch(\"user\", \"boatOwner\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/boatOwner/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/boatOwner\");\r\n                  }\r\n                } else if (response.data.user_type === \"Client\") {\r\n                  this.$store.dispatch(\"user\", \"client\");\r\n                  if (store.state.first_login) {\r\n                    this.$router.push(\"/client/changePass\");\r\n                  } else {\r\n                    this.$router.push(\"/client\");\r\n                  }\r\n                }\r\n              })\r\n              .catch((error) => {\r\n                if (!error.response) {\r\n                  this.$notify({\r\n                    title: \"Server error\",\r\n                    text: \"Server is currently off. Please try again later...\",\r\n                    type: \"error\"\r\n                  });\r\n                } else if (error.status === 403) {\r\n                  this.$notify({\r\n                    title: \"Login failed\",\r\n                    text: \"Email or password are not correct. Please try again...\",\r\n                    type: \"error\"\r\n                  });\r\n                } else {\r\n                  this.$notify({\r\n                    title: \"Unknown error\",\r\n                    text: \"Some unknown error occurred. Please try again later.\",\r\n                    type: \"error\"\r\n                  })\r\n                }\r\n              });\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.logo {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: solid 5px #008970;\r\n  width: 15vh;\r\n  height: 15vh;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}