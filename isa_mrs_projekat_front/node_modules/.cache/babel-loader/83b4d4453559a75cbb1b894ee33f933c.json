{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5fe376ea\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = [\"id\"];\nconst _hoisted_2 = {\n  class: \"modal-dialog modal-dialog-centered modal-dialog-scrollable\"\n};\nconst _hoisted_3 = {\n  class: \"modal-content\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"modal-header p-0 m-0\",\n  style: {\n    \"border-bottom\": \"none\"\n  }\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = {\n  class: \"modal-body py-0 my-0\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row text-center pb-0 mb-0\",\n  style: {\n    \"border-bottom\": \"1px solid lightgray\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"modal-title pb-1\",\n  style: {\n    \"color\": \"#e23c52\",\n    \"font-weight\": \"700\"\n  }\n}, \"Cancellation Failed\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"row mt-3 px-1\",\n  style: {\n    \"text-align\": \"justify\"\n  }\n};\nconst _hoisted_9 = {\n  class: \"h5\"\n};\nconst _hoisted_10 = {\n  key: 1\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row text-center pb-0 mb-0\",\n  style: {\n    \"border-bottom\": \"1px solid lightgray\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"modal-title pb-1\",\n  style: {\n    \"color\": \"#008970\",\n    \"font-weight\": \"700\"\n  }\n}, \"Cancel Reservation\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_12 = {\n  key: 0,\n  class: \"row mt-3 px-1\",\n  style: {\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_13 = {\n  class: \"h5\"\n};\nconst _hoisted_14 = {\n  key: 1,\n  class: \"row mt-3 px-1\",\n  style: {\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_15 = {\n  class: \"h5\"\n};\nconst _hoisted_16 = {\n  class: \"row mt-3 px-1\",\n  style: {\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_17 = {\n  class: \"h5\"\n};\nconst _hoisted_18 = {\n  class: \"modal-footer d-flex\",\n  style: {\n    \"border-top\": \"none\",\n    \"justify-content\": \"space-evenly\"\n  }\n};\nconst _hoisted_19 = {\n  key: 0,\n  type: \"button\",\n  class: \"btn btn-secondary\",\n  \"data-bs-dismiss\": \"modal\",\n  style: {\n    \"background-color\": \"#e23c52\",\n    \"color\": \"white\",\n    \"width\": \"40%\"\n  }\n};\nconst _hoisted_20 = [\"disabled\"];\nconst _hoisted_21 = {\n  key: 2,\n  type: \"button\",\n  class: \"btn btn-secondary w-100\",\n  \"data-bs-dismiss\": \"modal\",\n  style: {\n    \"background-color\": \"#e23c52\",\n    \"color\": \"white\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"modal fade\",\n    id: 'cancel-' + this.id,\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\"\n  }, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [!$options.isCancellable ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"p\", _hoisted_9, _toDisplayString(this.cantCancelText), 1\n  /* TEXT */\n  )])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_hoisted_11, !$options.isPercentile ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"p\", _hoisted_13, _toDisplayString(this.freeCancelText), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\"            <div v-if=\\\"isFixed\\\" class=\\\"row mt-3 px-1\\\" style=\\\"text-align: center\\\">\"), _createCommentVNode(\"              <p class=\\\"h5\\\">{{ this.fixedFeeCancelText }}</p>\"), _createCommentVNode(\"            </div>\"), $options.isPercentile ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"p\", _hoisted_15, _toDisplayString(this.percentileFeeCancelText), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"p\", _hoisted_17, _toDisplayString(this.proceedText), 1\n  /* TEXT */\n  )])]))]), _createElementVNode(\"div\", _hoisted_18, [$options.isCancellable ? (_openBlock(), _createElementBlock(\"button\", _hoisted_19, _toDisplayString(this.denyButtonTxt), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), $options.isCancellable ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    disabled: $data.isCancelled,\n    style: {\n      \"color\": \"white\",\n      \"width\": \"40%\"\n    },\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.cancelReservation && $options.cancelReservation(...args))\n  }, _toDisplayString(this.confirmButtonTxt), 9\n  /* TEXT, PROPS */\n  , _hoisted_20)) : _createCommentVNode(\"v-if\", true), !$options.isCancellable ? (_openBlock(), _createElementBlock(\"button\", _hoisted_21, \"Close\")) : _createCommentVNode(\"v-if\", true)])])])], 8\n  /* PROPS */\n  , _hoisted_1);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","type","_createElementBlock","id","_hoisted_4","$options","_hoisted_6","_hoisted_7","_toDisplayString","cantCancelText","_hoisted_10","_hoisted_11","freeCancelText","_createCommentVNode","percentileFeeCancelText","proceedText","denyButtonTxt","disabled","$data","onClick","confirmButtonTxt","_hoisted_20"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\Client\\ClientPage\\components\\ClientProfile\\ClientReservations\\ReservationCancellation.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal fade\" :id=\"'cancel-'+this.id\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header p-0 m-0\" style=\"border-bottom: none\">\r\n        </div>\r\n        <div class=\"modal-body py-0 my-0\">\r\n          <div v-if=\"!isCancellable\">\r\n            <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n              <h1 class=\"modal-title pb-1\" style=\"color: #e23c52; font-weight: 700;\">Cancellation Failed</h1>\r\n            </div>\r\n            <div class=\"row mt-3 px-1\" style=\"text-align: justify\">\r\n              <p class=\"h5\">{{ this.cantCancelText }}</p>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n              <h1 class=\"modal-title pb-1\" style=\"color: #008970; font-weight: 700;\">Cancel Reservation</h1>\r\n            </div>\r\n            <div v-if=\"!isPercentile\" class=\"row mt-3 px-1\" style=\"text-align: center\">\r\n              <p class=\"h5\">{{ this.freeCancelText }}</p>\r\n            </div>\r\n<!--            <div v-if=\"isFixed\" class=\"row mt-3 px-1\" style=\"text-align: center\">-->\r\n<!--              <p class=\"h5\">{{ this.fixedFeeCancelText }}</p>-->\r\n<!--            </div>-->\r\n            <div v-if=\"isPercentile\" class=\"row mt-3 px-1\" style=\"text-align: center\">\r\n              <p class=\"h5\">{{ this.percentileFeeCancelText }}</p>\r\n            </div>\r\n            <div class=\"row mt-3 px-1\" style=\"text-align: center\">\r\n              <p class=\"h5\">{{ this.proceedText }}</p>\r\n            </div>\r\n          </div>\r\n\r\n\r\n        </div>\r\n        <div class=\"modal-footer d-flex\" style=\"border-top: none; justify-content: space-evenly\">\r\n          <button v-if=\"isCancellable\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color:#e23c52; color: white; width: 40%\">{{ this.denyButtonTxt }}</button>\r\n          <button v-if=\"isCancellable\" type=\"button\" class=\"btn btn-secondary\" :disabled=\"isCancelled\"\r\n                  style=\"color: white; width: 40%\" @click=\"cancelReservation\">{{ this.confirmButtonTxt }}</button>\r\n          <button v-if=\"!isCancellable\" type=\"button\" class=\"btn btn-secondary w-100\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color:#e23c52; color: white;\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from \"axios/index\";\r\n\r\nexport default {\r\n  name: \"ReservationCancellation\",\r\n  props: [\"id\", \"cancellationFee\", \"reservationStartDate\", \"reservationId\", \"total\"],\r\n  data() {\r\n    return {\r\n      isCancelled: false,\r\n      confirmButtonTxt: \"Yes\",\r\n      denyButtonTxt: \"No\",\r\n      cantCancelText: \"You can only cancel reservation up until 3 days before. We are sorry for the inconvenience.\",\r\n      freeCancelText: \"Canceling this reservation is free.\",\r\n      fixedFeeCancelText: \"The fee for cancelling this reservation is $\" + this.cancellationFee + \".\",\r\n      percentileFeeCancelText: \"The fee for cancelling this reservation is $\"\r\n          + ((this.total/100)*this.cancellationFee).toFixed(2)\r\n          + \" (\" + this.cancellationFee + \"%).\",\r\n      proceedText: \"Would you like to proceed?\",\r\n    }\r\n  },\r\n  computed: {\r\n    // isFixed() {\r\n    //   return this.cancellationFee.feeType === \"Fixed\";\r\n    // },\r\n    isPercentile() {\r\n      return this.cancellationFee > 0;\r\n    },\r\n    // isFree() {\r\n    //   return this.cancellationFee === 0;\r\n    // },\r\n    isCancellable() {\r\n      let today = new Date(), startDate = new Date(this.reservationStartDate);\r\n      today.setHours(0, 0, 0);\r\n      startDate.setHours(0, 0, 0);\r\n      let Difference_In_Time = startDate.getTime() - today.getTime();\r\n      let Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\r\n      Difference_In_Days = Math.round(Difference_In_Days)\r\n      return Difference_In_Days >= 3;\r\n    },\r\n  },\r\n  methods: {\r\n    getFeeAmount() {\r\n      return ((this.total/100)*this.cancellationFee).toFixed(2);\r\n    },\r\n    cancelReservation() {\r\n      // console.log(this.getFeeAmount());\r\n      axios.put(\"/Reservations/cancelReservation\", null, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.$store.getters.access_token\r\n        },\r\n        params: {\r\n          id: this.reservationId,\r\n          feeAmount: this.getFeeAmount(),\r\n        }\r\n      })\r\n      .then(() => {\r\n        this.confirmButtonTxt = \"Cancelled!\";\r\n        this.isCancelled = true;\r\n        this.denyButtonTxt = \"Close\";\r\n      })\r\n      .catch(error => {\r\n        if (error.response.status === 404) {\r\n          this.$notify({\r\n            title: \"Invalid Status\",\r\n            text: \"Something went wrong. Try again later.\",\r\n            position: \"bottom right\",\r\n            type: \"warn\"\r\n          })\r\n        } else if (error.response.status === 500) {\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text: \"Something went wrong on the server! Please try again later...\",\r\n            position: \"bottom right\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nbutton:disabled {\r\n  background-color: #008970;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}