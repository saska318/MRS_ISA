{"ast":null,"code":"// import axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faX } from \"@fortawesome/free-solid-svg-icons\";\nlibrary.add(faX);\nimport InstructorClientPreview from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorClientPreview\";\nexport default {\n  name: \"InstructorCancelledReservations\",\n  props: [\"reservations\", \"images\"],\n  components: {\n    FontAwesomeIcon,\n    InstructorClientPreview\n  },\n\n  data() {\n    return {// images: [],\n    };\n  },\n\n  methods: {\n    calculateCancellationInstructorIncome(reservation) {\n      let total = this.calculateTotal(reservation);\n      let cancellationPercentage = reservation.rentalObject.cancellationFee;\n      if (cancellationPercentage === 0) return 0;\n      let feeAmount = total / 100 * cancellationPercentage;\n      let systemIncome = feeAmount / 100 * reservation.income.fee;\n      return feeAmount - systemIncome;\n    },\n\n    setRentalIdAndType(reservation) {\n      this.$store.dispatch(\"rentalId\", reservation.rentalObject.id);\n      this.$store.dispatch(\"rentalType\", reservation.rentalObject.rentalObjectType);\n    },\n\n    getPath(reservation) {\n      return \"/fishingInstructor/Adventure/\" + reservation.rentalObject.id;\n    },\n\n    showAdventureProfile(id) {\n      return this.$router.push('/fishingInstructor/Adventure/' + id);\n    },\n\n    getDateSpan(reservation) {\n      let initDate = reservation.initDate,\n          termDate = reservation.termDate;\n      let date1 = new Date(initDate),\n          date2 = new Date(termDate); // date1.setHours(0, 0, 0);\n      // date2.setHours(0, 0, 0);\n\n      let dateDisplay = date1.getDate() + '.' + (date1.getMonth() + 1) + '.' + date1.getFullYear() + '.';\n      if (date1.getFullYear() !== date2.getFullYear() || date1.getMonth() !== date2.getMonth() || date1.getDate() !== date2.getDate()) dateDisplay += ' - ' + date2.getDate() + '.' + (date2.getMonth() + 1) + '.' + date2.getFullYear() + '.';\n      return dateDisplay;\n    },\n\n    isFeeNull(reservation) {\n      return reservation.rentalObject.cancellationFee !== null;\n    },\n\n    calculateTotal(reservation) {\n      let days = this.getNumberOfDays(reservation);\n      let services = this.calculateAdditionalServices(reservation);\n      let price = reservation.price;\n\n      if (reservation.specialOffer !== null) {\n        console.log(days * price / 100 * (100 - reservation.specialOffer.discount));\n        return days * price / 100 * (100 - reservation.specialOffer.discount);\n      }\n\n      return days * price + services;\n    },\n\n    getNumberOfDays(reservation) {\n      let initDate = reservation.initDate,\n          termDate = reservation.termDate;\n      let date1 = new Date(initDate),\n          date2 = new Date(termDate);\n      date1.setHours(0, 0, 0);\n      date2.setHours(0, 0, 0);\n      let timeDiff = date2.getTime() - date1.getTime();\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\n      return daysDiff + 1;\n    },\n\n    calculateAdditionalServices(reservation) {\n      let services = reservation.additionalServices,\n          totalServices = 0;\n\n      for (let i = 0; i < services.length; i++) totalServices += services[i].price;\n\n      return totalServices;\n    }\n\n  },\n\n  mounted() {}\n\n};","map":{"version":3,"mappings":"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","names":["FontAwesomeIcon","library","faX","add","InstructorClientPreview","name","props","components","data","methods","calculateCancellationInstructorIncome","reservation","total","calculateTotal","cancellationPercentage","rentalObject","cancellationFee","feeAmount","systemIncome","income","fee","setRentalIdAndType","$store","dispatch","id","rentalObjectType","getPath","showAdventureProfile","$router","push","getDateSpan","initDate","termDate","date1","Date","date2","dateDisplay","getDate","getMonth","getFullYear","isFeeNull","days","getNumberOfDays","services","calculateAdditionalServices","price","specialOffer","console","log","discount","setHours","timeDiff","getTime","daysDiff","additionalServices","totalServices","i","length","mounted"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\FishingInstructor\\FishingInstructorPage\\components\\InstructorMainViews\\InstructorReservations\\InstructorCancelledReservations\\InstructorCancelledReservations.vue"],"sourcesContent":["<template>\r\n  <div v-for=\"(reservation, i) in reservations\" :key=\"i\" class=\"card reservation mb-3 px-0\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4\" >\r\n        <router-link :to=\"getPath(reservation)\" class=\"link\" @click=\"setRentalIdAndType(reservation)\">\r\n          <img v-if=\"images[i]\" class=\"rentalPhoto\" :src=\"images[i]\" alt=\"\"/>\r\n        </router-link>\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <div class=\"row\">\r\n          <div class=\"rentalObjectName align-items-center text-start\" style=\"display: flex;\">\r\n            <div>\r\n              <h1 class=\"display-6 me-1 card-title cut-text\">{{ reservation.rentalObject.name }}</h1>\r\n            </div>\r\n            <hr>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <p class=\"h4\" ><strong style=\"color:#008970;\">Date:</strong> {{  getDateSpan(reservation) }}</p>\r\n        </div>\r\n        <div class=\"row\">\r\n          <p class=\"h4\"><strong style=\"color:#008970;\">Profit:</strong> ${{\r\n              (calculateCancellationInstructorIncome(reservation)).toFixed(2) }}</p>\r\n        </div>\r\n        <div class=\"row mt-1\">\r\n          <p class=\"h3\" style=\"color:#e23c52;\">\r\n            <strong>\r\n              <font-awesome-icon icon=\"x\"></font-awesome-icon>&emsp;CANCELLED\r\n            </strong>\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-4 p-5 d-flex flex-grow-1 justify-content-center align-items-center\" style=\"height: 25vh;\">\r\n        <div style=\"width: 100%;\">\r\n          <div class=\"row\">\r\n            <button class=\"w-100 btn mb-2\" style=\"font-weight: 500; color: white;\" data-bs-toggle=\"modal\"\r\n                    :data-bs-target=\"'#clientProfile-'+reservation.id\">\r\n              Client Preview\r\n            </button>\r\n            <InstructorClientPreview :client=\"reservation.client\"\r\n                                     :reservationId=\"reservation.id\"/>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import axios from \"axios\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faX } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nlibrary.add(faX);\r\n\r\nimport InstructorClientPreview\r\n  from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorClientPreview\";\r\n\r\nexport default {\r\n  name: \"InstructorCancelledReservations\",\r\n  props: [\"reservations\", \"images\"],\r\n  components: {FontAwesomeIcon, InstructorClientPreview},\r\n  data() {\r\n    return {\r\n      // images: [],\r\n    }\r\n  },\r\n  methods: {\r\n    calculateCancellationInstructorIncome(reservation) {\r\n      let total = this.calculateTotal(reservation);\r\n      let cancellationPercentage = reservation.rentalObject.cancellationFee;\r\n      if(cancellationPercentage === 0) return 0;\r\n      let feeAmount = total/100 * cancellationPercentage;\r\n      let systemIncome = feeAmount/100 * reservation.income.fee;\r\n      return feeAmount - systemIncome;\r\n    },\r\n    setRentalIdAndType(reservation) {\r\n      this.$store.dispatch(\"rentalId\", reservation.rentalObject.id);\r\n      this.$store.dispatch(\"rentalType\", reservation.rentalObject.rentalObjectType);\r\n    },\r\n    getPath(reservation) {\r\n      return \"/fishingInstructor/Adventure/\" + reservation.rentalObject.id;\r\n    },\r\n    showAdventureProfile(id) {\r\n      return this.$router.push('/fishingInstructor/Adventure/' + id);\r\n    },\r\n    getDateSpan(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      // date1.setHours(0, 0, 0);\r\n      // date2.setHours(0, 0, 0);\r\n      let dateDisplay = date1.getDate() + '.' + (date1.getMonth() + 1) + '.' +  date1.getFullYear() + '.';\r\n      if(date1.getFullYear() !== date2.getFullYear() || date1.getMonth() !== date2.getMonth() || date1.getDate() !== date2.getDate())\r\n        dateDisplay += ' - ' + date2.getDate() + '.' + (date2.getMonth() + 1) + '.' +  date2.getFullYear() + '.';\r\n      return dateDisplay;\r\n    },\r\n    isFeeNull(reservation) {\r\n      return reservation.rentalObject.cancellationFee !== null;\r\n    },\r\n    calculateTotal(reservation) {\r\n      let days = this.getNumberOfDays(reservation);\r\n      let services = this.calculateAdditionalServices(reservation);\r\n      let price = reservation.price;\r\n      if(reservation.specialOffer !== null) {\r\n        console.log(((days*price)/100 * (100-reservation.specialOffer.discount)));\r\n        return (days*price)/100 * (100-reservation.specialOffer.discount);\r\n      }\r\n      return days*price+services;\r\n    },\r\n    getNumberOfDays(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      date1.setHours(0, 0, 0);\r\n      date2.setHours(0, 0, 0);\r\n      let timeDiff = date2.getTime() - date1.getTime();\r\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\r\n      return daysDiff + 1;\r\n    },\r\n    calculateAdditionalServices(reservation) {\r\n      let services = reservation.additionalServices, totalServices = 0;\r\n      for(let i=0; i<services.length; i++) totalServices += services[i].price;\r\n      return totalServices;\r\n    },\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nhr {\r\n  flex-grow: 1;\r\n}\r\n.cut-text {\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\ndiv.rentalObjectName {\r\n  display: flex;\r\n}\r\ndiv.reservation {\r\n  box-shadow: 0.1rem 0.1rem 0.4rem rgb(0 0 0 / 15%);\r\n  background-color: #ffffff;\r\n}\r\ndiv.reservation:hover {\r\n  padding: 3px;\r\n}\r\nimg.rentalPhoto {\r\n  height: 25vh;\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  object-fit: cover;\r\n  object-position: center;\r\n}\r\n.card {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: fit-content;\r\n  min-width: 0;\r\n  word-wrap: break-word;\r\n  background-color: #fff;\r\n  background-clip: border-box;\r\n  border: none;\r\n  box-shadow: 0 0.5rem 1rem rgb(0 0 0 / 15%);\r\n  border-radius: 1rem;\r\n}\r\n.card-header:first-child {\r\n  border-radius: calc(1rem - 1px) calc(1rem - 1px) 0 0;\r\n}\r\n.card-header {\r\n  position: relative;\r\n  padding: 2rem 2rem;\r\n  border-bottom: none;\r\n  background-color: inherit;\r\n  box-shadow: 0 0.125rem 0.25rem rgb(0 0 0 / 8%);\r\n  z-index: 2;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}