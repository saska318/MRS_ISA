{"ast":null,"code":"import { useStore } from \"vuex\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: \"IncomeRateChangeForm\",\n\n  data() {\n    return {\n      boatRate: {\n        value: 0,\n        feeType: null\n      },\n      adventureRate: {\n        value: 0,\n        feeType: null\n      },\n      houseRate: {\n        value: 0,\n        feeType: null\n      },\n      boatRateCorrect: true,\n      boatRateMessage: null,\n      adventureRateCorrect: true,\n      adventureRateMessage: null,\n      houseRateCorrect: true,\n      houseRateMessage: null\n    };\n  },\n\n  mounted() {\n    const store = useStore();\n    axios.get(\"/Profits/fees\", {\n      headers: {\n        Authorization: \"Bearer \" + store.state.access_token\n      }\n    }).then(response => {\n      const fees = response.data;\n      fees.forEach(fee => {\n        let result = fee.value;\n\n        if (fee.rentalObjectType === \"Boat\") {\n          this.boatRate.value = result;\n        } else if (fee.rentalObjectType === \"Adventure\") {\n          this.adventureRate.value = result;\n        } else {\n          this.houseRate.value = result;\n        }\n      });\n    });\n  },\n\n  computed: {\n    body() {\n      return [{\n        rentalObjectType: \"Boat\",\n        value: this.boatRate.value\n      }, {\n        rentalObjectType: \"Adventure\",\n        value: this.adventureRate.value\n      }, {\n        rentalObjectType: \"VacationRental\",\n        value: this.houseRate.value\n      }];\n    },\n\n    accessToken() {\n      return store.state.access_token;\n    }\n\n  },\n  methods: {\n    confirmed() {\n      this.checkAdventure();\n      this.checkBoat();\n      this.checkHouse();\n\n      if (this.boatRateCorrect && this.houseRateCorrect && this.adventureRateCorrect) {\n        const fees = this.body;\n        console.log(fees);\n        axios.post(\"/Profits/fees\", {\n          fees\n        }, {\n          headers: {\n            Authorization: \"Bearer \" + this.accessToken\n          }\n        }).then(() => {\n          this.$notify({\n            title: \"Income Rate Change Status\",\n            text: \"Income rate change was successful.\",\n            position: \"bottom right\",\n            type: \"success\"\n          });\n          this.$router.push({\n            name: \"AdminDashboard\"\n          });\n        }).catch(error => {\n          if (error.response.status === 400) {\n            this.$notify({\n              title: \"Bad Request\",\n              text: \"Data provided to the server was not valid!\",\n              type: \"warn\"\n            });\n          } else if (error.response.status === 500) {\n            this.$notify({\n              title: \"Internal Server Error\",\n              text: \"Something went wrong on the server! Please try again later...\",\n              type: \"error\"\n            });\n          }\n        });\n      }\n    },\n\n    checkAdventure() {\n      if (this.adventureRate.value < 0 || this.adventureRate.value > 100) {\n        this.adventureRateCorrect = false;\n        this.adventureRateMessage = \"Value must be between 0 and 100!\";\n      } else {\n        this.adventureRateCorrect = true;\n        this.adventureRateMessage = null;\n      }\n    },\n\n    checkBoat() {\n      if (this.boatRate.value < 0 || this.boatRate.value > 100) {\n        this.boatRateCorrect = false;\n        this.boatRateMessage = \"Value must be between 0 and 100!\";\n      } else {\n        this.boatRateCorrect = true;\n        this.boatRateMessage = null;\n      }\n    },\n\n    checkHouse() {\n      if (this.houseRate.value < 0 || this.houseRate.value > 100) {\n        this.houseRateCorrect = false;\n        this.houseRateMessage = \"Value must be between 0 and 100!\";\n      } else {\n        this.houseRateCorrect = true;\n        this.houseRateMessage = null;\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["useStore","axios","store","name","data","boatRate","value","feeType","adventureRate","houseRate","boatRateCorrect","boatRateMessage","adventureRateCorrect","adventureRateMessage","houseRateCorrect","houseRateMessage","mounted","get","headers","Authorization","state","access_token","then","response","fees","forEach","fee","result","rentalObjectType","computed","body","accessToken","methods","confirmed","checkAdventure","checkBoat","checkHouse","console","log","post","$notify","title","text","position","type","$router","push","catch","error","status"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\Administrator\\AdminPage\\components\\AdminMainViews\\AdminIncomeRateComponents\\IncomeRateChangeForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5\">\r\n      <form class=\"px-4 py-3 rounded content-center form\">\r\n        <div class=\"row\">\r\n          <div class=\"col-2\"></div>\r\n          <div class=\"col-8\">\r\n            <div class=\"form-text\">\r\n              <h3>Income Rate Settings</h3>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"boatRate\">Boat Reservation:</label>\r\n              <input type=\"number\" step=\"any\" min=\"0\" max=\"100\" v-model=\"boatRate.value\" id=\"boatRate\" class=\"form-control col-sm-auto col-lg-4\">\r\n              <p style=\"color:red\" v-if='!boatRateCorrect'>{{boatRateMessage}}</p>\r\n\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"adventureRate\">Adventure Reservation:</label>\r\n              <input type=\"number\" step=\"any\" min=\"0\" max=\"100\" v-model=\"adventureRate.value\" id=\"adventureRate\" class=\"form-control col-sm-auto col-lg-4\">\r\n              <p style=\"color:red\" v-if='!adventureRateCorrect'>{{adventureRateMessage}}</p>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"houseRate\">Vacation House Reservation:</label>\r\n              <input type=\"number\" step=\"any\" min=\"0\" max=\"100\" v-model=\"houseRate.value\" id=\"houseRate\" class=\"form-control col-sm-auto col-lg-4\">\r\n              <p style=\"color:red\" v-if='!houseRateCorrect'>{{houseRateMessage}}</p>\r\n            </div>\r\n            <div class=\"text-center pt-3\">\r\n              <button class=\"btn\" @click.prevent='confirmed'>\r\n                Confirm\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\"></div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div class=\"col-2\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {useStore} from \"vuex\";\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"IncomeRateChangeForm\",\r\n  data() {\r\n    return {\r\n      boatRate: {\r\n        value: 0,\r\n        feeType: null,\r\n      },\r\n      adventureRate: {\r\n        value: 0,\r\n        feeType: null,\r\n      },\r\n      houseRate: {\r\n        value: 0,\r\n        feeType: null,\r\n      },\r\n      boatRateCorrect: true,\r\n      boatRateMessage: null,\r\n      adventureRateCorrect: true,\r\n      adventureRateMessage: null,\r\n      houseRateCorrect: true,\r\n      houseRateMessage: null\r\n    }\r\n  },\r\n  mounted() {\r\n    const store = useStore();\r\n    axios.get(\"/Profits/fees\", {headers: {\r\n        Authorization: \"Bearer \" + store.state.access_token,\r\n      }}\r\n    ).then(response => {\r\n      const fees = response.data;\r\n      fees.forEach((fee) => {\r\n        let result = fee.value;\r\n        if (fee.rentalObjectType === \"Boat\") {\r\n          this.boatRate.value = result;\r\n        } else if (fee.rentalObjectType === \"Adventure\") {\r\n          this.adventureRate.value = result;\r\n        } else {\r\n          this.houseRate.value = result;\r\n        }\r\n      });\r\n    });\r\n  },\r\n  computed: {\r\n    body() {\r\n      return [\r\n        {\r\n          rentalObjectType: \"Boat\",\r\n          value: this.boatRate.value\r\n        },\r\n        {\r\n          rentalObjectType: \"Adventure\",\r\n          value: this.adventureRate.value\r\n        },\r\n        {\r\n          rentalObjectType: \"VacationRental\",\r\n          value: this.houseRate.value\r\n        }\r\n      ];\r\n    },\r\n    accessToken() {\r\n      return store.state.access_token;\r\n    }\r\n  },\r\n  methods: {\r\n    confirmed() {\r\n      this.checkAdventure();\r\n      this.checkBoat();\r\n      this.checkHouse();\r\n      if (this.boatRateCorrect && this.houseRateCorrect && this.adventureRateCorrect) {\r\n        const fees = this.body;\r\n        console.log(fees);\r\n        axios.post(\"/Profits/fees\", {fees}, {\r\n          headers: {\r\n            Authorization: \"Bearer \" + this.accessToken\r\n          }\r\n        })\r\n        .then(() => {\r\n          this.$notify({\r\n            title: \"Income Rate Change Status\",\r\n            text: \"Income rate change was successful.\",\r\n            position: \"bottom right\",\r\n            type: \"success\"\r\n          });\r\n          this.$router.push({name:\"AdminDashboard\"});\r\n        })\r\n        .catch((error) =>{\r\n          if (error.response.status===400) {\r\n            this.$notify({\r\n              title: \"Bad Request\",\r\n              text: \"Data provided to the server was not valid!\" ,\r\n              type: \"warn\"\r\n            })\r\n          } else if (error.response.status===500) {\r\n            this.$notify({\r\n              title: \"Internal Server Error\",\r\n              text: \"Something went wrong on the server! Please try again later...\",\r\n              type: \"error\"\r\n            })\r\n          }\r\n        });\r\n      }\r\n    },\r\n    checkAdventure() {\r\n      if (this.adventureRate.value < 0 || this.adventureRate.value > 100) {\r\n        this.adventureRateCorrect = false;\r\n        this.adventureRateMessage = \"Value must be between 0 and 100!\"\r\n      } else {\r\n        this.adventureRateCorrect = true;\r\n        this.adventureRateMessage = null;\r\n      }\r\n    },\r\n    checkBoat() {\r\n      if (this.boatRate.value < 0 || this.boatRate.value > 100) {\r\n        this.boatRateCorrect = false;\r\n        this.boatRateMessage = \"Value must be between 0 and 100!\"\r\n      } else {\r\n        this.boatRateCorrect = true;\r\n        this.boatRateMessage = null;\r\n      }\r\n    },\r\n    checkHouse() {\r\n      if (this.houseRate.value < 0 || this.houseRate.value > 100) {\r\n        this.houseRateCorrect = false;\r\n        this.houseRateMessage = \"Value must be between 0 and 100!\"\r\n      } else {\r\n        this.houseRateCorrect = true;\r\n        this.houseRateMessage = null;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\nh3 {\r\n  text-align: center;\r\n}\r\n\r\np {\r\n  color: #e23c52;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}