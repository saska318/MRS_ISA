{"ast":null,"code":"import axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: \"ReservationReport\",\n  props: [\"id\", \"resId\", \"reports\"],\n  components: {},\n\n  data() {\n    return {\n      complaintMissing: false,\n      isSaved: false,\n      saveButtonTxt: \"Save\",\n      closeButtonTxt: \"Cancel\",\n      newReport: {\n        reservationId: this.resId,\n        comment: null\n      }\n    };\n  },\n\n  mounted() {\n    this.newReport.comment = this.getReportComment; // console.log(this.resId+\".  \"+this.newReport.comment);\n  },\n\n  methods: {\n    save() {\n      this.newReport.comment = document.getElementById(\"insertReport\" + this.resId).value;\n      if (!this.saveChecks()) this.saveReport();\n    },\n\n    saveChecks() {\n      this.complaintMissing = false;\n      this.newReport.comment = document.getElementById(\"insertReport\" + this.resId).value;\n      if (this.newReport.comment === \"\") this.complaintMissing = true;\n      return this.complaintMissing;\n    },\n\n    saveReport() {\n      axios.post(\"/Reservations/addReport\", this.newReport, {\n        headers: {\n          Authorization: \"Bearer \" + this.accessToken\n        }\n      }).then(() => {\n        this.saveButtonTxt = \"Saved!\";\n        this.isSaved = true;\n        this.closeButtonTxt = \"Close\";\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"Invalid Status\",\n            text: \"Something went wrong. Try again later.\",\n            position: \"bottom right\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later...\",\n            position: \"bottom right\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  },\n  computed: {\n    accessToken() {\n      return store.state.access_token;\n    },\n\n    isReportPresent() {\n      for (let i = 0; i < this.reports.length; i++) if (this.reports[i].user === \"Client\") return true;\n\n      return false;\n    },\n\n    getReportComment() {\n      let comment = \"\";\n\n      for (let i = 0; i < this.reports.length; i++) if (this.reports[i].user === \"Client\") comment = this.reports[i].comment;\n\n      return comment;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","store","name","props","components","data","complaintMissing","isSaved","saveButtonTxt","closeButtonTxt","newReport","reservationId","resId","comment","mounted","getReportComment","methods","save","document","getElementById","value","saveChecks","saveReport","post","headers","Authorization","accessToken","then","catch","error","response","status","$notify","title","text","position","type","computed","state","access_token","isReportPresent","i","reports","length","user"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\Client\\ClientPage\\components\\ClientProfile\\ClientReservations\\ReservationReport.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"this.reports\" class=\"modal fade\" :id=\"'report-'+this.id\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header p-0 m-0\" style=\"border-bottom: none\">\r\n        </div>\r\n        <div class=\"modal-body pt-0 mt-0\">\r\n          <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n            <h1 class=\"modal-title pb-1\" style=\"color:#e23c52; font-weight: 700;\">Report</h1>\r\n          </div>\r\n          <div class=\"row d-flex justify-content-center\">\r\n            <img src=\"../../../../../Images/warn.png\" alt=\"\" style=\"height: 50%; width:50%;\"/>\r\n          </div>\r\n          <div>\r\n            <p class=\"h5 mt-3\">Please write your complaint in great detail.</p>\r\n          </div>\r\n\r\n<!--          <textarea id=\"complaint\" :value=\"isReportPresent ? getReportComment : '' \"-->\r\n<!--                    :disabled=\"isReportPresent || isSaved\"-->\r\n<!--                    rows=\"3\" placeholder=\"Leave a complaint here\" class=\"w-100 p-2 px-3\"-->\r\n<!--                    style=\"background-color: #e23c52; border-radius: 20px; resize: none;\" maxlength=\"1000\"></textarea>-->\r\n\r\n          <textarea v-if=\"isReportPresent\" id=\"reportExists\" :value=\"this.newReport.comment\" disabled\r\n                    rows=\"3\" placeholder=\"Leave a complaint here\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color: #e23c52; border-radius: 20px; resize: none;\" maxlength=\"1000\"></textarea>\r\n\r\n          <textarea v-if=\"!isReportPresent\" :id=\"'insertReport'+this.resId\" :content=\"this.newReport.comment\"\r\n                    :disabled=\"isSaved\" rows=\"3\" placeholder=\"Leave a complaint here\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color: #e23c52; border-radius: 20px; resize: none;\" maxlength=\"1000\"></textarea>\r\n\r\n          <div v-if=\"complaintMissing\" id=\"missingRentalGradeMessage\" class=\"row text-center\">\r\n            <p class=\"h6 mt-3\" style=\"color: #e23c52\"><strong>You must enter a complaint.</strong></p>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer d-flex\" style=\"border-top: none; justify-content: space-evenly;\">\r\n          <button v-if=\"!isReportPresent\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color: #e23c52; color: white; width: 40%\">{{ this.closeButtonTxt }}</button>\r\n          <button :disabled=\"this.isSaved\" v-if=\"!isReportPresent\" type=\"button\" class=\"btn btn-secondary\"\r\n                  style=\"color: white; width: 40%\" @click=\"save\">{{ this.saveButtonTxt }}\r\n          </button>\r\n          <button v-if=\"isReportPresent\" type=\"button\" class=\"btn btn-secondary w-100\" data-bs-dismiss=\"modal\"\r\n                  style=\"color: white;\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"ReservationReport\",\r\n  props: [\"id\", \"resId\", \"reports\"],\r\n  components: {},\r\n  data() {\r\n    return {\r\n      complaintMissing: false,\r\n      isSaved: false,\r\n      saveButtonTxt: \"Save\",\r\n      closeButtonTxt: \"Cancel\",\r\n      newReport: {\r\n        reservationId: this.resId,\r\n        comment: null,\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.newReport.comment =  this.getReportComment;\r\n    // console.log(this.resId+\".  \"+this.newReport.comment);\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.newReport.comment = document.getElementById(\"insertReport\"+this.resId).value;\r\n      if(!this.saveChecks()) this.saveReport();\r\n    },\r\n    saveChecks() {\r\n      this.complaintMissing = false;\r\n      this.newReport.comment = document.getElementById(\"insertReport\"+this.resId).value;\r\n      if(this.newReport.comment === \"\") this.complaintMissing = true;\r\n      return this.complaintMissing;\r\n    },\r\n    saveReport() {\r\n      axios.post(\"/Reservations/addReport\", this.newReport, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.accessToken,\r\n        }\r\n      })\r\n      .then(() => {\r\n        this.saveButtonTxt = \"Saved!\";\r\n        this.isSaved = true;\r\n        this.closeButtonTxt = \"Close\";\r\n      })\r\n      .catch(error => {\r\n        if (error.response.status === 404) {\r\n          this.$notify({\r\n            title: \"Invalid Status\",\r\n            text: \"Something went wrong. Try again later.\",\r\n            position: \"bottom right\",\r\n            type: \"warn\"\r\n          })\r\n        } else if (error.response.status === 500) {\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text: \"Something went wrong on the server! Please try again later...\",\r\n            position: \"bottom right\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n\r\n    },\r\n  },\r\n  computed: {\r\n    accessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    isReportPresent() {\r\n      for(let i=0; i<this.reports.length; i++)\r\n        if(this.reports[i].user === \"Client\") return true;\r\n      return false;\r\n    },\r\n    getReportComment() {\r\n      let comment = \"\";\r\n      for(let i=0; i<this.reports.length; i++)\r\n        if(this.reports[i].user === \"Client\") comment = this.reports[i].comment;\r\n      return comment;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntextarea {\r\n  color: white;\r\n  font-style: italic;\r\n  font-weight: 500;\r\n  text-align: justify;\r\n}\r\n\r\ntextarea::placeholder {\r\n  color: white;\r\n  font-weight: 400;\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: #008970;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}