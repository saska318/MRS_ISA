{"ast":null,"code":"import StarRating from \"vue-star-rating\";\nimport store from \"@/store\";\nimport axios from \"axios/index\";\nexport default {\n  name: \"InstructorReservationReview\",\n  props: [\"id\", \"reviews\", \"resId\"],\n  components: {\n    StarRating\n  },\n\n  data() {\n    return {\n      isSaved: false,\n      saveButtonTxt: \"Save\",\n      closeButtonTxt: \"Cancel\",\n      clientGradeMissing: false,\n      reservationCommentMissing: false,\n      // newPlaceholder: \"No comment.\",\n      newReviews: {\n        reservationId: this.resId,\n        clientReview: {\n          grade: null,\n          comment: null\n        }\n      }\n    };\n  },\n\n  mounted() {\n    this.newReviews.clientReview.comment = this.getComment;\n  },\n\n  methods: {\n    save() {\n      this.newReviews.clientReview.comment = document.getElementById(\"insertReservationComment-\" + this.resId).value;\n      if (!this.saveChecks()) this.saveReview();\n    },\n\n    saveChecks() {\n      this.clientGradeMissing = false;\n      this.reservationCommentMissing = false;\n      if (this.newReviews.clientReview.grade === null) this.clientGradeMissing = true;\n      if (this.newReviews.clientReview.comment === \"\") this.reservationCommentMissing = true;\n      return this.clientGradeMissing || this.reservationCommentMissing;\n    },\n\n    saveReview() {\n      axios.post(\"/Reservations/addInstructorReview\", this.newReviews, {\n        headers: {\n          Authorization: \"Bearer \" + this.accessToken\n        }\n      }).then(() => {\n        this.saveButtonTxt = \"Saved!\";\n        this.isSaved = true;\n        this.closeButtonTxt = \"Close\";\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"Invalid Status\",\n            text: \"Something went wrong. Try again later.\",\n            position: \"bottom right\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later...\",\n            position: \"bottom right\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  },\n  computed: {\n    accessToken() {\n      return store.state.access_token;\n    },\n\n    isReviewPresent() {\n      for (let i = 0; i < this.reviews.length; i++) if (this.reviews[i].reviewType === \"ClientReview\") return true;\n\n      return false;\n    },\n\n    getClientGrade() {\n      let grade = 0;\n\n      for (let i = 0; i < this.reviews.length; i++) if (this.reviews[i].reviewType === \"ClientReview\") grade = this.reviews[i].grade;\n\n      return grade;\n    },\n\n    getComment() {\n      let comment = \"\";\n\n      for (let i = 0; i < this.reviews.length; i++) if (this.reviews[i].reviewType === \"ClientReview\") comment = this.reviews[i].comment;\n\n      return comment;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["StarRating","store","axios","name","props","components","data","isSaved","saveButtonTxt","closeButtonTxt","clientGradeMissing","reservationCommentMissing","newReviews","reservationId","resId","clientReview","grade","comment","mounted","getComment","methods","save","document","getElementById","value","saveChecks","saveReview","post","headers","Authorization","accessToken","then","catch","error","response","status","$notify","title","text","position","type","computed","state","access_token","isReviewPresent","i","reviews","length","reviewType","getClientGrade"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\FishingInstructor\\FishingInstructorPage\\components\\InstructorMainViews\\InstructorReservations\\InstructorReservationReview.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"this.reviews\" class=\"modal fade\" :id=\"'review-'+this.resId\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header p-0 m-0\" style=\"border-bottom: none\">\r\n        </div>\r\n        <div class=\"modal-body pt-0 mt-0\">\r\n          <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n            <h1 class=\"modal-title pb-1\" style=\"color:#ffd055; font-weight: 700;\">Reviews</h1>\r\n          </div>\r\n          <div>\r\n            <p class=\"h5 mt-3\">What did you think about the client?</p>\r\n          </div>\r\n          <div class=\"row my-0 py-0 my-3\" >\r\n            <div class=\"col-12 d-flex justify-content-center align-items-center\">\r\n              <star-rating text-class=\"h1 my-0 font-weight-normal\" :round-start-rating=\"false\"\r\n                           :glow=\"5\" glow-color=\"#ffd055\" :star-size=\"50\"\r\n                           :read-only=\"isReviewPresent || isSaved\"\r\n                           :rating=\"getClientGrade\"\r\n                           v-model:rating=\"this.newReviews.clientReview.grade\"></star-rating>\r\n            </div>\r\n            <div v-if=\"clientGradeMissing\" id=\"missingGradeMessage\" class=\"row text-center\">\r\n              <p class=\"h6 mt-3\" style=\"color: #e23c52\"><strong>You must select a grade.</strong></p>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <p class=\"h5 mt-3 mb-3\">Write details and overview about this reservation:</p>\r\n          </div>\r\n\r\n          <textarea id=\"ownerCommentExists\" v-if=\"isReviewPresent\"\r\n                    :value=\"this.newReviews.clientReview.comment\" disabled\r\n                    rows=\"3\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color:#ffd055; border-radius: 20px; resize: none;\" maxlength=\"1000\" ></textarea>\r\n\r\n          <textarea :id=\"'insertReservationComment-'+this.resId\" v-if=\"!isReviewPresent\"\r\n                    :content=\"this.newReviews.clientReview.comment\" :disabled=\"isSaved\"\r\n                    rows=\"3\" placeholder=\"Leave a review here\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color:#ffd055; border-radius: 20px; resize: none;\" maxlength=\"1000\" ></textarea>\r\n\r\n          <div v-if=\"reservationCommentMissing\" id=\"missingCommentMessage\" class=\"row text-center\">\r\n            <p class=\"h6 mt-3\" style=\"color: #e23c52\"><strong>You must enter reservation overview.</strong></p>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer d-flex\" style=\"border-top: none; justify-content: space-evenly\">\r\n          <button v-if=\"!isReviewPresent\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color: #e23c52; color: white; width: 40%\">{{ this.closeButtonTxt }}</button>\r\n          <button :disabled=\"this.isSaved\" v-if=\"!isReviewPresent\" type=\"button\" class=\"btn btn-secondary\"\r\n                  style=\"color: white; width: 40%\" @click=\"save\">{{ this.saveButtonTxt }}\r\n          </button>\r\n          <button v-if=\"isReviewPresent\" type=\"button\" class=\"btn btn-secondary w-100\" data-bs-dismiss=\"modal\"\r\n                  style=\"color: white;\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StarRating from \"vue-star-rating\";\r\n\r\nimport store from \"@/store\";\r\nimport axios from \"axios/index\";\r\n\r\nexport default {\r\n  name: \"InstructorReservationReview\",\r\n  props: [\"id\", \"reviews\", \"resId\"],\r\n  components: {StarRating},\r\n  data() {\r\n    return {\r\n      isSaved: false,\r\n      saveButtonTxt: \"Save\",\r\n      closeButtonTxt: \"Cancel\",\r\n      clientGradeMissing: false,\r\n      reservationCommentMissing: false,\r\n      // newPlaceholder: \"No comment.\",\r\n      newReviews: {\r\n        reservationId: this.resId,\r\n        clientReview: {\r\n          grade: null,\r\n          comment: null,\r\n        },\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.newReviews.clientReview.comment = this.getComment;\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.newReviews.clientReview.comment = document.getElementById(\"insertReservationComment-\"+this.resId).value;\r\n      if(!this.saveChecks()) this.saveReview();\r\n    },\r\n    saveChecks() {\r\n      this.clientGradeMissing = false;\r\n      this.reservationCommentMissing = false;\r\n      if(this.newReviews.clientReview.grade === null) this.clientGradeMissing = true;\r\n      if(this.newReviews.clientReview.comment === \"\") this.reservationCommentMissing = true;\r\n      return this.clientGradeMissing || this.reservationCommentMissing;\r\n    },\r\n    saveReview() {\r\n      axios.post(\"/Reservations/addInstructorReview\", this.newReviews, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.accessToken,\r\n        }\r\n      })\r\n          .then(() => {\r\n            this.saveButtonTxt = \"Saved!\";\r\n            this.isSaved = true;\r\n            this.closeButtonTxt = \"Close\";\r\n          })\r\n          .catch(error => {\r\n            if (error.response.status === 404) {\r\n              this.$notify({\r\n                title: \"Invalid Status\",\r\n                text: \"Something went wrong. Try again later.\",\r\n                position: \"bottom right\",\r\n                type: \"warn\"\r\n              })\r\n            } else if (error.response.status === 500) {\r\n              this.$notify({\r\n                title: \"Internal Server Error\",\r\n                text: \"Something went wrong on the server! Please try again later...\",\r\n                position: \"bottom right\",\r\n                type: \"error\"\r\n              })\r\n            }\r\n          })\r\n    },\r\n  },\r\n  computed: {\r\n    accessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    isReviewPresent() {\r\n      for(let i=0; i<this.reviews.length; i++)\r\n        if(this.reviews[i].reviewType === \"ClientReview\") return true;\r\n      return false;\r\n    },\r\n    getClientGrade() {\r\n      let grade = 0;\r\n      for(let i=0; i<this.reviews.length; i++)\r\n        if(this.reviews[i].reviewType === \"ClientReview\") grade = this.reviews[i].grade;\r\n      return grade;\r\n    },\r\n    getComment() {\r\n      let comment = \"\";\r\n      for(let i=0; i<this.reviews.length; i++)\r\n        if(this.reviews[i].reviewType === \"ClientReview\") comment = this.reviews[i].comment;\r\n      return comment;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntextarea {\r\n  color: white;\r\n  font-style: italic;\r\n  font-weight: 500;\r\n  text-align: justify;\r\n}\r\n\r\ntextarea::placeholder {\r\n  color: white;\r\n  font-weight: 400;\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: #008970;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}