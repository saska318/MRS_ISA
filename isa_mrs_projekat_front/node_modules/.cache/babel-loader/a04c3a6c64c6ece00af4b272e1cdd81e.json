{"ast":null,"code":"import { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faPlusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios\";\nimport { toggleProcessing } from \"@/components/state\";\nlibrary.add(faPlusCircle);\nexport default {\n  name: \"LoyaltyCategoryCreationPage\",\n  components: {\n    FontAwesomeIcon\n  },\n\n  data() {\n    return {\n      category: {\n        name: null,\n        requiredPoints: null,\n        clientDiscount: null,\n        ownerBenefit: null,\n        icon: null\n      },\n      nameIsEntered: true,\n      pointsAreEntered: true,\n      discountIsEntered: true,\n      bonusIsEntered: true,\n      imageUrl: null,\n      photoIsEntered: true,\n      photo: null\n    };\n  },\n\n  methods: {\n    addPhoto(e) {\n      this.photo = e.target.files[0];\n      this.imageUrl = URL.createObjectURL(this.photo);\n      this.photoIsEntered = true;\n    },\n\n    submit() {\n      if (this.isDataEntered()) {\n        toggleProcessing();\n        let category = this.category;\n        axios.post(\"/LoyaltyProgram/addCategory\", category, {\n          headers: {\n            Authorization: \"Bearer \" + this.$store.getters.access_token\n          }\n        }).then(category => {\n          let formData = new FormData();\n          formData.append(\"file\", this.photo);\n          axios.post(\"/Photos/upload\", formData, {\n            headers: {\n              Authorization: \"Bearer \" + this.$store.getters.access_token,\n              \"Content-type\": \"multipart/form-data\"\n            }\n          }).then(response => {\n            let dto = {\n              id: category.data.id,\n              photos: [response.data]\n            };\n            axios.post(\"/LoyaltyProgram/connectPhotoToCategory\", dto, {\n              headers: {\n                Authorization: \"Bearer \" + this.$store.getters.access_token\n              }\n            }).then(() => {\n              this.$notify({\n                title: \"Successful adding\",\n                text: \"You have successfully added a new category.\",\n                position: \"bottom right\",\n                type: \"success\"\n              });\n              toggleProcessing();\n            });\n          });\n        }).catch(error => {\n          if (!error.response) {\n            this.$notify({\n              title: \"Server error\",\n              text: \"Server is currently off. Please try again later...\",\n              type: \"error\"\n            });\n          } else if (error.response.status === 500) {\n            this.$notify({\n              title: \"Internal Server Error\",\n              text: \"Something went wrong on the server! Please try again later...\",\n              position: \"bottom right\",\n              type: \"error\"\n            });\n          }\n\n          toggleProcessing();\n        });\n      }\n    },\n\n    isDataEntered() {\n      if (this.category.name === null) {\n        this.nameIsEntered = false;\n        return false;\n      }\n\n      if (this.category.requiredPoints === null) {\n        this.pointsAreEntered = false;\n        return false;\n      }\n\n      if (this.category.clientDiscount === null) {\n        this.discountIsEntered = false;\n        return false;\n      }\n\n      if (this.category.ownerBenefit === null) {\n        this.bonusIsEntered = false;\n        return false;\n      }\n\n      if (this.photo === null) {\n        this.photoIsEntered = false;\n        return false;\n      }\n\n      return true;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["FontAwesomeIcon","library","faPlusCircle","axios","toggleProcessing","add","name","components","data","category","requiredPoints","clientDiscount","ownerBenefit","icon","nameIsEntered","pointsAreEntered","discountIsEntered","bonusIsEntered","imageUrl","photoIsEntered","photo","methods","addPhoto","e","target","files","URL","createObjectURL","submit","isDataEntered","post","headers","Authorization","$store","getters","access_token","then","formData","FormData","append","response","dto","id","photos","$notify","title","text","position","type","catch","error","status"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\Administrator\\AdminPage\\components\\AdminMainViews\\AdminLoyaltyProgramComponents\\LoyaltyCategoryCreationPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5 mb-5\">\r\n      <div class=\"container px-4 py-3 rounded form\" spellcheck=\"false\" >\r\n        <div class=\"container-fluid\">\r\n          <h3>User Category</h3>\r\n          <div class=\"row main justify-content-center\">\r\n            <div class=\"row main\">\r\n              <div class=\"col-2\"></div>\r\n              <div class=\"col-8\">\r\n\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"name\">Name</label>\r\n                  </div>\r\n                  <input class=\"form-control\" v-model=\"category.name\" type=\"text\" id=\"name\" placeholder=\"E.g. Category\" @input=\"nameIsEntered=true\">\r\n                  <p v-if='!nameIsEntered'>'Name' is a mandatory field.</p>\r\n                </div>\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"price\">Required Points</label>\r\n                  </div>\r\n                  <input v-model=\"category.requiredPoints\" type=\"number\" step=\"any\" min=\"0\"  id=\"price\" class=\"form-control\" placeholder=\"Number of required points\" @input=\"pointsAreEntered=true\">\r\n                  <p v-if='!pointsAreEntered'>'Required Points' is a mandatory field.</p>\r\n                </div>\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"client\">Client Discount</label>\r\n                  </div>\r\n                  <input v-model=\"category.clientDiscount\" type=\"number\" step=\"any\" min=\"0\" max=\"100\"  id=\"client\" class=\"form-control\" placeholder=\"Client's discount in %\" @input=\"discountIsEntered=true\">\r\n                  <p v-if='!discountIsEntered'>'Client Discount' is a mandatory field.</p>\r\n                </div>\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"owner\">Owner Bonus</label>\r\n                  </div>\r\n                  <input v-model=\"category.ownerBenefit\" type=\"number\" step=\"any\" min=\"0\" max=\"100\"  id=\"owner\" class=\"form-control\" placeholder=\"Owner's bonus in %\" @input=\"bonusIsEntered=true\">\r\n                  <p v-if='!bonusIsEntered'>'Owner Bonus' is a mandatory field.</p>\r\n                </div>\r\n\r\n                <div class=\"row justify-content-center mt-4\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"imageInput\">Icon</label>\r\n                    <p v-if='!photoIsEntered'>Icon is mandatory.</p>\r\n                  </div>\r\n                  <div class=\"row p-0 justify-content-center\" id=\"imageInput\" style=\"max-width: 400px;min-width: 120px\">\r\n                    <label class=\"imageUploadLabel text-center rounded m-1\" style=\"background-color:white;display: table;width: 50px;height: 50px;border: 1px solid #008970;cursor: pointer\">\r\n                      <span style=\"display:table-cell; vertical-align: middle\">\r\n                        <font-awesome-icon class=\"rounded-circle\" icon=\"plus-circle\" style=\"color: #008970; background-color: transparent;height: 50px\"></font-awesome-icon>\r\n                        <input class=\"upload-button\" type=\"file\" accept=\"image/jpeg\" ref=\"photo\" @change=\"addPhoto\">\r\n                      </span>\r\n                    </label>\r\n                    <div v-if=\"imageUrl!==null&&imageUrl!==undefined\" class=\"m-1 rounded\" style=\"width:50px;height:50px;border: 1px solid #008970;background-color: lightgray;position: relative;text-align: center\">\r\n                      <img :src=\"imageUrl\" alt=\"\" style=\"width:100%; height:100%; object-fit: contain;\">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div class=\"col-2\"></div>\r\n            </div>\r\n          </div>\r\n          <div class=\"d-flex pt-3 justify-content-center\">\r\n            <router-link to=\"/admin/loyaltyProgram\" class=\"btn btn-red mt-3 me-1\">Cancel</router-link>\r\n            <button type=\"button\" class=\"btn mt-3\" @click=\"submit\">Submit</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-2\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\r\nimport {faPlusCircle} from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios\";\r\nimport {toggleProcessing} from \"@/components/state\";\r\n\r\nlibrary.add(faPlusCircle);\r\n\r\nexport default {\r\n  name: \"LoyaltyCategoryCreationPage\",\r\n  components: {FontAwesomeIcon},\r\n  data() {\r\n    return {\r\n      category: {\r\n        name: null,\r\n        requiredPoints: null,\r\n        clientDiscount: null,\r\n        ownerBenefit: null,\r\n        icon: null\r\n      },\r\n      nameIsEntered: true,\r\n      pointsAreEntered: true,\r\n      discountIsEntered: true,\r\n      bonusIsEntered: true,\r\n      imageUrl: null,\r\n      photoIsEntered: true,\r\n      photo: null\r\n    }\r\n  },\r\n  methods: {\r\n    addPhoto(e) {\r\n      this.photo = e.target.files[0];\r\n      this.imageUrl = URL.createObjectURL(this.photo);\r\n      this.photoIsEntered = true;\r\n    },\r\n    submit() {\r\n      if (this.isDataEntered()) {\r\n        toggleProcessing();\r\n        let category = this.category\r\n        axios.post(\"/LoyaltyProgram/addCategory\", category, {\r\n          headers: {\r\n            Authorization: \"Bearer \" + this.$store.getters.access_token,\r\n          }\r\n        })\r\n        .then((category) => {\r\n            let formData = new FormData();\r\n            formData.append(\"file\", this.photo);\r\n            axios.post(\"/Photos/upload\", formData, {\r\n              headers: {\r\n                Authorization: \"Bearer \" + this.$store.getters.access_token,\r\n                \"Content-type\": \"multipart/form-data\"\r\n              },\r\n            })\r\n            .then((response) => {\r\n              let dto = {id: category.data.id, photos: [response.data]}\r\n              axios.post(\"/LoyaltyProgram/connectPhotoToCategory\", dto,{\r\n                headers: {\r\n                  Authorization: \"Bearer \" + this.$store.getters.access_token,\r\n                },\r\n              }).then(() =>{\r\n                this.$notify( {\r\n                  title: \"Successful adding\",\r\n                  text: \"You have successfully added a new category.\",\r\n                  position: \"bottom right\",\r\n                  type: \"success\"\r\n                });\r\n                toggleProcessing();\r\n              })\r\n            })\r\n          }\r\n        )\r\n        .catch(error => {\r\n          if (!error.response) {\r\n            this.$notify({\r\n              title: \"Server error\",\r\n              text: \"Server is currently off. Please try again later...\",\r\n              type: \"error\"\r\n            });\r\n          } else if (error.response.status === 500) {\r\n            this.$notify({\r\n              title: \"Internal Server Error\",\r\n              text: \"Something went wrong on the server! Please try again later...\",\r\n              position: \"bottom right\",\r\n              type: \"error\"\r\n            })\r\n          }\r\n          toggleProcessing();\r\n        })\r\n      }\r\n    },\r\n    isDataEntered() {\r\n      if (this.category.name === null) {\r\n        this.nameIsEntered = false;\r\n        return false;\r\n      }\r\n      if (this.category.requiredPoints === null) {\r\n        this.pointsAreEntered = false;\r\n        return false\r\n      }\r\n      if (this.category.clientDiscount === null) {\r\n        this.discountIsEntered = false;\r\n        return false\r\n      }\r\n      if (this.category.ownerBenefit === null) {\r\n        this.bonusIsEntered = false;\r\n        return false\r\n      }\r\n      if (this.photo === null) {\r\n        this.photoIsEntered = false;\r\n        return false\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.upload-button {\r\n  display: none;\r\n}\r\n\r\nlabel, small {\r\n  max-width: 400px;\r\n}\r\n\r\ninput {\r\n  max-width: 400px;\r\n}\r\n\r\ninput::placeholder {\r\n  color: grey;\r\n}\r\n\r\nh3 {\r\n  text-align: center;\r\n}\r\n\r\nh4 {\r\n  text-align: center;\r\n}\r\n\r\np {\r\n  color: #e23c52;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}