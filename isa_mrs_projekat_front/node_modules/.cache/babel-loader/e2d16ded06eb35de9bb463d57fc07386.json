{"ast":null,"code":"import ImageSlider from \"@/components/UnregisteredUser/components/Rental/ImageSlider\";\nimport RentalDescription from \"@/components/UnregisteredUser/components/Rental/RentalDescription\";\nimport RentalTags from \"@/components/UnregisteredUser/components/Rental/RentalTags\";\nimport RentalAddress from \"@/components/UnregisteredUser/components/Rental/RentalAddress\";\nimport RentalRules from \"@/components/UnregisteredUser/components/Rental/RentalRules\";\nimport StarRating from 'vue-star-rating';\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faBed, faCircleCheck, faCircleXmark, faClock, faDoorOpen, faLocationDot, faUser, faUserTie, faPencil, faTrash, faTag, faBookmark } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios/index\";\nimport { useStore } from \"vuex\";\nimport store from \"@/store\";\nimport RentalSpecialOffers from \"@/components/UnregisteredUser/components/Rental/RentalSpecialOffers\";\nlibrary.add(faUser, faDoorOpen, faBed, faClock, faLocationDot, faCircleCheck, faCircleXmark, faUserTie, faPencil, faTrash, faTag, faBookmark);\nexport default {\n  name: \"RentalProfile\",\n  components: {\n    RentalSpecialOffers,\n    RentalRules,\n    RentalAddress,\n    RentalTags,\n    RentalDescription,\n    ImageSlider,\n    FontAwesomeIcon,\n    StarRating\n  },\n\n  data() {\n    return {\n      rentalObject: null,\n      currentPage: 0,\n      totalPages: null,\n      pageSize: 6,\n      images: [],\n      bedsPerRoom: null\n    };\n  },\n\n  computed: {\n    clientCantReserve() {\n      return this.rentalObject.penalties === 3;\n    },\n\n    ownerOrInstructor() {\n      if (this.rentalObject.rentalObjectType === \"Adventure\") return \"Instructor\";\n      return \"Owner\";\n    },\n\n    isOwner() {\n      return this.$store.getters.user === \"fishingInstructor\";\n    },\n\n    isVacationRentalOwner() {\n      return this.$store.getters.user === \"vacationRentalOwner\";\n    },\n\n    isBoatOwner() {\n      return this.$store.getters.user === \"boatOwner\";\n    },\n\n    buttonText() {\n      return this.isUserSubscribed ? \"Subscribed!\" : \"Subscribe\";\n    },\n\n    reviews() {\n      return this.rentalObject.reviews.content;\n    },\n\n    getNumberOfRooms() {\n      return this.rentalObject.rooms.length;\n    },\n\n    getNumberOfBeds() {\n      let beds = 0;\n      this.rentalObject.rooms.forEach(room => {\n        beds += room.beds;\n      });\n      return beds;\n    },\n\n    doesRentalHavePhotos() {\n      return this.rentalObject.photos.length > 0;\n    },\n\n    isUserSubscribed() {\n      return this.rentalObject.isUserSubscribed;\n    },\n\n    showSubscriptionArea() {\n      return this.$store.getters.user === \"client\";\n    },\n\n    isVacationRental() {\n      return this.rentalObject.rentalObjectType === \"VacationRental\";\n    },\n\n    isBoat() {\n      return this.rentalObject.rentalObjectType === \"Boat\";\n    },\n\n    isAdventure() {\n      return this.rentalObject.rentalObjectType === \"Adventure\";\n    },\n\n    getOwnerFullName() {\n      return this.rentalObject.rentalObjectOwner.name + \" \" + this.rentalObject.rentalObjectOwner.surname;\n    },\n\n    getAccessToken() {\n      return store.state.access_token;\n    },\n\n    rentalHasReviews() {\n      return this.reviews.length > 0;\n    },\n\n    button1Content() {\n      return this.currentPage === 0 ? this.currentPage + 1 : this.totalPages - this.currentPage === 1 ? this.currentPage - 1 : this.currentPage;\n    },\n\n    button2Content() {\n      return this.currentPage === 0 ? this.currentPage + 2 : this.totalPages - this.currentPage === 1 ? this.currentPage : this.currentPage + 1;\n    },\n\n    button3Content() {\n      return this.currentPage === 0 ? this.currentPage + 3 : this.totalPages - this.currentPage === 1 ? this.currentPage + 1 : this.currentPage + 2;\n    }\n\n  },\n\n  mounted() {\n    const store = useStore();\n\n    if (this.$route.params.type === \"Boat\") {\n      axios.get(\"/RentalObjects/getBoat\", {\n        headers: {\n          Authorization: \"Bearer \" + store.state.access_token\n        },\n        params: {\n          id: this.$route.params.id,\n          page: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(response => {\n        this.rentalObject = response.data;\n        this.currentPage = this.rentalObject.reviews.currentPage;\n        this.totalPages = this.rentalObject.reviews.pages;\n        this.getReviewPics();\n      });\n    } else if (this.$route.params.type === \"Adventure\") {\n      axios.get(\"/RentalObjects/getAdventure\", {\n        headers: {\n          Authorization: \"Bearer \" + store.state.access_token\n        },\n        params: {\n          id: this.$route.params.id,\n          page: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(response => {\n        this.rentalObject = response.data;\n        this.currentPage = this.rentalObject.reviews.currentPage;\n        this.totalPages = this.rentalObject.reviews.pages;\n        this.getReviewPics();\n      });\n    } else {\n      axios.get(\"/RentalObjects/getVacationRental\", {\n        headers: {\n          Authorization: \"Bearer \" + store.state.access_token\n        },\n        params: {\n          id: this.$route.params.id,\n          page: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(response => {\n        this.rentalObject = response.data;\n        this.currentPage = this.rentalObject.reviews.currentPage;\n        this.totalPages = this.rentalObject.reviews.pages;\n        this.getReviewPics();\n        this.numOfBedsPerRoom();\n      });\n    }\n  },\n\n  methods: {\n    numOfBedsPerRoom() {\n      let result = \"Beds per room: \";\n\n      for (let i = 0; i < this.rentalObject.rooms.length; i++) {\n        result += this.rentalObject.rooms[i].beds;\n        if (i === this.rentalObject.rooms.length - 1) break;\n        result += \" + \";\n      }\n\n      this.bedsPerRoom = result;\n    },\n\n    getReviewPics() {\n      this.images = [];\n      let revs = this.rentalObject.reviews.content;\n\n      for (let i = 0; i < revs.length; i++) {\n        if (!revs[i].author.photo) {\n          this.images[i] = null;\n          continue;\n        }\n\n        axios.get(\"/Photos/\", {\n          headers: {\n            Authorization: \"Bearer \" + this.$store.getters.access_token\n          },\n          params: {\n            path: revs[i].author.photo\n          },\n          responseType: \"blob\"\n        }).then(response => {\n          this.images[i] = URL.createObjectURL(response.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n\n    reloadReviews() {\n      if (this.$route.params.type === \"Boat\") {\n        axios.get(\"/RentalObjects/getBoat\", {\n          headers: {\n            Authorization: \"Bearer \" + this.$store.getters.access_token\n          },\n          params: {\n            id: this.$route.params.id,\n            page: this.currentPage,\n            pageSize: this.pageSize\n          }\n        }).then(response => {\n          this.rentalObject = response.data;\n          this.currentPage = this.rentalObject.reviews.currentPage;\n          this.totalPages = this.rentalObject.reviews.pages;\n          this.getReviewPics();\n        });\n      } else if (this.$route.params.type === \"Adventure\") {\n        axios.get(\"/RentalObjects/getAdventure\", {\n          headers: {\n            Authorization: \"Bearer \" + this.$store.getters.access_token\n          },\n          params: {\n            id: this.$route.params.id,\n            page: this.currentPage,\n            pageSize: this.pageSize\n          }\n        }).then(response => {\n          this.rentalObject = response.data;\n          this.currentPage = this.rentalObject.reviews.currentPage;\n          this.totalPages = this.rentalObject.reviews.pages;\n          this.getReviewPics();\n        });\n      } else {\n        axios.get(\"/RentalObjects/getVacationRental\", {\n          headers: {\n            Authorization: \"Bearer \" + this.$store.getters.access_token\n          },\n          params: {\n            id: this.$route.params.id,\n            page: this.currentPage,\n            pageSize: this.pageSize\n          }\n        }).then(response => {\n          this.rentalObject = response.data;\n          this.currentPage = this.rentalObject.reviews.currentPage;\n          this.totalPages = this.rentalObject.reviews.pages;\n          this.getReviewPics();\n        });\n      }\n    },\n\n    subscribe() {\n      axios.post(\"/RentalObjects/subscribe\", {\n        rentalId: this.rentalObject.id\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + this.getAccessToken\n        }\n      }).then(() => {\n        this.rentalObject.isUserSubscribed = true;\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"Invalid Request Status\",\n            text: \"Something went wrong. Try again later.\",\n            position: \"bottom right\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later...\",\n            position: \"bottom right\",\n            type: \"error\"\n          });\n        }\n      });\n    },\n\n    getEquipment(equipment) {\n      let printEquipment = \"\";\n      const collectionSize = equipment.length;\n\n      for (let i = 0; i < collectionSize; i++) {\n        printEquipment += equipment[i].name;\n        if (i === collectionSize - 1) break;\n        printEquipment += \", \";\n      }\n\n      if (printEquipment === \"\") return \"No equipment included.\";\n      return printEquipment;\n    },\n\n    formatTimeStamp(time) {\n      return time.slice(0, -3);\n    },\n\n    getAuthorFullName(review) {\n      return review.author.name + \" \" + review.author.surname;\n    },\n\n    formatReviewDate(reviewTime) {\n      let date = new Date(reviewTime);\n      return date.getDate() + '.' + (date.getMonth() + 1) + '.' + date.getFullYear() + '. at ' + date.getHours() + ':' + ((date.getMinutes() < 10 ? '0' : '') + date.getMinutes());\n    },\n\n    nextPage() {\n      this.currentPage += 1;\n      this.reloadReviews();\n    },\n\n    previousPage() {\n      this.currentPage -= 1;\n      this.reloadReviews();\n    },\n\n    numberedPage(buttonNumber) {\n      if (buttonNumber === 1) {\n        this.currentPage = this.button1Content - 1;\n      } else if (buttonNumber === 2) {\n        this.currentPage = this.button2Content - 1;\n      } else if (buttonNumber === 3) {\n        this.currentPage = this.button3Content - 1;\n      }\n\n      this.reloadReviews();\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ImageSlider","RentalDescription","RentalTags","RentalAddress","RentalRules","StarRating","FontAwesomeIcon","library","faBed","faCircleCheck","faCircleXmark","faClock","faDoorOpen","faLocationDot","faUser","faUserTie","faPencil","faTrash","faTag","faBookmark","axios","useStore","store","RentalSpecialOffers","add","name","components","data","rentalObject","currentPage","totalPages","pageSize","images","bedsPerRoom","computed","clientCantReserve","penalties","ownerOrInstructor","rentalObjectType","isOwner","$store","getters","user","isVacationRentalOwner","isBoatOwner","buttonText","isUserSubscribed","reviews","content","getNumberOfRooms","rooms","length","getNumberOfBeds","beds","forEach","room","doesRentalHavePhotos","photos","showSubscriptionArea","isVacationRental","isBoat","isAdventure","getOwnerFullName","rentalObjectOwner","surname","getAccessToken","state","access_token","rentalHasReviews","button1Content","button2Content","button3Content","mounted","$route","params","type","get","headers","Authorization","id","page","then","response","pages","getReviewPics","numOfBedsPerRoom","methods","result","i","revs","author","photo","path","responseType","URL","createObjectURL","catch","error","console","log","reloadReviews","subscribe","post","rentalId","status","$notify","title","text","position","getEquipment","equipment","printEquipment","collectionSize","formatTimeStamp","time","slice","getAuthorFullName","review","formatReviewDate","reviewTime","date","Date","getDate","getMonth","getFullYear","getHours","getMinutes","nextPage","previousPage","numberedPage","buttonNumber"],"sourceRoot":"","sources":["C:\\Users\\Saška\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\UnregisteredUser\\components\\Rental\\RentalProfile.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"rentalObject\" class=\"container-fluid mt-2 pe-0\"> <!--style=\"overflow-x: hidden;\"-->\r\n    <div class=\"row align-items-start\">\r\n      <div class=\"col-md-7 p-3\">\r\n        <ImageSlider :photos=\"this.rentalObject.photos\"/>\r\n\r\n      </div>\r\n\r\n<!--------------------------------------------------------------------------------------------------------------------->\r\n\r\n      <div class=\"col-md-5 p-3 d-flex flex-grow-1 justify-content-center align-items-center rentalBasicInfo\">\r\n        <div style=\"width: 100%;\">\r\n          <div class=\"row\">\r\n            <div class=\"align-items-center text-start\" style=\"display: flex;\">\r\n              <hr class=\"ms-1\">\r\n              <div>\r\n                <h1 class=\"display-3 card-title cut-text\" :title=\"this.rentalObject.name\">{{ this.rentalObject.name }}</h1>\r\n              </div>\r\n              <hr class=\"ms-1\">\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row my-0 mb-2\">\r\n            <div class=\"col-12 d-flex justify-content-center align-items-center\">\r\n              <star-rating v-model:rating=\"this.rentalObject.grade\" text-class=\"h1 my-0 font-weight-normal\" :read-only=\"true\" :round-start-rating=\"false\" :glow=\"5\" glow-color=\"#ffd055\"></star-rating>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isVacationRental\" class=\"row main mb-3\">\r\n            <div class=\"col main d-flex justify-content-center\" title=\"Capacity\">\r\n              <p class=\"display-5\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"user\"></font-awesome-icon><strong>{{ this.rentalObject.capacity }}</strong>\r\n              </p>\r\n            </div>\r\n            <div class=\"col main d-flex justify-content-center\" title=\"Number of rooms\">\r\n              <p class=\"display-5\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"door-open\"></font-awesome-icon><strong>{{ getNumberOfRooms }}</strong>\r\n              </p>\r\n            </div>\r\n            <div class=\"col main d-flex justify-content-center\" title=\"\">\r\n              <p class=\"display-5\" :title=\"this.bedsPerRoom\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"bed\"></font-awesome-icon><strong>{{ getNumberOfBeds }}</strong>\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isVacationRental\" class=\"row\">\r\n            <div class=\"col d-flex justify-content-center\">\r\n              <p class=\"h3\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"clock\"></font-awesome-icon>{{ \"Check in:  \" +\r\n                                      formatTimeStamp(this.rentalObject.checkIn) + \"h\" }}\r\n              </p>\r\n            </div>\r\n            <div class=\"col d-flex justify-content-center\">\r\n              <p class=\"h3\">\r\n                <font-awesome-icon class=\"me-1\" icon=\"clock\"></font-awesome-icon>{{ \"Check out:  \" +\r\n                                      formatTimeStamp(this.rentalObject.checkOut) + \"h\" }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"!isVacationRental\" class=\"p-1\" style=\"text-align: center;\">\r\n            <p class=\"display-5\">\r\n              <font-awesome-icon class=\"me-1\" icon=\"user\"></font-awesome-icon><strong>{{ this.rentalObject.capacity }}</strong>\r\n            </p>\r\n          </div>\r\n\r\n  <!--        <div class=\"row\">-->\r\n  <!--          <div class=\"d-flex justify-content-center align-items-center\">-->\r\n  <!--            <div class=\"Stars\" style=\"&#45;&#45;rating: 0;\"></div>-->\r\n  <!--            (0.0)-->\r\n  <!--          </div>-->\r\n  <!--        </div>-->\r\n\r\n<!--          <div class=\"row mt-3 ps-1 text-center\">-->\r\n<!--            <p class=\"h3\">-->\r\n<!--              <font-awesome-icon class=\"me-2\" icon=\"user-tie\"></font-awesome-icon><i>{{ getOwnerFullName }}</i>-->\r\n<!--            </p>-->\r\n<!--          </div>-->\r\n\r\n          <div class=\"row ps-1\" style=\"text-align: center;\">\r\n<!--              <i><strong>{{ \"Price: $\" + this.rentalObject.price }}</strong></i>-->\r\n            <button :disabled=\"clientCantReserve || isOwner || isVacationRentalOwner || isBoatOwner\" class=\"w-100 btn\" style=\"font-weight: 500; color: white;\">\r\n              <span class=\"h4\">\r\n                <i><strong>{{ \"Book: $\" + this.rentalObject.price }}</strong></i>\r\n              </span>\r\n            </button>\r\n          </div>\r\n\r\n          <div v-if=\"isOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <button class=\"btn btn-red mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\" ><font-awesome-icon style=\"margin-right: 10px\" icon=\"trash\"></font-awesome-icon>Delete</button>\r\n              <router-link :to=\"'/fishingInstructor/updateAdventure/' + this.$route.params.id\" class=\"btn btn-yellow mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"pencil\"></font-awesome-icon>Edit</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <router-link :to=\"'/fishingInstructor/specialOffer/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"tag\"></font-awesome-icon>Special Offer</router-link>\r\n              <router-link :to=\"'/fishingInstructor/reservation/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"bookmark\"></font-awesome-icon>Book</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isVacationRentalOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <button class=\"btn btn-red mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\" ><font-awesome-icon style=\"margin-right: 10px\" icon=\"trash\"></font-awesome-icon>Delete</button>\r\n              <router-link :to=\"'/vacationRentalOwner/updateVacationRental/' + this.$route.params.id\" class=\"btn btn-yellow mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"pencil\"></font-awesome-icon>Edit</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isVacationRentalOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <router-link :to=\"'/vacationRentalOwner/specialOffer/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"tag\"></font-awesome-icon>Special Offer</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isBoatOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <button class=\"btn btn-red mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\" ><font-awesome-icon style=\"margin-right: 10px\" icon=\"trash\"></font-awesome-icon>Delete</button>\r\n              <router-link :to=\"'/boatOwner/updateBoat/' + this.$route.params.id\" class=\"btn btn-yellow mt-3 me-1\" :class=\"!this.rentalObject.isDeletable ? 'disabled':''\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"pencil\"></font-awesome-icon>Edit</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"isBoatOwner\" class=\"row\">\r\n            <div class=\"d-flex justify-content-center\">\r\n              <router-link :to=\"'/boatOwner/specialOffer/' + this.$route.params.id\" class=\"btn mt-3 me-1\"><font-awesome-icon style=\"margin-right: 10px\" icon=\"tag\"></font-awesome-icon>Special Offer</router-link>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n<!--------------------------------------------------------------------------------------------------------------------->\r\n\r\n    <div class=\"row align-items-start mb-5\">\r\n      <div class=\"col-md-7 ps-3\">\r\n        <div class=\"row\">\r\n          <div class=\"\" style=\"\">\r\n            <RentalDescription :description=\"this.rentalObject.description\"/>\r\n\r\n            <div class=\"row ps-1\">\r\n              <p class=\"h5\" style=\"display: flex;\">\r\n                <span class=\"mt-1\" >\r\n                <font-awesome-icon class=\"me-2\" icon=\"user-tie\"></font-awesome-icon><i>{{ ownerOrInstructor }}: {{ getOwnerFullName }}</i>\r\n                </span>\r\n                <star-rating class=\"h5 ms-3\" v-model:rating=\"this.rentalObject.ownerGrade\"\r\n                             text-class=\"mt-1 font-weight-normal\"\r\n                             :read-only=\"true\" :round-start-rating=\"false\" :glow=\"5\"\r\n                             glow-color=\"#ffd055\" :star-size=\"20\"></star-rating>\r\n              </p>\r\n            </div>\r\n\r\n            <RentalTags :additional-services=\"this.rentalObject.additionalServices\"/>\r\n            <RentalRules :conduct-rules=\"this.rentalObject.conductRules\"/>\r\n            <div class=\"row main\">\r\n              <div class=\"accordion accordion-flush\" id=\"accordionFlushExample\">\r\n                <div class=\"accordion-item\">\r\n                  <h2 class=\"accordion-header\" id=\"flush-headingTwo\" style=\"border: 1px solid black;\">\r\n                    <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\"\r\n                            data-bs-target=\"#flush-collapseTwo\" aria-expanded=\"false\" aria-controls=\"flush-collapseTwo\">\r\n                      <p class=\"h3\"><strong>Reviews</strong></p>\r\n                    </button>\r\n                  </h2>\r\n                  <div id=\"flush-collapseTwo\" class=\"accordion-collapse collapse show\" aria-labelledby=\"flush-headingTwo\">\r\n                    <div class=\"accordion-body p-2 pb-1\">\r\n\r\n                      <div v-if=\"rentalHasReviews\" class=\"reviews\">\r\n                        <nav class=\"\" aria-label=\"Page navigation\">\r\n                          <ul class=\"pagination justify-content-center mt-3\">\r\n                            <li class=\"page-item\" v-if=\"totalPages > 1\"><button class=\"page-link rounded\" :disabled=\"currentPage===0\" @click=\"previousPage\">Previous</button></li>\r\n                            <li class=\"page-item mt-auto me-1 ms-1 rounded\" v-if=\"currentPage > 1 && totalPages > 3\">...</li>\r\n                            <li class=\"page-item\"><button class=\"page-link rounded\" :disabled=\"currentPage === 0\" @click=\"numberedPage(1)\">{{button1Content}}</button></li>\r\n                            <li class=\"page-item\" v-if=\"totalPages > 1\"><button class=\"page-link rounded\" :disabled=\"currentPage !== 0 && totalPages - currentPage > 1\" @click=\"numberedPage(2)\">{{button2Content}}</button></li>\r\n                            <li class=\"page-item\" v-if=\"totalPages > 2\"><button class=\"page-link rounded\" :disabled=\"totalPages - currentPage === 1\" @click=\"numberedPage(3)\">{{button3Content}}</button></li>\r\n                            <li class=\"page-item mt-auto me-1 ms-1\" v-if=\"totalPages - currentPage > 1 && totalPages > 3 && button3Content !== totalPages\">...</li>\r\n                            <li class=\"page-item\" v-if=\"totalPages > 1\"><button class=\"page-link rounded\" :disabled=\"totalPages - currentPage === 1\" @click=\"nextPage\">Next</button></li>\r\n                          </ul>\r\n                        </nav>\r\n                        <div v-for=\"(review, i) in reviews\" :key=\"i\" class=\"review p-2 mb-1\">\r\n                          <div class=\"review-header\">\r\n                            <div class=\"align-items-center\" style=\"display:flex; justify-content: space-between; \">\r\n                              <div style=\"display: flex;\">\r\n                                <img v-if=\"images[i]\" class=\"profile-pic rounded-pill\" :src=\"images[i]\" alt=\"\"/>\r\n                                <img v-else class=\"profile-pic rounded-pill\" src=\"../../../Images/noProfilePic.png\" alt=\"\"/>\r\n                                <div class=\"ms-1\">\r\n                                  <h6>{{ getAuthorFullName(review) }}</h6>\r\n                                  <p class=\"small\" style=\"color: gray;\">{{ formatReviewDate(review.timeStamp) }}</p>\r\n                                </div>\r\n                              </div>\r\n                              <p class=\"h3 pe-2\">{{ review.grade + \"★\" }}</p>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"review-body\" style=\"text-align: justify; color: black;\">\r\n                            <p v-if=\"review.comment\" class=\"ps-1 pe-2\">{{ review.comment }}</p>\r\n                          </div>\r\n                        </div>\r\n\r\n\r\n                      </div>\r\n                      <div v-else class=\"text-center\">\r\n                        <label><i>No reviews available.</i></label>\r\n                      </div>\r\n\r\n\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-md-5\" >\r\n        <div v-if=\"isBoat\" class=\"row main mb-4\">\r\n          <div class=\"lineTitle\">\r\n            <p class=\"h3\"><strong>Boat info</strong></p>\r\n            <hr class=\"ms-1\">\r\n          </div>\r\n          <div class=\"row-fluid main px-5\" style=\"font-weight: 700;\">\r\n            <div class=\"row mt-3 main\">\r\n              <div class=\"col main border\">{{\"Type: \" + this.rentalObject.type }}</div>\r\n              <div class=\"col main border\">{{\"Length: \" + this.rentalObject.length }}</div>\r\n            </div>\r\n            <div class=\"row main\">\r\n              <div class=\"col main border\">{{\"Engine number: \" + this.rentalObject.engineNumber }}</div>\r\n              <div class=\"col main border\">{{\"Engine power: \" + this.rentalObject.enginePower  }}</div>\r\n            </div>\r\n            <div class=\"row main text-center\">\r\n              <div class=\"col main border\">{{\"Maximum speed: \" + this.rentalObject.maxSpeed }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"isBoat\" class=\"row main mb-3\">\r\n          <div class=\"lineTitle\">\r\n            <p class=\"h3\"><strong>Navigation equipment</strong></p>\r\n            <hr class=\"ms-1\">\r\n          </div>\r\n          <p class=\"\" style=\"color: grey;\">\r\n            {{ getEquipment(this.rentalObject.navigationEquipment) }}\r\n          </p>\r\n        </div>\r\n\r\n        <div v-if=\"isBoat\" class=\"row main mb-5\">\r\n          <div class=\"lineTitle\">\r\n            <p class=\"h3\"><strong>Fishing equipment</strong></p>\r\n            <hr class=\"ms-1\">\r\n          </div>\r\n          <p class=\"\" style=\"color: grey;\">\r\n            {{ getEquipment(this.rentalObject.fishingEquipment) }}\r\n          </p>\r\n        </div>\r\n\r\n        <div v-if=\"isAdventure\" class=\"row main mb-5\">\r\n          <div class=\"lineTitle\">\r\n            <p class=\"h3\"><strong>Adventure equipment</strong></p>\r\n            <hr class=\"ms-1\">\r\n          </div>\r\n          <p class=\"\" style=\"color: grey;\">\r\n            {{ getEquipment(this.rentalObject.adventureEquipment) }}\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"row mb-5\" >\r\n          <div class=\"col-12 p-0 px-2 m-0\">\r\n            <RentalAddress :address=\"this.rentalObject.address\"/>\r\n          </div>\r\n        </div>\r\n\r\n        <RentalSpecialOffers :specialOffers=\"this.rentalObject.specialOffers\"\r\n                             :rentalType=\"this.rentalObject.rentalObjectType\"\r\n                             :price=\"this.rentalObject.price\"\r\n                             :clientCantReserve=\"clientCantReserve\"\r\n                             :isOwner=\"this.isOwner\"/>\r\n\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div v-if=\"showSubscriptionArea\" class=\"row align-items-center mb-0 main align-items-start\"\r\n         style=\"background-color: lightgray; height: 10vh;\">\r\n      <div class=\"d-flex justify-content-center\">\r\n        <p class=\"h6\" style=\"font-weight: 100;\">\r\n          Want to receive an email whenever there is a new special offer available?\r\n          <button :disabled=\"isUserSubscribed\" @click=\"subscribe\"\r\n                  type=\"button\" class=\"subscribe ms-2 rounded\" >\r\n            {{ buttonText }}\r\n          </button>\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <!--\r\n    <div class=\"row align-items-start mt-4\">\r\n        <div class=\"col-md-7\">\r\n        </div>\r\n    </div>\r\n    -->\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport ImageSlider from \"@/components/UnregisteredUser/components/Rental/ImageSlider\";\r\nimport RentalDescription from \"@/components/UnregisteredUser/components/Rental/RentalDescription\";\r\nimport RentalTags from \"@/components/UnregisteredUser/components/Rental/RentalTags\";\r\nimport RentalAddress from \"@/components/UnregisteredUser/components/Rental/RentalAddress\";\r\nimport RentalRules from \"@/components/UnregisteredUser/components/Rental/RentalRules\";\r\nimport StarRating from 'vue-star-rating';\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faBed, faCircleCheck, faCircleXmark, faClock, faDoorOpen, faLocationDot, faUser, faUserTie, faPencil, faTrash, faTag, faBookmark } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios/index\";\r\nimport {useStore} from \"vuex\";\r\nimport store from \"@/store\";\r\nimport RentalSpecialOffers from \"@/components/UnregisteredUser/components/Rental/RentalSpecialOffers\";\r\n\r\n\r\nlibrary.add(faUser, faDoorOpen, faBed, faClock, faLocationDot, faCircleCheck, faCircleXmark, faUserTie, faPencil, faTrash, faTag, faBookmark);\r\n\r\nexport default {\r\n  name: \"RentalProfile\",\r\n  components: {\r\n    RentalSpecialOffers,\r\n    RentalRules, RentalAddress, RentalTags, RentalDescription, ImageSlider, FontAwesomeIcon, StarRating},\r\n  data() {\r\n    return {\r\n      rentalObject: null,\r\n      currentPage: 0,\r\n      totalPages: null,\r\n      pageSize: 6,\r\n      images: [],\r\n      bedsPerRoom: null,\r\n    }\r\n  },\r\n  computed: {\r\n    clientCantReserve() {\r\n      return this.rentalObject.penalties === 3;\r\n    },\r\n    ownerOrInstructor() {\r\n      if(this.rentalObject.rentalObjectType === \"Adventure\") return \"Instructor\";\r\n      return \"Owner\";\r\n    },\r\n    isOwner() {\r\n      return this.$store.getters.user === \"fishingInstructor\";\r\n    },\r\n    isVacationRentalOwner() {\r\n      return this.$store.getters.user === \"vacationRentalOwner\";\r\n    },\r\n    isBoatOwner() {\r\n      return this.$store.getters.user === \"boatOwner\";\r\n    },\r\n    buttonText() {\r\n      return this.isUserSubscribed ? \"Subscribed!\" : \"Subscribe\";\r\n    },\r\n    reviews() {\r\n      return this.rentalObject.reviews.content;\r\n    },\r\n    getNumberOfRooms() {\r\n      return this.rentalObject.rooms.length;\r\n    },\r\n    getNumberOfBeds() {\r\n      let beds = 0;\r\n      this.rentalObject.rooms.forEach(room => { beds += room.beds; });\r\n      return beds;\r\n    },\r\n    doesRentalHavePhotos() {\r\n      return this.rentalObject.photos.length > 0;\r\n    },\r\n    isUserSubscribed() {\r\n      return this.rentalObject.isUserSubscribed;\r\n    },\r\n    showSubscriptionArea() {\r\n      return this.$store.getters.user === \"client\";\r\n    },\r\n    isVacationRental() {\r\n      return this.rentalObject.rentalObjectType === \"VacationRental\";\r\n    },\r\n    isBoat() {\r\n      return this.rentalObject.rentalObjectType === \"Boat\";\r\n    },\r\n    isAdventure() {\r\n      return this.rentalObject.rentalObjectType === \"Adventure\";\r\n    },\r\n    getOwnerFullName() {\r\n      return this.rentalObject.rentalObjectOwner.name + \" \" + this.rentalObject.rentalObjectOwner.surname;\r\n    },\r\n    getAccessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    rentalHasReviews() {\r\n      return this.reviews.length > 0;\r\n    },\r\n    button1Content() {\r\n      return this.currentPage === 0 ? this.currentPage+1: this.totalPages - this.currentPage === 1 ? this.currentPage - 1 : this.currentPage;\r\n    },\r\n    button2Content() {\r\n      return this.currentPage === 0 ? this.currentPage+2: this.totalPages - this.currentPage === 1 ? this.currentPage : this.currentPage+1;\r\n    },\r\n    button3Content() {\r\n      return this.currentPage === 0 ? this.currentPage+3: this.totalPages - this.currentPage === 1 ? this.currentPage + 1 : this.currentPage+2;\r\n    }\r\n  },\r\n  mounted() {\r\n    const store = useStore();\r\n    if(this.$route.params.type === \"Boat\") {\r\n      axios.get(\"/RentalObjects/getBoat\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + store.state.access_token\r\n        },\r\n        params: {\r\n          id: this.$route.params.id,\r\n          page: this.currentPage,\r\n          pageSize: this.pageSize\r\n        }\r\n      })\r\n      .then((response) => {\r\n        this.rentalObject = response.data;\r\n        this.currentPage = this.rentalObject.reviews.currentPage;\r\n        this.totalPages = this.rentalObject.reviews.pages;\r\n        this.getReviewPics();\r\n      });\r\n    }\r\n    else if(this.$route.params.type === \"Adventure\") {\r\n      axios.get(\"/RentalObjects/getAdventure\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + store.state.access_token\r\n        },\r\n        params: {\r\n          id: this.$route.params.id,\r\n          page: this.currentPage,\r\n          pageSize: this.pageSize\r\n        }\r\n      })\r\n      .then((response) => {\r\n        this.rentalObject = response.data;\r\n        this.currentPage = this.rentalObject.reviews.currentPage;\r\n        this.totalPages = this.rentalObject.reviews.pages;\r\n        this.getReviewPics();\r\n      });\r\n    }\r\n    else {\r\n      axios.get(\"/RentalObjects/getVacationRental\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + store.state.access_token\r\n        },\r\n        params: {\r\n          id: this.$route.params.id,\r\n          page: this.currentPage,\r\n          pageSize: this.pageSize\r\n        }\r\n      })\r\n      .then((response) => {\r\n        this.rentalObject = response.data;\r\n        this.currentPage = this.rentalObject.reviews.currentPage;\r\n        this.totalPages = this.rentalObject.reviews.pages;\r\n        this.getReviewPics();\r\n        this.numOfBedsPerRoom();\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    numOfBedsPerRoom() {\r\n      let result = \"Beds per room: \";\r\n      for(let i=0; i<this.rentalObject.rooms.length; i++) {\r\n        result += this.rentalObject.rooms[i].beds;\r\n        if(i === this.rentalObject.rooms.length - 1)\r\n          break\r\n        result += \" + \";\r\n      }\r\n      this.bedsPerRoom = result;\r\n    },\r\n    getReviewPics() {\r\n      this.images = [];\r\n      let revs = this.rentalObject.reviews.content;\r\n      for(let i=0; i<revs.length; i++) {\r\n        if(!revs[i].author.photo) { this.images[i] = null; continue; }\r\n        axios.get(\"/Photos/\", {\r\n          headers: {\r\n            Authorization: \"Bearer \" + this.$store.getters.access_token,\r\n          },\r\n          params: {\r\n            path: revs[i].author.photo,\r\n          },\r\n          responseType: \"blob\"\r\n        })\r\n        .then(response => {\r\n          this.images[i] = URL.createObjectURL(response.data);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n      }\r\n    },\r\n    reloadReviews() {\r\n      if(this.$route.params.type === \"Boat\") {\r\n        axios.get(\"/RentalObjects/getBoat\", {\r\n          headers: {\r\n            Authorization: \"Bearer \" + this.$store.getters.access_token\r\n          },\r\n          params: {\r\n            id: this.$route.params.id,\r\n            page: this.currentPage,\r\n            pageSize: this.pageSize\r\n          }\r\n        })\r\n            .then((response) => {\r\n              this.rentalObject = response.data;\r\n              this.currentPage = this.rentalObject.reviews.currentPage;\r\n              this.totalPages = this.rentalObject.reviews.pages;\r\n              this.getReviewPics();\r\n            });\r\n      }\r\n      else if(this.$route.params.type === \"Adventure\") {\r\n        axios.get(\"/RentalObjects/getAdventure\", {\r\n          headers: {\r\n            Authorization: \"Bearer \" + this.$store.getters.access_token\r\n          },\r\n          params: {\r\n            id: this.$route.params.id,\r\n            page: this.currentPage,\r\n            pageSize: this.pageSize\r\n          }\r\n        })\r\n            .then((response) => {\r\n              this.rentalObject = response.data;\r\n              this.currentPage = this.rentalObject.reviews.currentPage;\r\n              this.totalPages = this.rentalObject.reviews.pages;\r\n              this.getReviewPics();\r\n            });\r\n      }\r\n      else {\r\n        axios.get(\"/RentalObjects/getVacationRental\", {\r\n          headers: {\r\n            Authorization: \"Bearer \" + this.$store.getters.access_token\r\n          },\r\n          params: {\r\n            id: this.$route.params.id,\r\n            page: this.currentPage,\r\n            pageSize: this.pageSize\r\n          }\r\n        })\r\n            .then((response) => {\r\n              this.rentalObject = response.data;\r\n              this.currentPage = this.rentalObject.reviews.currentPage;\r\n              this.totalPages = this.rentalObject.reviews.pages;\r\n              this.getReviewPics();\r\n            });\r\n      }\r\n    },\r\n    subscribe() {\r\n      axios.post(\"/RentalObjects/subscribe\", { rentalId: this.rentalObject.id }, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.getAccessToken,\r\n        },\r\n      })\r\n      .then(() => {\r\n        this.rentalObject.isUserSubscribed = true;\r\n      })\r\n      .catch(error => {\r\n        if (error.response.status === 404) {\r\n          this.$notify({\r\n            title: \"Invalid Request Status\",\r\n            text: \"Something went wrong. Try again later.\",\r\n            position: \"bottom right\",\r\n            type: \"warn\"\r\n          })\r\n        } else if (error.response.status === 500) {\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text: \"Something went wrong on the server! Please try again later...\",\r\n            position: \"bottom right\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getEquipment(equipment) {\r\n      let printEquipment = \"\";\r\n      const collectionSize = equipment.length;\r\n      for(let i=0; i<collectionSize; i++) {\r\n        printEquipment += equipment[i].name;\r\n        if(i === collectionSize-1) break;\r\n        printEquipment += \", \"\r\n      }\r\n      if(printEquipment === \"\") return \"No equipment included.\";\r\n      return printEquipment;\r\n    },\r\n    formatTimeStamp(time) {\r\n      return time.slice(0, -3);\r\n    },\r\n    getAuthorFullName(review) {\r\n      return review.author.name + \" \" + review.author.surname;\r\n    },\r\n    formatReviewDate(reviewTime) {\r\n      let date = new Date(reviewTime);\r\n      return date.getDate() + '.' + (date.getMonth() + 1) + '.' +  date.getFullYear() + '. at '\r\n          + date.getHours() + ':' + ( (date.getMinutes()<10?'0':'') + date.getMinutes() );\r\n    },\r\n    nextPage() {\r\n      this.currentPage += 1;\r\n      this.reloadReviews();\r\n    },\r\n    previousPage() {\r\n      this.currentPage -= 1;\r\n      this.reloadReviews();\r\n    },\r\n    numberedPage(buttonNumber) {\r\n      if (buttonNumber === 1) {\r\n        this.currentPage = this.button1Content - 1;\r\n      } else if (buttonNumber === 2) {\r\n        this.currentPage = this.button2Content - 1;\r\n      } else if (buttonNumber === 3) {\r\n        this.currentPage = this.button3Content - 1;\r\n      }\r\n      this.reloadReviews();\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cut-text {\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n.page-link {\r\n  background-color: white;\r\n  border: 2px solid black;\r\n}\r\ndiv.rentalObjectName {\r\n  display: flex;\r\n}\r\ndiv.lineTitle {\r\n  display: flex;\r\n}\r\n\r\nhr {\r\n  flex-grow: 1;\r\n}\r\n\r\nbutton.subscribe:hover {\r\n  color: white;\r\n  background-color: black;\r\n}\r\n\r\nbutton.subscribe {\r\n  height: fit-content;\r\n  width:fit-content;\r\n  background-color:lightgray;\r\n  border: 2px solid darkgray;\r\n  color: darkgray;\r\n}\r\n\r\nbutton.subscribe:disabled, button.subscribe[disabled] {\r\n  background-color:lightgray;\r\n  border: 2px solid darkgray;\r\n  color: darkgray;\r\n}\r\n\r\nbutton.subscribe:disabled:hover, button.subscribe[disabled]:hover, button.subscribe:disabled:active, button.subscribe[disabled]:active, button.subscribe:disabled:focus, button.subscribe[disabled]:focus {\r\n  background-color:lightgray;\r\n  border: 2px solid darkgray;\r\n  color: darkgray;\r\n}\r\n\r\ndiv.rentalBasicInfo {\r\n  height: 60vh;\r\n}\r\n.review .profile-pic {\r\n  width: 50px;\r\n  height: 50px;\r\n  object-fit: cover;\r\n  object-position: center;\r\n}\r\n\r\ndiv.review {\r\n  border-radius: 25px;\r\n  border: 2px solid darkgray;\r\n}\r\n\r\ndiv.review:hover {\r\n  border: 2px solid black;\r\n}\r\n\r\ndiv.accordion-body {\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n  background-color: lightgray;\r\n  border-bottom: 1px solid lightgrey;\r\n}\r\n\r\n.accordion-button:not(.collapsed) {\r\n  color: #008970;\r\n  background-color: #f7f7f2;\r\n}\r\n\r\ndiv.review {\r\n  background-color: white\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}