{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-086791f6\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = [\"src\"];\nconst _hoisted_2 = {\n  class: \"card-body pt-1 pb-0\"\n};\nconst _hoisted_3 = {\n  class: \"align-items-center text-start\",\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"card-title cut-text\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", {\n  class: \"ms-1\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = {\n  class: \"row d-flex m-0 p-0 justify-content-center\"\n};\nconst _hoisted_7 = [\"id\", \"disabled\", \"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.subscriptions, (subscription, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: i,\n      class: \"card col-xl-6 col-lg-6 col-md-6 col-sm-10 col-xs-12 px-3 mb-5\"\n    }, [_createVNode(_component_router_link, {\n      to: $options.getPath(subscription),\n      class: \"link\",\n      onClick: $options.setRentalIdAndType\n    }, {\n      default: _withCtx(() => [subscription.photos[0].photo ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        class: \"card-img-top\",\n        alt: \"\",\n        src: $data.images[i]\n      }, null, 8\n      /* PROPS */\n      , _hoisted_1)) : _createCommentVNode(\"v-if\", true)]),\n      _: 2\n      /* DYNAMIC */\n\n    }, 1032\n    /* PROPS, DYNAMIC_SLOTS */\n    , [\"to\", \"onClick\"]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", null, [_createElementVNode(\"h1\", _hoisted_4, _toDisplayString(subscription.name), 1\n    /* TEXT */\n    )]), _hoisted_5]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n      id: subscription.id,\n      disabled: $data.isSubscriptionCancelled[i],\n      onClick: $event => $options.cancelSubscription(i, subscription),\n      class: _normalizeClass([\"btn m-0 py-1\", [$data.isSubscriptionCancelled[i] ? 'cancelled' : 'cancel']])\n    }, _toDisplayString($data.isSubscriptionCancelled[i] ? \"Cancelled\" : this.btnText), 11\n    /* TEXT, CLASS, PROPS */\n    , _hoisted_7)])])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;;AAMSA,OAAK,EAAC;;;AACJA,OAAK,EAAC;AAAgCC,OAAsB,EAAtB;AAAA;AAAA;;;AAEnCD,OAAK,EAAC;;;gEAEZE,oBAAiB,IAAjB,EAAiB;AAAbF,OAAK,EAAC;AAAO,CAAjB,EAAgB,IAAhB,EAAgB;AAAA;AAAhB;;;AAEGA,OAAK,EAAC;;;;;;2BAZfG,oBAqBMC,SArBN,EAqBM,IArBN,EAqBMC,YArB2BC,oBAqB3B,EArBwC,CAAjCC,YAAiC,EAAnBC,CAAmB,KAAlB;yBAA5BL,oBAqBM,KArBN,EAqBM;AArB2CM,SAAG,EAAED,CAqBhD;AArBmDR,WAAK,EAAC;AAqBzD,KArBN,GACEU,aAGcC,sBAHd,EAGc;AAHAC,QAAE,EAAEC,iBAAQN,YAAR,CAGJ;AAH2BP,WAAK,EAAC,MAGjC;AAHyCc,aAAK,EAAED;AAGhD,KAHd;wBAEE,MAAuF,CAA5EN,YAAY,CAACQ,MAAb,CAAmB,CAAnB,EAAuBC,uBAAlCb,oBAAuF,KAAvF,EAAuF;cAAA;AAA9CH,aAAK,EAAC,cAAwC;AAAzBiB,WAAG,EAAC,EAAqB;AAAjBC,WAAG,EAAEC,aAAOX,CAAP;AAAY,OAAvF;;AAAA,wDAAuF;;;;KAFzF;;AAAA,0BAIAN,oBAcM,KAdN,cAcM,CAbJA,oBAKM,KALN,cAKM,CAJJA,oBAEM,KAFN,EAEM,IAFN,EAEM,CADJA,oBAA4D,IAA5D,cAA4DkB,iBAAzBb,YAAY,CAACc,IAAY,CAA5D,EAAoD;AAAA;AAApD,KACI,CAFN,CAII,EADJC,UACI,CALN,CAaI,EAPJpB,oBAMM,KANN,cAMM,CALJA,oBAIS,QAJT,EAIS;AAJAqB,QAAE,EAAEhB,YAAY,CAACgB,EAIjB;AAJsBC,cAAQ,EAAEL,8BAAwBX,CAAxB,CAIhC;AAHAM,aAAK,YAAED,4BAAmBL,CAAnB,EAAsBD,YAAtB,CAGP;AAFDP,WAAK,mBAAC,cAAD,EAAe,CAAUmB,8BAAwBX,CAAxB,IAAyB,WAAzB,GAAyB,QAAnC,CAAf;AAEJ,KAJT,mBAGKW,8BAAwBX,CAAxB,IAAyB,WAAzB,GAAyB,KAAuBiB,QAHrD,EAG4D;AAAA;AAH5D,MAG4DC,UAH5D,CAKI,CANN,CAOI,CAdN,EALF;GAqBM,CArBN;;AAAA","names":["class","style","_createElementVNode","_createElementBlock","_Fragment","_renderList","$props","subscription","i","key","_createVNode","_component_router_link","to","$options","onClick","photos","photo","alt","src","$data","_toDisplayString","name","_hoisted_5","id","disabled","btnText","_hoisted_7"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\Client\\ClientPage\\components\\ClientProfile\\ClientSubscriptions\\ClientSubscription.vue"],"sourcesContent":["<template>\r\n  <div v-for=\"(subscription, i) in subscriptions\" :key=\"i\" class=\"card col-xl-6 col-lg-6 col-md-6 col-sm-10 col-xs-12 px-3 mb-5\">\r\n    <router-link :to=\"getPath(subscription)\" class=\"link\" @click=\"setRentalIdAndType\">\r\n\r\n      <img v-if=\"subscription.photos[0].photo\" class=\"card-img-top\" alt=\"\" :src=\"images[i]\"/>\r\n    </router-link>\r\n    <div class=\"card-body pt-1 pb-0\">\r\n      <div class=\"align-items-center text-start\" style=\"display: flex;\">\r\n        <div>\r\n          <h1 class=\"card-title cut-text\">{{ subscription.name }}</h1>\r\n        </div>\r\n        <hr class=\"ms-1\">\r\n      </div>\r\n      <div class=\"row d-flex m-0 p-0 justify-content-center\">\r\n        <button :id=\"subscription.id\" :disabled=\"isSubscriptionCancelled[i]\"\r\n                @click=\"cancelSubscription(i, subscription)\"\r\n                class=\"btn m-0 py-1\" :class=\"[isSubscriptionCancelled[i] ? 'cancelled' : 'cancel']\">\r\n          {{ isSubscriptionCancelled[i] ? \"Cancelled\" : this.btnText }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"ClientSubscription\",\r\n  props: [\"subscriptions\"],\r\n  data() {\r\n    return {\r\n      images: [],\r\n      isSubscriptionCancelled: [],\r\n      btnText: \"Cancel Subscription\",\r\n    }\r\n  },\r\n  computed: {\r\n    getAccessToken() {\r\n      return store.state.access_token;\r\n    },\r\n  },\r\n  methods: {\r\n    cancelSubscription(i, subscription) {\r\n      axios.post(\"/RentalObjects/cancelSubscription\", { rentalId: subscription.id }, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.getAccessToken,\r\n        },\r\n      })\r\n      .then(() => {\r\n        this.isSubscriptionCancelled[i] = true;\r\n      })\r\n      .catch(error => {\r\n        if (error.response.status === 404) {\r\n          this.$notify({\r\n            title: \"Invalid Status\",\r\n            text: \"Something went wrong. Try again later.\",\r\n            position: \"bottom right\",\r\n            type: \"warn\"\r\n          })\r\n        } else if (error.response.status === 500) {\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text: \"Something went wrong on the server! Please try again later...\",\r\n            position: \"bottom right\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n\r\n    },\r\n    setRentalIdAndType(subscription) {\r\n      this.$store.dispatch(\"rentalId\", subscription.id);\r\n      this.$store.dispatch(\"rentalType\", subscription.rentalObjectType);\r\n    },\r\n    getPath(subscription) {\r\n      return \"/client/RentalProfile/\" + subscription.rentalObjectType + \"-\"\r\n          + subscription.id;\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    for (let i=0; i < this.subscriptions.length; i++) {\r\n      this.isSubscriptionCancelled[i] = false;\r\n      if(!this.subscriptions[i].photos[0].photo) { this.images[i] = null; continue; }\r\n      axios.get(\"/Photos/\", {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.$store.getters.access_token,\r\n        },\r\n        params: {\r\n          path: this.subscriptions[i].photos[0].photo,\r\n        },\r\n        responseType: \"blob\"\r\n      })\r\n          .then(response => {\r\n            this.images[i] = URL.createObjectURL(response.data);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nbutton.cancel {\r\n  background-color: #e23c52;\r\n  border: 1px solid #e23c52;\r\n  color: white;\r\n  font-weight: 500;\r\n  border-radius: 40px;\r\n  width: 60%;\r\n}\r\n\r\nbutton.cancelled {\r\n  background-color: lightgray;\r\n  border: 1px solid darkgray;\r\n  color: darkgray;\r\n  font-weight: 500;\r\n  border-radius: 40px;\r\n  width: 60%;\r\n}\r\n/*button.cancel:disabled, button.cancel[disabled] {*/\r\n/*  background-color:lightgray;*/\r\n/*  border: 2px solid darkgray;*/\r\n/*  color: darkgray;*/\r\n/*}*/\r\n.cut-text {\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\ndiv.card img {\r\n  height: 25vh;\r\n  object-fit: cover;\r\n  object-position: center;\r\n  border-top-left-radius: 40px;\r\n  border-top-right-radius: 40px;\r\n  /*border: 1px solid black;*/\r\n  /*border-bottom: none;*/\r\n}\r\n\r\na {\r\n  text-decoration: none;\r\n  color: black;\r\n}\r\n\r\nhr {\r\n  flex-grow: 1;\r\n}\r\n\r\ndiv.card {\r\n  border: none;\r\n}\r\n\r\ndiv.card-body {\r\n  border: 1px solid black;\r\n  border-bottom-left-radius: 40px;\r\n  border-bottom-right-radius: 40px;\r\n  box-shadow: 0 0.3rem 1rem rgb(0 0 0 / 15%);\r\n}\r\n\r\n.card-img-top {\r\n  box-shadow: -0.05em 0 1rem rgb(0 0 0 / 15%);\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}