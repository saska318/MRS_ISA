{"ast":null,"code":"import { DatePicker } from \"v-calendar\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: \"ClientReservationPage\",\n  components: {\n    DatePicker\n  },\n\n  data() {\n    return {\n      date: new Date(),\n      excluded: [],\n      dateIsSelected: true,\n      isEquipmentNeeded: false,\n      additionalServices: [],\n      checkedServices: [],\n      price: 0,\n      total: 0,\n      range: {\n        start: null,\n        end: null\n      }\n    };\n  },\n\n  methods: {\n    addOrSubtractServicePrice(service, index) {\n      let s = document.getElementById('service' + index);\n\n      if (s.checked) {\n        this.total += service.price;\n        this.checkedServices.push(service);\n      } else {\n        this.total -= service.price;\n        this.checkedServices = this.checkedServices.filter(function (s) {\n          return s.id !== service.id;\n        });\n      }\n    },\n\n    round(num, places) {\n      const round = (num, places) => {\n        if (!(\"\" + num).includes(\"e\")) {\n          return +(Math.round(num + \"e+\" + places) + \"e-\" + places);\n        } else {\n          let arr = (\"\" + num).split(\"e\");\n          let sig = \"\";\n\n          if (+arr[1] + places > 0) {\n            sig = \"+\";\n          }\n\n          return +(Math.round(+arr[0] + \"e\" + sig + (+arr[1] + places)) + \"e-\" + places);\n        }\n      };\n\n      return round(num, places);\n    },\n\n    isDataEntered() {\n      if (this.$route.params.type === 'Adventure') {\n        if (this.date === null) {\n          this.dateIsSelected = false;\n          return false;\n        }\n      } else {\n        if (this.range.start === null) {\n          this.dateIsSelected = false;\n          return false;\n        }\n      }\n\n      this.dateIsSelected = true;\n      return true;\n    },\n\n    book() {\n      console.log(this.range);\n\n      if (this.isDataEntered()) {\n        let startDate, endDate;\n\n        if (this.$route.params.type === 'Adventure') {\n          startDate = this.date;\n          endDate = this.date;\n        } else {\n          startDate = this.range.start;\n          endDate = this.range.end;\n        }\n\n        const dto = {\n          rentalId: this.$route.params.id,\n          startDate: startDate,\n          endDate: endDate,\n          isEquipmentNeeded: this.isEquipmentNeeded,\n          additionalServices: this.checkedServices,\n          total: this.getTotal\n        };\n        axios.post(\"/Reservations/book\", dto, {\n          headers: {\n            Authorization: \"Bearer \" + store.getters.access_token\n          }\n        }).then(() => {\n          document.getElementById('book').disabled = true;\n          this.$notify({\n            title: \"Successful reservation\",\n            text: \"You have successfully booked appointment.\",\n            position: \"bottom right\",\n            type: \"success\"\n          });\n        }).catch(() => {\n          this.$notify({\n            title: \"Server error\",\n            text: \"Server is currently off. Please try again later...\",\n            type: \"error\"\n          });\n        });\n      }\n    }\n\n  },\n  computed: {\n    getTotal() {\n      let days = this.getNumberOfDays;\n      let rentingPrice = this.price * days;\n      return this.round(this.total + rentingPrice, 2);\n    },\n\n    getNumberOfDays() {\n      if (this.$route.params.type === 'Adventure') {\n        if (!this.date) return 0;\n        return 1;\n      }\n\n      if (!this.range.start) return 0;\n      let initDate = this.range.start,\n          termDate = this.range.end;\n      let date1 = new Date(initDate),\n          date2 = new Date(termDate);\n      date1.setHours(0, 0, 0);\n      date2.setHours(0, 0, 0);\n      let timeDiff = date2.getTime() - date1.getTime();\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\n      return daysDiff + 1;\n    }\n\n  },\n\n  mounted() {\n    axios.get(\"/Reservations/getLimits\", {\n      headers: {\n        Authorization: \"Bearer \" + store.getters.access_token\n      },\n      params: {\n        rentalId: this.$route.params.id,\n        ownerId: this.$route.params.ownerId\n      }\n    }).then(response => {\n      const dto = response.data;\n      this.additionalServices = dto.additionalServices;\n      this.price = dto.price;\n      this.excluded.push({\n        start: new Date(dto.ownerInitDate),\n        end: new Date(dto.ownerTermDate)\n      });\n      this.excluded.push({\n        start: null,\n        end: new Date()\n      });\n      this.excluded.push({\n        start: new Date(dto.rentalTermDate),\n        end: null\n      });\n\n      for (let i = 0; i < dto.reservationsPeriods.length; i++) {\n        this.excluded.push({\n          start: new Date(dto.reservationsPeriods[i].start),\n          end: new Date(dto.reservationsPeriods[i].end)\n        });\n      }\n    }).catch();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["DatePicker","axios","store","name","components","data","date","Date","excluded","dateIsSelected","isEquipmentNeeded","additionalServices","checkedServices","price","total","range","start","end","methods","addOrSubtractServicePrice","service","index","s","document","getElementById","checked","push","filter","id","round","num","places","includes","Math","arr","split","sig","isDataEntered","$route","params","type","book","console","log","startDate","endDate","dto","rentalId","getTotal","post","headers","Authorization","getters","access_token","then","disabled","$notify","title","text","position","catch","computed","days","getNumberOfDays","rentingPrice","initDate","termDate","date1","date2","setHours","timeDiff","getTime","daysDiff","mounted","get","ownerId","response","ownerInitDate","ownerTermDate","rentalTermDate","i","reservationsPeriods","length"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\Client\\ClientPage\\components\\ClientReservationPage\\ClientReservationPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5 mb-5\">\r\n      <div class=\"container px-4 py-3 rounded form\" spellcheck=\"false\" >\r\n        <div class=\"container-fluid\">\r\n          <h3>Reservation</h3>\r\n          <div class=\"row main justify-content-center\">\r\n            <div class=\"row main\">\r\n              <div class=\"col-3\"></div>\r\n              <div class=\"col-6\">\r\n\r\n                <div class=\"row justify-content-center mt-4\">\r\n                  <label class=\"ms-3\">Date</label>\r\n                  <div v-if=\"this.$route.params.type === 'Adventure'\" class=\"container p-0 m-0 text-center\" style=\"max-width: 400px\">\r\n                    <date-picker :disabled-dates=\"excluded\" v-model=\"date\" mode=\"dateTime\" is24hr :firstDayOfWeek=2>\r\n                    </date-picker>\r\n                    <p v-if='!dateIsSelected'>'Date' is a mandatory field.</p>\r\n                  </div>\r\n                  <div v-else class=\"container p-0 m-0 text-center\" style=\"max-width: 400px\">\r\n                    <date-picker :disabled-dates=\"excluded\" v-model=\"range\" is-range is24hr :firstDayOfWeek=2>\r\n                    </date-picker>\r\n                    <p v-if='!dateIsSelected'>'Date' is a mandatory field.</p>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n                <div v-if=\"this.$route.params.type !== 'VacationRental'\" class=\"row justify-content-center mt-2\">\r\n                  <input class=\"form-check-input\" type=\"checkbox\" id=\"equipment\" v-model=\"isEquipmentNeeded\">\r\n                  <label for=\"equipment\">Is Equipment needed?</label>\r\n                </div>\r\n\r\n                <div v-if=\"additionalServices.length > 0\" class=\"row main-col text-center header rounded mb-3 mt-5\">\r\n                  <table style=\"\">\r\n                    <thead>\r\n                    <tr>\r\n                      <th>Service</th>\r\n                      <th>Price</th>\r\n                      <th>Add</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr v-for=\"(service, index) in additionalServices\" :key=\"index\" :class=\"index%2!==0?'odd':'even'\">\r\n                      <td v-if=\"service.price !== 0\">\r\n                        {{ service.name }}\r\n                      </td>\r\n                      <td v-if=\"service.price !== 0\">\r\n                        {{ service.price }}\r\n                      </td>\r\n                      <td v-if=\"service.price !== 0\">\r\n                        <input :id=\"'service'+index\" class=\"form-check-input\" type=\"checkbox\" @input=\"addOrSubtractServicePrice(service, index)\">\r\n                      </td>\r\n                    </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <div v-else class=\"row text-center mt-5\">\r\n                  <p class=\"h6\">\r\n                    <i>No additional services.</i>\r\n                  </p>\r\n                </div>\r\n\r\n                <div class=\"row text-center mt-5\">\r\n                  <p class=\"h1\" style=\"color: black\">\r\n                    Total: ${{ getTotal }}\r\n                  </p>\r\n                </div>\r\n\r\n              </div>\r\n              <div class=\"col-3\"></div>\r\n              <div class=\"d-flex pt-3 justify-content-center\">\r\n                <router-link :to=\"'/client/RentalProfile/' + this.$route.params.type + '-' + this.$route.params.id\" class=\"btn btn-red mt-3 me-1\">Cancel</router-link>\r\n                <button id=\"book\" type=\"button\" class=\"btn mt-3\" @click.prevent=\"book\">Submit</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-2\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {DatePicker} from \"v-calendar\";\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"ClientReservationPage\",\r\n  components: {DatePicker},\r\n  data() {\r\n    return {\r\n      date: new Date(),\r\n      excluded: [],\r\n      dateIsSelected: true,\r\n      isEquipmentNeeded: false,\r\n      additionalServices: [],\r\n      checkedServices: [],\r\n      price: 0,\r\n      total: 0,\r\n      range: {\r\n        start: null,\r\n        end: null\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    addOrSubtractServicePrice(service, index) {\r\n      let s = document.getElementById('service'+index);\r\n      if(s.checked) {\r\n        this.total += service.price;\r\n        this.checkedServices.push(service);\r\n      }\r\n      else {\r\n        this.total -= service.price;\r\n        this.checkedServices = this.checkedServices.filter(function (s) {\r\n          return s.id !== service.id;\r\n        });\r\n      }\r\n    },\r\n    round(num, places) {\r\n      const round = (num, places) => {\r\n        if (!(\"\" + num).includes(\"e\")) {\r\n          return +(Math.round(num + \"e+\" + places) + \"e-\" + places);\r\n        }\r\n        else {\r\n          let arr = (\"\" + num).split(\"e\");\r\n          let sig = \"\"\r\n          if (+arr[1] + places > 0) {\r\n            sig = \"+\";\r\n          }\r\n\r\n          return +(Math.round(+arr[0] + \"e\" + sig + (+arr[1] + places)) + \"e-\" + places);\r\n        }\r\n      }\r\n      return round(num, places);\r\n    },\r\n    isDataEntered() {\r\n      if(this.$route.params.type === 'Adventure') {\r\n        if (this.date === null) {\r\n          this.dateIsSelected = false;\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n        if (this.range.start === null) {\r\n          this.dateIsSelected = false;\r\n          return false;\r\n        }\r\n      }\r\n      this.dateIsSelected = true\r\n      return true;\r\n    },\r\n    book() {\r\n      console.log(this.range);\r\n        if (this.isDataEntered()) {\r\n          let startDate, endDate;\r\n          if(this.$route.params.type === 'Adventure') {\r\n            startDate = this.date;\r\n            endDate = this.date;\r\n          }\r\n          else {\r\n            startDate = this.range.start;\r\n            endDate = this.range.end;\r\n          }\r\n          const dto = {\r\n            rentalId: this.$route.params.id,\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            isEquipmentNeeded: this.isEquipmentNeeded,\r\n            additionalServices: this.checkedServices,\r\n            total: this.getTotal\r\n          };\r\n          axios.post(\"/Reservations/book\", dto, {\r\n            headers: {\r\n              Authorization: \"Bearer \" + store.getters.access_token,\r\n            }\r\n          })\r\n              .then(() => {\r\n                document.getElementById('book').disabled=true;\r\n                this.$notify( {\r\n                  title: \"Successful reservation\",\r\n                  text: \"You have successfully booked appointment.\",\r\n                  position: \"bottom right\",\r\n                  type: \"success\"\r\n                });\r\n              })\r\n              .catch(() => {\r\n                this.$notify({\r\n                  title: \"Server error\",\r\n                  text: \"Server is currently off. Please try again later...\",\r\n                  type: \"error\"\r\n                });\r\n              })\r\n        }\r\n    }\r\n  },\r\n  computed: {\r\n    getTotal() {\r\n      let days = this.getNumberOfDays;\r\n      let rentingPrice = this.price*days;\r\n      return this.round(this.total + rentingPrice, 2);\r\n    },\r\n    getNumberOfDays() {\r\n      if(this.$route.params.type === 'Adventure') {\r\n        if(!this.date) return 0;\r\n        return 1\r\n      }\r\n      if(!this.range.start) return 0;\r\n      let initDate = this.range.start, termDate = this.range.end;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      date1.setHours(0, 0, 0);\r\n      date2.setHours(0, 0, 0);\r\n      let timeDiff = date2.getTime() - date1.getTime();\r\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\r\n      return daysDiff + 1;\r\n    },\r\n  },\r\n  mounted() {\r\n    axios.get(\"/Reservations/getLimits\", {\r\n      headers: {\r\n        Authorization: \"Bearer \" + store.getters.access_token,\r\n      },\r\n      params: {\r\n        rentalId: this.$route.params.id,\r\n        ownerId: this.$route.params.ownerId,\r\n      }\r\n    })\r\n        .then((response) => {\r\n          const dto = response.data;\r\n          this.additionalServices = dto.additionalServices;\r\n          this.price = dto.price;\r\n          this.excluded.push({start:new Date(dto.ownerInitDate), end:new Date(dto.ownerTermDate)});\r\n          this.excluded.push({start:null, end:new Date()});\r\n          this.excluded.push({start:new Date(dto.rentalTermDate), end:null});\r\n          for (let i = 0; i < dto.reservationsPeriods.length; i++) {\r\n            this.excluded.push({start:new Date(dto.reservationsPeriods[i].start), end:new Date(dto.reservationsPeriods[i].end)})\r\n          }\r\n        })\r\n        .catch()\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nlabel, small {\r\n  max-width: 400px;\r\n}\r\n\r\nh3 {\r\n  text-align: center;\r\n}\r\n\r\np {\r\n  color: #e23c52;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}