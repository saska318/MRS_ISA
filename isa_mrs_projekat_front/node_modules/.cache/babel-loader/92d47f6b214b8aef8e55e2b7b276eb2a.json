{"ast":null,"code":"import { faCalendarDay, faArrowRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { DatePicker } from \"v-calendar\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nlibrary.add(faCalendarDay, faArrowRight);\nexport default {\n  name: \"VacationRentalSpecialOffer\",\n  components: {\n    DatePicker,\n    FontAwesomeIcon\n  },\n\n  data() {\n    return {\n      initDate: null,\n      termDate: null,\n      capacity: null,\n      discount: null,\n      includedServices: [],\n      range: {\n        start: null,\n        end: null\n      },\n      includedService: {\n        name: null\n      },\n      serviceAlreadyExists: false,\n      capacityIsEntered: true,\n      discountIsEntered: true\n    };\n  },\n\n  computed: {\n    accessToken() {\n      return store.state.access_token;\n    },\n\n    isCapacityEntered() {\n      return Boolean(this.capacity);\n    },\n\n    isDiscountEntered() {\n      return Boolean(this.discount);\n    }\n\n  },\n  methods: {\n    addIncludedService() {\n      if (this.includedService.name.trim() !== \"\") {\n        if (this.includedServices.indexOf(this.includedService.name.trim()) === -1) {\n          this.includedServices.push(this.includedService);\n          this.includedService = {\n            name: \"\"\n          };\n          this.serviceAlreadyExists = false;\n        } else {\n          this.serviceAlreadyExists = true;\n        }\n      }\n    },\n\n    removeIncludedService(serviceName) {\n      this.includedServices.splice(this.includedServices.indexOf(serviceName), 1);\n    },\n\n    isDataEntered() {\n      if (!this.isCapacityEntered) {\n        this.capacityIsEntered = false;\n        return false;\n      }\n\n      if (!this.isDiscountEntered) {\n        this.discountIsEntered = false;\n        return false;\n      }\n\n      return true;\n    },\n\n    submit() {\n      if (this.isDataEntered()) {\n        this.confirm();\n      }\n    },\n\n    confirm() {\n      this.range.start.setTime(this.range.start.getTime());\n      this.range.end.setTime(this.range.end.getTime());\n      this.initDate = this.range.start;\n      this.termDate = this.range.end;\n      axios.post(\"/RentalObjects/addSpecialOfferVacationRental\", {\n        rentalId: this.$route.params.id,\n        initDate: this.initDate,\n        termDate: this.termDate,\n        discount: this.discount,\n        capacity: this.capacity,\n        includedServices: this.includedServices\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + this.accessToken\n        }\n      }).then(() => {\n        this.$notify({\n          title: \"Define special offer\",\n          text: \"You have successfully defined the special offer.\",\n          type: \"success\"\n        });\n        this.$emit(\"requestManaged\");\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"Rental Object Not Found\",\n            text: \"Rental object the specified id does not exist!\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later...\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["faCalendarDay","faArrowRight","library","FontAwesomeIcon","DatePicker","axios","store","add","name","components","data","initDate","termDate","capacity","discount","includedServices","range","start","end","includedService","serviceAlreadyExists","capacityIsEntered","discountIsEntered","computed","accessToken","state","access_token","isCapacityEntered","Boolean","isDiscountEntered","methods","addIncludedService","trim","indexOf","push","removeIncludedService","serviceName","splice","isDataEntered","submit","confirm","setTime","getTime","post","rentalId","$route","params","id","headers","Authorization","then","$notify","title","text","type","$emit","catch","error","response","status"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\VacationRentalOwner\\VacationRentalOwnerPage\\components\\VacationRentalSpecialOffer.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5 mb-5\">\r\n      <div class=\"container px-4 py-3 rounded form\" spellcheck=\"false\" >\r\n        <div class=\"container-fluid\">\r\n          <h3>Special offer</h3>\r\n          <div class=\"row main justify-content-center\">\r\n            <div class=\"row main\">\r\n              <div class=\"col-2\"></div>\r\n              <div class=\"col-8\">\r\n\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label>Init date of special offer</label>\r\n                  </div>\r\n                  <div class=\"container p-0 m-0 text-center\" style=\"max-width: 400px\">\r\n                    <date-picker v-model=\"range\" mode=\"dateTime\" is-range is24hr :firstDayOfWeek=2>\r\n                    </date-picker>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"capacity\">Capacity</label>\r\n                  </div>\r\n                  <input type=\"number\" v-model=\"capacity\" step=\"any\" min=\"0\"  id=\"capacity\" class=\"form-control\" placeholder=\"Max people\" @input=\"capacityIsEntered=true\">\r\n                  <p v-if='!capacityIsEntered'>'Capacity' is a mandatory field.</p>\r\n                </div>\r\n\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"discount\">Discount</label>\r\n                  </div>\r\n                  <input type=\"number\" v-model=\"discount\" step=\"any\" min=\"0\"  id=\"discount\" class=\"form-control\" placeholder=\"Discount in %\" @input=\"discountIsEntered=true\">\r\n                  <p v-if='!discountIsEntered'>'Discount' is a mandatory field.</p>\r\n                </div>\r\n\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <label for=\"includedServices\">Included services</label>\r\n                  </div>\r\n                  <input class=\"form-control\" v-model=\"includedService.name\" type=\"text\" id=\"includedServices\" placeholder=\"E.g. WiFi\" @keyup.enter=\"addIncludedService\">\r\n                  <div class=\"row justify-content-center\">\r\n                    <small class=\"form-text text-muted\">\r\n                      Press Enter to add service\r\n                    </small>\r\n                  </div>\r\n                  <div class=\"row tag-container\">\r\n                    <p v-if='serviceAlreadyExists'>Service already exists.</p>\r\n                    <div class=\"includedServices-tag rounded-pill mt-1 ms-1 p-1\" v-for=\"(includedService, index) in includedServices\" :key=\"index\">\r\n                      {{includedService.name}}\r\n                      <button class=\"tag-button text-center\" @click=\"removeIncludedService(includedService)\"><font-awesome-icon icon=\"x\" style=\"width: 9px; height: 9px\"></font-awesome-icon></button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"d-flex pt-3 justify-content-center\">\r\n            <button type=\"button\" class=\"btn mt-3\" @click=\"submit\">Define</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {faCalendarDay, faArrowRight} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport {DatePicker} from \"v-calendar\"\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\nlibrary.add(faCalendarDay, faArrowRight)\r\n\r\nexport default {\r\n  name: \"VacationRentalSpecialOffer\",\r\n  components: {\r\n    DatePicker,\r\n    FontAwesomeIcon\r\n  },\r\n  data() {\r\n    return {\r\n      initDate: null,\r\n      termDate: null,\r\n      capacity: null,\r\n      discount: null,\r\n      includedServices: [],\r\n      range: {\r\n        start: null,\r\n        end: null\r\n      },\r\n      includedService: {name: null},\r\n      serviceAlreadyExists: false,\r\n      capacityIsEntered: true,\r\n      discountIsEntered: true\r\n    };\r\n  },\r\n  computed: {\r\n    accessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    isCapacityEntered() {\r\n      return Boolean(this.capacity);\r\n    },\r\n    isDiscountEntered() {\r\n      return Boolean(this.discount);\r\n    }\r\n  },\r\n  methods: {\r\n    addIncludedService() {\r\n      if (this.includedService.name.trim() !== \"\") {\r\n        if (this.includedServices.indexOf(this.includedService.name.trim()) === -1) {\r\n          this.includedServices.push(this.includedService);\r\n          this.includedService = {name: \"\"};\r\n          this.serviceAlreadyExists=false;\r\n        }\r\n        else {\r\n          this.serviceAlreadyExists=true;\r\n        }\r\n      }\r\n    },\r\n    removeIncludedService(serviceName) {\r\n      this.includedServices.splice(this.includedServices.indexOf(serviceName), 1);\r\n    },\r\n    isDataEntered(){\r\n      if(!this.isCapacityEntered){\r\n        this.capacityIsEntered = false;\r\n        return false;\r\n      }\r\n      if(!this.isDiscountEntered){\r\n        this.discountIsEntered = false;\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    submit(){\r\n      if(this.isDataEntered()){\r\n        this.confirm();\r\n      }\r\n    },\r\n    confirm() {\r\n      this.range.start.setTime(this.range.start.getTime());\r\n      this.range.end.setTime(this.range.end.getTime());\r\n      this.initDate = this.range.start;\r\n      this.termDate = this.range.end;\r\n      axios.post(\"/RentalObjects/addSpecialOfferVacationRental\", {rentalId: this.$route.params.id, initDate: this.initDate, termDate: this.termDate, discount: this.discount, capacity: this.capacity, includedServices: this.includedServices},\r\n          {\r\n            headers: {\r\n              Authorization: \"Bearer \" + this.accessToken,\r\n            }\r\n          })\r\n          .then(()=> {\r\n            this.$notify({\r\n              title: \"Define special offer\",\r\n              text: \"You have successfully defined the special offer.\",\r\n              type: \"success\"\r\n            });\r\n            this.$emit(\"requestManaged\");\r\n          })\r\n          .catch((error) =>{\r\n            if (error.response.status===404) {\r\n              this.$notify({\r\n                title: \"Rental Object Not Found\",\r\n                text: \"Rental object the specified id does not exist!\" ,\r\n                type: \"warn\"\r\n              })\r\n            } else if (error.response.status===500) {\r\n              this.$notify({\r\n                title: \"Internal Server Error\",\r\n                text: \"Something went wrong on the server! Please try again later...\",\r\n                type: \"error\"\r\n              })\r\n            }\r\n          })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.form-control {\r\n  border-left: none;\r\n}\r\n\r\n.input-group-text font-awesome-icon {\r\n  display: table-cell;\r\n  vertical-align: middle;\r\n}\r\n\r\nh3 {\r\n  text-align: center;\r\n}\r\n\r\nlabel, small, .tag-container, p {\r\n  max-width: 400px;\r\n}\r\n\r\ninput {\r\n  max-width: 400px;\r\n}\r\n\r\ninput::placeholder {\r\n  color: grey;\r\n}\r\n\r\n.includedServices-tag {\r\n  background-color: #008970;\r\n  color: #99EEDF;\r\n  width: fit-content;\r\n  font-size: 12px;\r\n}\r\n\r\n.includedServices-tag:hover   {\r\n  background-color: #99EEDF;\r\n  color: #008970;\r\n  width: fit-content;\r\n  font-size: 12px;\r\n}\r\n\r\n.includedServices-tag:hover .tag-button {\r\n  background-color: transparent;\r\n  color: #008970;\r\n  border: none;\r\n}\r\n\r\n.tag-button {\r\n  background-color: transparent;\r\n  color: #99EEDF;\r\n  border: none;\r\n}\r\n\r\np {\r\n  color: #e23c52;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}