{"ast":null,"code":"import { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faUserSlash } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios/index\";\nimport store from \"@/store\";\nlibrary.add(faUserSlash);\nexport default {\n  name: \"AccountDeletionForm\",\n  components: {\n    FontAwesomeIcon\n  },\n\n  data() {\n    return {\n      passwordConfirmation: '',\n      enteredRequest: ''\n    };\n  },\n\n  methods: {\n    submitRequest() {\n      axios.post(\"/Requests/delAcc\", {\n        email: this.email,\n        password: this.passwordConfirmation,\n        enteredRequest: this.enteredRequest,\n        requestType: 'AccountDeletion'\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + this.accessToken\n        }\n      }).then(() => {\n        this.$notify({\n          title: \"Account deletion Notification\",\n          text: \"Request to delete account successfully sent.\",\n          position: \"bottom right\",\n          type: \"success\"\n        });\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"User not found\",\n            text: \"User with the specified e-mail was not found!\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 401) {\n          this.$notify({\n            title: \"Authorization Failed\",\n            text: \"Password is not valid!\",\n            type: \"error\"\n          });\n        } else if (error.response.status === 400) {\n          this.$notify({\n            title: \"Invalid Request Status\",\n            text: \"Request status does not have the right form!\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later.\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  },\n  computed: {\n    isDisabled() {\n      return this.enteredRequest.length < 30;\n    },\n\n    isFilled() {\n      return this.passwordConfirmation !== '';\n    },\n\n    accessToken() {\n      return store.state.access_token;\n    },\n\n    email() {\n      return store.state.email;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqDA,SAAQA,eAAR,QAA8B,8BAA9B;AACA,SAASC,OAAT,QAAwB,mCAAxB;AACA,SAASC,WAAT,QAA4B,mCAA5B;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEAH,OAAO,CAACI,GAAR,CAAYH,WAAZ;AACA,eAAe;AACbI,MAAI,EAAE,qBADO;AAEbC,YAAU,EAAE;AACVP;AADU,GAFC;;AAKbQ,MAAI,GAAG;AACL,WAAO;AACLC,0BAAoB,EAAE,EADjB;AAELC,oBAAc,EAAE;AAFX,KAAP;AAID,GAVY;;AAWbC,SAAO,EAAE;AACPC,iBAAY,GAAK;AACfT,WAAK,CAACU,IAAN,CAAW,kBAAX,EAA+B;AAC7BC,aAAK,EAAE,KAAKA,KADiB;AAE7BC,gBAAQ,EAAE,KAAKN,oBAFc;AAG7BC,sBAAc,EAAE,KAAKA,cAHQ;AAI7BM,mBAAW,EAAE;AAJgB,OAA/B,EAKG;AACDC,eAAO,EAAE;AACPC,uBAAa,EAAE,YAAY,KAAKC;AADzB;AADR,OALH,EAUCC,IAVD,CAUM,MAAM;AACV,aAAKC,OAAL,CAAc;AACZC,eAAK,EAAE,+BADK;AAEZC,cAAI,EAAE,8CAFM;AAGZC,kBAAQ,EAAE,cAHE;AAIZC,cAAI,EAAE;AAJM,SAAd;AAMD,OAjBD,EAkBCC,KAlBD,CAkBSC,KAAD,IAAU;AAChB,YAAGA,KAAK,CAACC,QAAN,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7B,eAAKR,OAAL,CAAa;AACXC,iBAAK,EAAE,gBADI;AAEXC,gBAAI,EAAE,+CAFK;AAGXE,gBAAI,EAAE;AAHK,WAAb;AAKF,SANA,MAMO,IAAGE,KAAK,CAACC,QAAN,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AACpC,eAAKR,OAAL,CAAa;AACXC,iBAAK,EAAE,sBADI;AAEXC,gBAAI,EAAE,wBAFK;AAGXE,gBAAI,EAAE;AAHK,WAAb;AAKF,SANO,MAMA,IAAGE,KAAK,CAACC,QAAN,CAAeC,MAAf,KAAwB,GAA3B,EAAgC;AACrC,eAAKR,OAAL,CAAa;AACXC,iBAAK,EAAE,wBADI;AAEXC,gBAAI,EAAE,8CAFK;AAGXE,gBAAI,EAAE;AAHK,WAAb;AAKF,SANO,MAMA,IAAGE,KAAK,CAACC,QAAN,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AACpC,eAAKR,OAAL,CAAa;AACXC,iBAAK,EAAE,uBADI;AAEXC,gBAAI,EAAC,6DAFM;AAGXE,gBAAI,EAAE;AAHK,WAAb;AAKF;AACD,OA5CD;AA6CF;;AA/CO,GAXI;AA4DbK,UAAQ,EAAE;AACRC,cAAU,GAAG;AACX,aAAO,KAAKrB,cAAL,CAAoBsB,MAApB,GAA6B,EAApC;AACD,KAHO;;AAIRC,YAAQ,GAAG;AACT,aAAO,KAAKxB,oBAAL,KAA8B,EAArC;AACD,KANO;;AAORU,eAAW,GAAE;AACX,aAAOf,KAAK,CAAC8B,KAAN,CAAYC,YAAnB;AACD,KATO;;AAURrB,SAAK,GAAE;AACL,aAAOV,KAAK,CAAC8B,KAAN,CAAYpB,KAAnB;AACF;;AAZQ;AA5DG,CAAf","names":["FontAwesomeIcon","library","faUserSlash","axios","store","add","name","components","data","passwordConfirmation","enteredRequest","methods","submitRequest","post","email","password","requestType","headers","Authorization","accessToken","then","$notify","title","text","position","type","catch","error","response","status","computed","isDisabled","length","isFilled","state","access_token"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\GeneralComponents\\UserAccountForms\\AccountDeletionForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5 mb-5\">\r\n      <div class=\"container px-4 py-3 rounded form\" spellcheck=\"false\" >\r\n        <div class=\"container-fluid\">\r\n          <div class=\"form-text\">\r\n            <font-awesome-icon class=\"d-inline-block\" icon=\"user-slash\" style=\"color:#008970; height: 28px\"></font-awesome-icon>\r\n            <h3 class=\"d-inline-block\" style=\"color: #008970\">Account Deletion</h3>\r\n          </div>\r\n          <div class=\"row main justify-content-center\">\r\n            <div class=\"row main\">\r\n              <div class=\"col-2\"></div>\r\n              <div class=\"col-8\">\r\n\r\n                <div class=\"form-group\">\r\n                  <textarea id=\"enteredRequest\" v-model=\"enteredRequest\" class=\"form-control\" placeholder=\"Please enter a request...\" maxlength=\"255\"></textarea>\r\n                  <p style=\"color: red; font-size: small\" v-if=\"enteredRequest.length === 255\">Oops! The maximum number of characters is 255.</p>\r\n                </div>\r\n\r\n                <button type=\"button\" class=\"btn btn-default\" :disabled='isDisabled' data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\r\n                  Submit\r\n                </button>\r\n\r\n                <div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"Label\" aria-hidden=\"true\">\r\n                  <div class=\"modal-dialog\">\r\n                    <div class=\"modal-content\">\r\n                      <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"Label\" style=\"color: #3f5b25\">Password confirmation</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                      </div>\r\n                      <div class=\"modal-body\">\r\n                        <input type=\"password\" id=\"inputPassword\" v-model=\"passwordConfirmation\" placeholder=\"Please enter password...\">\r\n                        <p style=\"color: red; font-size: small\" v-if=\"!isFilled\">You must enter a password.</p>\r\n                      </div>\r\n                      <div class=\"modal-footer\">\r\n                        <button class=\"btn btn-default\" id=\"button\" @click.prevent=\"submitRequest\" :disabled='!isFilled' style=\"color: #378220\">\r\n                          Submit\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faUserSlash } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios/index\";\r\nimport store from \"@/store\";\r\n\r\nlibrary.add(faUserSlash);\r\nexport default {\r\n  name: \"AccountDeletionForm\",\r\n  components: {\r\n    FontAwesomeIcon\r\n  },\r\n  data() {\r\n    return {\r\n      passwordConfirmation: '',\r\n      enteredRequest: ''\r\n    }\r\n  },\r\n  methods: {\r\n    submitRequest () {\r\n      axios.post(\"/Requests/delAcc\", {\r\n        email: this.email,\r\n        password: this.passwordConfirmation,\r\n        enteredRequest: this.enteredRequest,\r\n        requestType: 'AccountDeletion'\r\n      }, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.accessToken\r\n        }\r\n      })\r\n      .then(() => {\r\n        this.$notify( {\r\n          title: \"Account deletion Notification\",\r\n          text: \"Request to delete account successfully sent.\",\r\n          position: \"bottom right\",\r\n          type: \"success\"\r\n        });\r\n      })\r\n      .catch ((error) =>{\r\n        if(error.response.status===404){\r\n          this.$notify({\r\n            title: \"User not found\",\r\n            text: \"User with the specified e-mail was not found!\",\r\n            type: \"warn\"\r\n          })\r\n        } else if(error.response.status===401){\r\n          this.$notify({\r\n            title: \"Authorization Failed\",\r\n            text: \"Password is not valid!\",\r\n            type: \"error\"\r\n          })\r\n        } else if(error.response.status===400) {\r\n          this.$notify({\r\n            title: \"Invalid Request Status\",\r\n            text: \"Request status does not have the right form!\",\r\n            type: \"warn\"\r\n          })\r\n        } else if(error.response.status===500){\r\n          this.$notify({\r\n            title: \"Internal Server Error\",\r\n            text:\"Something went wrong on the server! Please try again later.\",\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    isDisabled() {\r\n      return this.enteredRequest.length < 30;\r\n    },\r\n    isFilled() {\r\n      return this.passwordConfirmation !== '';\r\n    },\r\n    accessToken(){\r\n      return store.state.access_token;\r\n    },\r\n    email(){\r\n      return store.state.email;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nform {\r\n  background-color: #fcfcfc;\r\n  outline: solid 2px #008970;\r\n  margin-top: 40px;\r\n  color: #008970;\r\n}\r\n\r\ntextarea {\r\n  height: 300px;\r\n  min-height: 100px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}