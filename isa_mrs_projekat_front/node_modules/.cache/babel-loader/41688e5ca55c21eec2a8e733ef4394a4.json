{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3d10dc93\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"row\"\n};\nconst _hoisted_2 = {\n  class: \"col-md-7\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"col-md-5 p-3 d-flex flex-grow-1 justify-content-center align-items-center\",\n  style: {\n    \"height\": \"25vh\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_6 = {\n  class: \"row\"\n};\nconst _hoisted_7 = [\"data-bs-target\"];\nconst _hoisted_8 = {\n  class: \"row\"\n};\nconst _hoisted_9 = [\"data-bs-target\"];\nconst _hoisted_10 = {\n  class: \"row\"\n};\nconst _hoisted_11 = [\"data-bs-target\"];\nconst _hoisted_12 = {\n  class: \"row\"\n};\nconst _hoisted_13 = {\n  class: \"row\"\n};\nconst _hoisted_14 = {\n  class: \"rentalObjectName align-items-center text-start\",\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_15 = {\n  class: \"display-6 me-1 card-title cut-text\"\n};\n\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_17 = {\n  class: \"row\"\n};\nconst _hoisted_18 = {\n  class: \"h5\"\n};\n\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", {\n  style: {\n    \"color\": \"#008970\"\n  }\n}, \"Date:\", -1\n/* HOISTED */\n));\n\nconst _hoisted_20 = {\n  class: \"row\"\n};\nconst _hoisted_21 = {\n  class: \"h5\"\n};\n\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", {\n  style: {\n    \"color\": \"#008970\"\n  }\n}, \"Profit:\", -1\n/* HOISTED */\n));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_InstructorClientPreview = _resolveComponent(\"InstructorClientPreview\");\n\n  const _component_InstructorReservationReview = _resolveComponent(\"InstructorReservationReview\");\n\n  const _component_InstructorReservationReport = _resolveComponent(\"InstructorReservationReport\");\n\n  return _openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.reservations, (reservation, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: i,\n      class: \"card reservation mb-3 px-0\"\n    }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_link, {\n      to: $options.getPath(reservation),\n      class: \"link\",\n      onClick: $event => $options.setRentalIdAndType(reservation)\n    }, {\n      default: _withCtx(() => [$props.images[i] ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        class: \"rentalPhoto\",\n        src: $props.images[i],\n        alt: \"\"\n      }, null, 8\n      /* PROPS */\n      , _hoisted_3)) : _createCommentVNode(\"v-if\", true)]),\n      _: 2\n      /* DYNAMIC */\n\n    }, 1032\n    /* PROPS, DYNAMIC_SLOTS */\n    , [\"to\", \"onClick\"])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n      class: \"w-100 btn mb-2\",\n      style: {\n        \"font-weight\": \"500\",\n        \"color\": \"white\"\n      },\n      \"data-bs-toggle\": \"modal\",\n      \"data-bs-target\": '#clientProfile-' + reservation.id\n    }, \" Client Preview \", 8\n    /* PROPS */\n    , _hoisted_7), _createVNode(_component_InstructorClientPreview, {\n      client: reservation.client,\n      reservationId: reservation.id\n    }, null, 8\n    /* PROPS */\n    , [\"client\", \"reservationId\"])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n      class: \"w-100 btn mb-2\",\n      style: {\n        \"font-weight\": \"500\",\n        \"background-color\": \"#ffd055\",\n        \"color\": \"white\"\n      },\n      \"data-bs-toggle\": \"modal\",\n      \"data-bs-target\": '#review-' + reservation.id\n    }, \" Review \", 8\n    /* PROPS */\n    , _hoisted_9), _createVNode(_component_InstructorReservationReview, {\n      id: reservation.id,\n      reviews: reservation.reviews,\n      resId: reservation.id\n    }, null, 8\n    /* PROPS */\n    , [\"id\", \"reviews\", \"resId\"])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n      class: \"w-100 btn\",\n      style: {\n        \"background-color\": \"#e23c52\",\n        \"border\": \"1px solid #e23c52\",\n        \"font-weight\": \"500\",\n        \"color\": \"white\"\n      },\n      \"data-bs-toggle\": \"modal\",\n      \"data-bs-target\": '#report-' + reservation.id\n    }, \" Report \", 8\n    /* PROPS */\n    , _hoisted_11), _createVNode(_component_InstructorReservationReport, {\n      id: reservation.id,\n      resId: reservation.id,\n      reports: reservation.reports\n    }, null, 8\n    /* PROPS */\n    , [\"id\", \"resId\", \"reports\"])])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", null, [_createElementVNode(\"h1\", _hoisted_15, _toDisplayString(reservation.rentalObject.name), 1\n    /* TEXT */\n    )]), _hoisted_16])]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"p\", _hoisted_18, [_hoisted_19, _createTextVNode(\" \" + _toDisplayString($options.getDateSpan(reservation)), 1\n    /* TEXT */\n    )])]), _createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"p\", _hoisted_21, [_hoisted_22, _createTextVNode(\" $\" + _toDisplayString(($options.calculateTotal(reservation) - reservation.income.value).toFixed(2)), 1\n    /* TEXT */\n    )])])])])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","style","_createElementVNode","_createElementBlock","_Fragment","_renderList","$props","reservation","i","key","_createVNode","_component_router_link","to","$options","onClick","src","alt","id","_hoisted_7","_component_InstructorClientPreview","client","reservationId","_hoisted_9","_component_InstructorReservationReview","reviews","resId","_hoisted_11","_component_InstructorReservationReport","reports","_toDisplayString","rentalObject","name","_hoisted_16","_hoisted_19","_hoisted_22","income","value","toFixed"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\FishingInstructor\\FishingInstructorPage\\components\\InstructorMainViews\\InstructorReservations\\InstructorReservationHistory\\InstructorReservationHistory.vue"],"sourcesContent":["<template>\r\n  <div v-for=\"(reservation, i) in reservations\" :key=\"i\" class=\"card reservation mb-3 px-0\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-7\" >\r\n        <router-link :to=\"getPath(reservation)\" class=\"link\" @click=\"setRentalIdAndType(reservation)\">\r\n          <img v-if=\"images[i]\" class=\"rentalPhoto\" :src=\"images[i]\" alt=\"\"/>\r\n        </router-link>\r\n      </div>\r\n\r\n      <div class=\"col-md-5 p-3 d-flex flex-grow-1 justify-content-center align-items-center\" style=\"height: 25vh;\">\r\n        <div style=\"width: 100%;\">\r\n          <div class=\"row\">\r\n            <button class=\"w-100 btn mb-2\" style=\"font-weight: 500; color: white;\" data-bs-toggle=\"modal\"\r\n                    :data-bs-target=\"'#clientProfile-'+reservation.id\">\r\n              Client Preview\r\n            </button>\r\n            <InstructorClientPreview :client=\"reservation.client\"\r\n                                     :reservationId=\"reservation.id\"/>\r\n          </div>\r\n          <div class=\"row\">\r\n            <button class=\"w-100 btn mb-2\" style=\"font-weight: 500; background-color:#ffd055; color: white;\" data-bs-toggle=\"modal\"\r\n                    :data-bs-target=\"'#review-'+reservation.id\">\r\n              Review\r\n            </button>\r\n            <InstructorReservationReview :id=\"reservation.id\"\r\n                                         :reviews=\"reservation.reviews\"\r\n                                         :resId=\"reservation.id\"/>\r\n          </div>\r\n          <div class=\"row\">\r\n            <button class=\"w-100 btn\" style=\"background-color:#e23c52; border: 1px solid #e23c52;\r\n                            font-weight: 500; color: white;\" data-bs-toggle=\"modal\"\r\n                    :data-bs-target=\"'#report-'+reservation.id\">\r\n              Report\r\n            </button>\r\n            <InstructorReservationReport :id=\"reservation.id\"\r\n                                         :resId=\"reservation.id\"\r\n                                         :reports=\"reservation.reports\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"row\">\r\n          <div class=\"rentalObjectName align-items-center text-start\" style=\"display: flex;\">\r\n            <div>\r\n              <h1 class=\"display-6 me-1 card-title cut-text\">{{ reservation.rentalObject.name }}</h1>\r\n            </div>\r\n            <hr>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <p class=\"h5\" ><strong style=\"color:#008970;\">Date:</strong> {{  getDateSpan(reservation) }}</p>\r\n        </div>\r\n        <div class=\"row\">\r\n          <p class=\"h5\"><strong style=\"color:#008970;\">Profit:</strong> ${{ (calculateTotal(reservation)-reservation.income.value).toFixed(2) }}</p>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport InstructorClientPreview\r\n  from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorClientPreview\";\r\nimport InstructorReservationReview\r\n  from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorReservationReview\";\r\nimport InstructorReservationReport\r\n  from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorReservationReport\";\r\n\r\nexport default {\r\n  name: \"InstructorReservationHistory\",\r\n  props: [\"reservations\", \"images\"],\r\n  components: {InstructorReservationReport, InstructorReservationReview, InstructorClientPreview},\r\n  data() {\r\n    return {\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setRentalIdAndType(reservation) {\r\n      this.$store.dispatch(\"rentalId\", reservation.rentalObject.id);\r\n      this.$store.dispatch(\"rentalType\", reservation.rentalObject.rentalObjectType);\r\n    },\r\n    getPath(reservation) {\r\n      return \"/fishingInstructor/Adventure/\" + reservation.rentalObject.id;\r\n    },\r\n    showAdventureProfile(id) {\r\n      return this.$router.push('/fishingInstructor/Adventure/' + id);\r\n    },\r\n    getDateSpan(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      let dateDisplay = date1.getDate() + '.' + (date1.getMonth() + 1) + '.' +  date1.getFullYear() + '.';\r\n      if(date1.getFullYear() !== date2.getFullYear() || date1.getMonth() !== date2.getMonth() || date1.getDate() !== date2.getDate())\r\n        dateDisplay += ' - ' + date2.getDate() + '.' + (date2.getMonth() + 1) + '.' +  date2.getFullYear() + '.';\r\n      return dateDisplay;\r\n    },\r\n    isFeeNull(reservation) {\r\n      return reservation.rentalObject.cancellationFee !== null;\r\n    },\r\n    calculateTotal(reservation) {\r\n      let days = this.getNumberOfDays(reservation);\r\n      let services = this.calculateAdditionalServices(reservation);\r\n      let price = reservation.price;\r\n      if(reservation.specialOffer !== undefined && reservation.specialOffer !== null) {\r\n        return (days*price)/100 * (100-reservation.specialOffer.discount);\r\n      }\r\n      return days*price+services;\r\n    },\r\n    getNumberOfDays(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      date1.setHours(0, 0, 0);\r\n      date2.setHours(0, 0, 0);\r\n      let timeDiff = date2.getTime() - date1.getTime();\r\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\r\n      return daysDiff + 1;\r\n    },\r\n    calculateAdditionalServices(reservation) {\r\n      let services = reservation.additionalServices, totalServices = 0;\r\n      for(let i=0; i<services.length; i++) totalServices += services[i].price;\r\n      return totalServices;\r\n    },\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nhr {\r\n  flex-grow: 1;\r\n}\r\n.cut-text {\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\ndiv.rentalObjectName {\r\n  display: flex;\r\n}\r\ndiv.reservation {\r\n  box-shadow: 0.1rem 0.1rem 0.4rem rgb(0 0 0 / 15%);\r\n  background-color: #ffffff;\r\n}\r\ndiv.reservation:hover {\r\n  padding: 3px;\r\n}\r\nimg.rentalPhoto {\r\n  height: 25vh;\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  object-fit: cover;\r\n  object-position: center;\r\n}\r\n.card {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: fit-content;\r\n  width: 33%;\r\n  min-width: 0;\r\n  word-wrap: break-word;\r\n  background-color: #fff;\r\n  background-clip: border-box;\r\n  border: none;\r\n  box-shadow: 0 0.5rem 1rem rgb(0 0 0 / 15%);\r\n  border-radius: 1rem;\r\n}\r\n.card-header:first-child {\r\n  border-radius: calc(1rem - 1px) calc(1rem - 1px) 0 0;\r\n}\r\n.card-header {\r\n  position: relative;\r\n  padding: 2rem 2rem;\r\n  border-bottom: none;\r\n  background-color: inherit;\r\n  box-shadow: 0 0.125rem 0.25rem rgb(0 0 0 / 8%);\r\n  z-index: 2;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}