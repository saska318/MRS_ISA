{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b3c3da6a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = [\"id\"];\nconst _hoisted_2 = {\n  class: \"modal-dialog modal-dialog-centered modal-dialog-scrollable\"\n};\nconst _hoisted_3 = {\n  class: \"modal-content\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"modal-header p-0 m-0\",\n  style: {\n    \"border-bottom\": \"none\"\n  }\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = {\n  class: \"modal-body pt-0 mt-0\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row text-center pb-0 mb-0\",\n  style: {\n    \"border-bottom\": \"1px solid lightgray\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"modal-title pb-1\",\n  style: {\n    \"color\": \"#ffd055\",\n    \"font-weight\": \"700\"\n  }\n}, \"Reviews\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"h5 mt-3\"\n}, \"What did you think about the client?\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"row my-0 py-0 my-3\"\n};\nconst _hoisted_9 = {\n  class: \"col-12 d-flex justify-content-center align-items-center\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  id: \"missingGradeMessage\",\n  class: \"row text-center\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"h6 mt-3\",\n  style: {\n    \"color\": \"#e23c52\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"You must select a grade.\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_12 = [_hoisted_11];\n\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"h5 mt-3 mb-3\"\n}, \"Write details and overview about this reservation:\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_14 = [\"value\"];\nconst _hoisted_15 = [\"id\", \"content\", \"disabled\"];\nconst _hoisted_16 = {\n  key: 2,\n  id: \"missingCommentMessage\",\n  class: \"row text-center\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"h6 mt-3\",\n  style: {\n    \"color\": \"#e23c52\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"You must enter reservation overview.\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_18 = [_hoisted_17];\nconst _hoisted_19 = {\n  class: \"modal-footer d-flex\",\n  style: {\n    \"border-top\": \"none\",\n    \"justify-content\": \"space-evenly\"\n  }\n};\nconst _hoisted_20 = {\n  key: 0,\n  type: \"button\",\n  class: \"btn btn-secondary\",\n  \"data-bs-dismiss\": \"modal\",\n  style: {\n    \"background-color\": \"#e23c52\",\n    \"color\": \"white\",\n    \"width\": \"40%\"\n  }\n};\nconst _hoisted_21 = [\"disabled\"];\nconst _hoisted_22 = {\n  key: 2,\n  type: \"button\",\n  class: \"btn btn-secondary w-100\",\n  \"data-bs-dismiss\": \"modal\",\n  style: {\n    \"color\": \"white\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_star_rating = _resolveComponent(\"star-rating\");\n\n  return this.reviews ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"modal fade\",\n    id: 'review-' + this.resId,\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\"\n  }, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_star_rating, {\n    \"text-class\": \"h1 my-0 font-weight-normal\",\n    \"round-start-rating\": false,\n    glow: 5,\n    \"glow-color\": \"#ffd055\",\n    \"star-size\": 50,\n    \"read-only\": $options.isReviewPresent || $data.isSaved,\n    rating: $options.getClientGrade,\n    \"onUpdate:rating\": _cache[0] || (_cache[0] = $event => this.newReviews.clientReview.grade = $event)\n  }, null, 8\n  /* PROPS */\n  , [\"read-only\", \"rating\"])]), $data.clientGradeMissing ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _hoisted_12)) : _createCommentVNode(\"v-if\", true)]), _hoisted_13, $options.isReviewPresent ? (_openBlock(), _createElementBlock(\"textarea\", {\n    key: 0,\n    id: \"ownerCommentExists\",\n    value: this.newReviews.clientReview.comment,\n    disabled: \"\",\n    rows: \"3\",\n    class: \"w-100 p-2 px-3\",\n    style: {\n      \"background-color\": \"#ffd055\",\n      \"border-radius\": \"20px\",\n      \"resize\": \"none\"\n    },\n    maxlength: \"1000\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_14)) : _createCommentVNode(\"v-if\", true), !$options.isReviewPresent ? (_openBlock(), _createElementBlock(\"textarea\", {\n    key: 1,\n    id: 'insertReservationComment-' + this.resId,\n    content: this.newReviews.clientReview.comment,\n    disabled: $data.isSaved,\n    rows: \"3\",\n    placeholder: \"Leave a review here\",\n    class: \"w-100 p-2 px-3\",\n    style: {\n      \"background-color\": \"#ffd055\",\n      \"border-radius\": \"20px\",\n      \"resize\": \"none\"\n    },\n    maxlength: \"1000\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_15)) : _createCommentVNode(\"v-if\", true), $data.reservationCommentMissing ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _hoisted_18)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_19, [!$options.isReviewPresent ? (_openBlock(), _createElementBlock(\"button\", _hoisted_20, _toDisplayString(this.closeButtonTxt), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), !$options.isReviewPresent ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    disabled: this.isSaved,\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    style: {\n      \"color\": \"white\",\n      \"width\": \"40%\"\n    },\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.save && $options.save(...args))\n  }, _toDisplayString(this.saveButtonTxt), 9\n  /* TEXT, PROPS */\n  , _hoisted_21)) : _createCommentVNode(\"v-if\", true), $options.isReviewPresent ? (_openBlock(), _createElementBlock(\"button\", _hoisted_22, \"Close\")) : _createCommentVNode(\"v-if\", true)])])])], 8\n  /* PROPS */\n  , _hoisted_1)) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","id","_hoisted_11","_hoisted_17","type","reviews","_createElementBlock","resId","_hoisted_4","_hoisted_6","_hoisted_7","_createVNode","_component_star_rating","glow","$options","$data","rating","newReviews","clientReview","grade","$event","_hoisted_12","_hoisted_13","value","comment","disabled","rows","maxlength","content","placeholder","_hoisted_18","_toDisplayString","closeButtonTxt","isSaved","onClick","saveButtonTxt","_hoisted_21"],"sourceRoot":"","sources":["C:\\Users\\Saška\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\FishingInstructor\\FishingInstructorPage\\components\\InstructorMainViews\\InstructorReservations\\InstructorReservationReview.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"this.reviews\" class=\"modal fade\" :id=\"'review-'+this.resId\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header p-0 m-0\" style=\"border-bottom: none\">\r\n        </div>\r\n        <div class=\"modal-body pt-0 mt-0\">\r\n          <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n            <h1 class=\"modal-title pb-1\" style=\"color:#ffd055; font-weight: 700;\">Reviews</h1>\r\n          </div>\r\n          <div>\r\n            <p class=\"h5 mt-3\">What did you think about the client?</p>\r\n          </div>\r\n          <div class=\"row my-0 py-0 my-3\" >\r\n            <div class=\"col-12 d-flex justify-content-center align-items-center\">\r\n              <star-rating text-class=\"h1 my-0 font-weight-normal\" :round-start-rating=\"false\"\r\n                           :glow=\"5\" glow-color=\"#ffd055\" :star-size=\"50\"\r\n                           :read-only=\"isReviewPresent || isSaved\"\r\n                           :rating=\"getClientGrade\"\r\n                           v-model:rating=\"this.newReviews.clientReview.grade\"></star-rating>\r\n            </div>\r\n            <div v-if=\"clientGradeMissing\" id=\"missingGradeMessage\" class=\"row text-center\">\r\n              <p class=\"h6 mt-3\" style=\"color: #e23c52\"><strong>You must select a grade.</strong></p>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <p class=\"h5 mt-3 mb-3\">Write details and overview about this reservation:</p>\r\n          </div>\r\n\r\n          <textarea id=\"ownerCommentExists\" v-if=\"isReviewPresent\"\r\n                    :value=\"this.newReviews.clientReview.comment\" disabled\r\n                    rows=\"3\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color:#ffd055; border-radius: 20px; resize: none;\" maxlength=\"1000\" ></textarea>\r\n\r\n          <textarea :id=\"'insertReservationComment-'+this.resId\" v-if=\"!isReviewPresent\"\r\n                    :content=\"this.newReviews.clientReview.comment\" :disabled=\"isSaved\"\r\n                    rows=\"3\" placeholder=\"Leave a review here\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color:#ffd055; border-radius: 20px; resize: none;\" maxlength=\"1000\" ></textarea>\r\n\r\n          <div v-if=\"reservationCommentMissing\" id=\"missingCommentMessage\" class=\"row text-center\">\r\n            <p class=\"h6 mt-3\" style=\"color: #e23c52\"><strong>You must enter reservation overview.</strong></p>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer d-flex\" style=\"border-top: none; justify-content: space-evenly\">\r\n          <button v-if=\"!isReviewPresent\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color: #e23c52; color: white; width: 40%\">{{ this.closeButtonTxt }}</button>\r\n          <button :disabled=\"this.isSaved\" v-if=\"!isReviewPresent\" type=\"button\" class=\"btn btn-secondary\"\r\n                  style=\"color: white; width: 40%\" @click=\"save\">{{ this.saveButtonTxt }}\r\n          </button>\r\n          <button v-if=\"isReviewPresent\" type=\"button\" class=\"btn btn-secondary w-100\" data-bs-dismiss=\"modal\"\r\n                  style=\"color: white;\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StarRating from \"vue-star-rating\";\r\n\r\nimport store from \"@/store\";\r\nimport axios from \"axios/index\";\r\n\r\nexport default {\r\n  name: \"InstructorReservationReview\",\r\n  props: [\"id\", \"reviews\", \"resId\"],\r\n  components: {StarRating},\r\n  data() {\r\n    return {\r\n      isSaved: false,\r\n      saveButtonTxt: \"Save\",\r\n      closeButtonTxt: \"Cancel\",\r\n      clientGradeMissing: false,\r\n      reservationCommentMissing: false,\r\n      // newPlaceholder: \"No comment.\",\r\n      newReviews: {\r\n        reservationId: this.resId,\r\n        clientReview: {\r\n          grade: null,\r\n          comment: null,\r\n        },\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.newReviews.clientReview.comment = this.getComment;\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.newReviews.clientReview.comment = document.getElementById(\"insertReservationComment-\"+this.resId).value;\r\n      if(!this.saveChecks()) this.saveReview();\r\n    },\r\n    saveChecks() {\r\n      this.clientGradeMissing = false;\r\n      this.reservationCommentMissing = false;\r\n      if(this.newReviews.clientReview.grade === null) this.clientGradeMissing = true;\r\n      if(this.newReviews.clientReview.comment === \"\") this.reservationCommentMissing = true;\r\n      return this.clientGradeMissing || this.reservationCommentMissing;\r\n    },\r\n    saveReview() {\r\n      axios.post(\"/Reservations/addInstructorReview\", this.newReviews, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.accessToken,\r\n        }\r\n      })\r\n          .then(() => {\r\n            this.saveButtonTxt = \"Saved!\";\r\n            this.isSaved = true;\r\n            this.closeButtonTxt = \"Close\";\r\n          })\r\n          .catch(error => {\r\n            if (error.response.status === 404) {\r\n              this.$notify({\r\n                title: \"Invalid Status\",\r\n                text: \"Something went wrong. Try again later.\",\r\n                position: \"bottom right\",\r\n                type: \"warn\"\r\n              })\r\n            } else if (error.response.status === 500) {\r\n              this.$notify({\r\n                title: \"Internal Server Error\",\r\n                text: \"Something went wrong on the server! Please try again later...\",\r\n                position: \"bottom right\",\r\n                type: \"error\"\r\n              })\r\n            }\r\n          })\r\n    },\r\n  },\r\n  computed: {\r\n    accessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    isReviewPresent() {\r\n      for(let i=0; i<this.reviews.length; i++)\r\n        if(this.reviews[i].reviewType === \"ClientReview\") return true;\r\n      return false;\r\n    },\r\n    getClientGrade() {\r\n      let grade = 0;\r\n      for(let i=0; i<this.reviews.length; i++)\r\n        if(this.reviews[i].reviewType === \"ClientReview\") grade = this.reviews[i].grade;\r\n      return grade;\r\n    },\r\n    getComment() {\r\n      let comment = \"\";\r\n      for(let i=0; i<this.reviews.length; i++)\r\n        if(this.reviews[i].reviewType === \"ClientReview\") comment = this.reviews[i].comment;\r\n      return comment;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntextarea {\r\n  color: white;\r\n  font-style: italic;\r\n  font-weight: 500;\r\n  text-align: justify;\r\n}\r\n\r\ntextarea::placeholder {\r\n  color: white;\r\n  font-weight: 400;\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: #008970;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}