{"ast":null,"code":"import { DatePicker } from \"v-calendar\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: \"OwnerReservationCreationPage\",\n  components: {\n    DatePicker\n  },\n\n  data() {\n    return {\n      initDate: null,\n      termDate: null,\n      excluded: [],\n      clients: [],\n      client: null,\n      range: {\n        start: null,\n        end: null\n      },\n      dateIsSelected: true,\n      clientIsSelected: true,\n      isEquipmentNeeded: false\n    };\n  },\n\n  mounted() {\n    axios.get(\"/Reservations/ownerReservationLimits\", {\n      headers: {\n        Authorization: \"Bearer \" + store.getters.access_token\n      },\n      params: {\n        id: this.$route.params.id\n      }\n    }).then(response => {\n      const dto = response.data;\n      this.excluded.push({\n        start: null,\n        end: new Date()\n      });\n      this.excluded.push({\n        start: new Date(dto.termDate),\n        end: null\n      });\n\n      for (let i = 0; i < dto.reservationsPeriods.length; i++) {\n        this.excluded.push({\n          start: new Date(dto.reservationsPeriods[i].start),\n          end: new Date(dto.reservationsPeriods[i].end)\n        });\n      }\n\n      console.log(dto);\n      response.data.clients.forEach(client => {\n        this.clients.push(client);\n      });\n      console.log(this.clients);\n    }).catch();\n  },\n\n  computed: {\n    isVacationRentalOwner() {\n      return this.$store.getters.user === \"vacationRentalOwner\";\n    },\n\n    isBoatOwner() {\n      return this.$store.getters.user === \"boatOwner\";\n    }\n\n  },\n  methods: {\n    isDataEntered() {\n      if (this.date === null) {\n        this.dateIsSelected = false;\n        return false;\n      }\n\n      this.dateIsSelected = true;\n\n      if (this.client === null) {\n        this.clientIsSelected = false;\n        return false;\n      }\n\n      this.clientIsSelected = true;\n      return true;\n    },\n\n    book() {\n      if (this.isDataEntered()) {\n        this.range.start.setTime(this.range.start.getTime());\n        this.range.end.setTime(this.range.end.getTime());\n        this.initDate = this.range.start;\n        this.termDate = this.range.end;\n        const dto = {\n          clientId: this.client.id,\n          rentalId: this.$route.params.id,\n          initDate: this.initDate,\n          termDate: this.termDate,\n          isEquipmentNeeded: this.isEquipmentNeeded\n        };\n        axios.post(\"/Reservations/ownerBookForClient\", dto, {\n          headers: {\n            Authorization: \"Bearer \" + store.getters.access_token\n          }\n        }).then(() => {\n          this.$notify({\n            title: \"Successful reservation\",\n            text: \"You have successfully booked adventure for client.\",\n            position: \"bottom right\",\n            type: \"success\"\n          });\n        }).catch(() => {\n          this.$notify({\n            title: \"Server error\",\n            text: \"Server is currently off. Please try again later...\",\n            type: \"error\"\n          });\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["DatePicker","axios","store","name","components","data","initDate","termDate","excluded","clients","client","range","start","end","dateIsSelected","clientIsSelected","isEquipmentNeeded","mounted","get","headers","Authorization","getters","access_token","params","id","$route","then","response","dto","push","Date","i","reservationsPeriods","length","console","log","forEach","catch","computed","isVacationRentalOwner","$store","user","isBoatOwner","methods","isDataEntered","date","book","setTime","getTime","clientId","rentalId","post","$notify","title","text","position","type"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\BoatOwner\\BoatOwnerPage\\components\\BoatOwnerMainView\\OwnerReservationCreationPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-2\"></div>\r\n    <div class=\"col-8 pt-5 mb-5\">\r\n      <div class=\"container px-4 py-3 rounded form\" spellcheck=\"false\" >\r\n        <div class=\"container-fluid\">\r\n          <h3>Reservation</h3>\r\n          <div class=\"row main justify-content-center\">\r\n            <div class=\"row main\">\r\n              <div class=\"col-3\"></div>\r\n              <div class=\"col-6\">\r\n\r\n                <div class=\"row justify-content-center mt-4\">\r\n                  <label class=\"ms-3\">Date</label>\r\n                  <div class=\"container p-0 m-0 text-center\" style=\"max-width: 400px\">\r\n                    <date-picker :disabled-dates=\"excluded\" v-model=\"range\" is-range mode=\"dateTime\" is24hr :firstDayOfWeek=2>\r\n                    </date-picker>\r\n                    <p v-if='!dateIsSelected'>'Date' is a mandatory field.</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"row justify-content-center mt-2\">\r\n                  <label for=\"client\">Client</label>\r\n                  <div class=\"container p-0 m-0 text-center\" style=\"max-width: 400px\">\r\n                    <select class=\"form-control\" v-model=\"client\" id=\"client\">\r\n                      <option :value=\"clients[client]\" v-for=\"(index, client) in clients\" :key=\"index\">{{clients[client].name + \" \" + clients[client].surname}}</option>\r\n                    </select>\r\n                    <p v-if='!clientIsSelected'>'Client' is a mandatory field.</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div v-if=\"isBoatOwner\" class=\"row justify-content-center mt-2\">\r\n                  <input class=\"form-check-input\" type=\"checkbox\" id=\"equipment\" v-model=\"isEquipmentNeeded\">\r\n                  <label for=\"equipment\">Is Equipment needed?</label>\r\n                </div>\r\n\r\n              </div>\r\n              <div class=\"col-3\"></div>\r\n              <div class=\"d-flex pt-3 justify-content-center\">\r\n                <router-link v-if=\"isVacationRentalOwner\" to=\"/vacationRentalOwner/cottages\" class=\"btn btn-red mt-3 me-1\">Cancel</router-link>\r\n                <router-link v-else to=\"/boatOwner/boats/\" class=\"btn btn-red mt-3 me-1\">Cancel</router-link>\r\n                <button type=\"button\" class=\"btn mt-3\" @click.prevent=\"book\">Submit</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-2\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {DatePicker} from \"v-calendar\";\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"OwnerReservationCreationPage\",\r\n  components: {DatePicker},\r\n  data() {\r\n    return {\r\n      initDate: null,\r\n      termDate: null,\r\n      excluded: [],\r\n      clients: [],\r\n      client: null,\r\n      range: {\r\n        start: null,\r\n        end: null\r\n      },\r\n      dateIsSelected: true,\r\n      clientIsSelected: true,\r\n      isEquipmentNeeded: false\r\n    }\r\n  },\r\n  mounted() {\r\n    axios.get(\"/Reservations/ownerReservationLimits\", {\r\n      headers: {\r\n        Authorization: \"Bearer \" + store.getters.access_token,\r\n      },\r\n      params: {\r\n        id: this.$route.params.id\r\n      }\r\n    })\r\n        .then((response) => {\r\n          const dto = response.data;\r\n          this.excluded.push({start:null, end:new Date()});\r\n          this.excluded.push({start:new Date(dto.termDate), end:null});\r\n          for (let i = 0; i < dto.reservationsPeriods.length; i++) {\r\n            this.excluded.push({start:new Date(dto.reservationsPeriods[i].start), end:new Date(dto.reservationsPeriods[i].end)})\r\n          }\r\n          console.log(dto);\r\n          response.data.clients.forEach(client => {\r\n            this.clients.push(client);\r\n          });\r\n          console.log(this.clients)\r\n        })\r\n        .catch()\r\n  },\r\n  computed: {\r\n    isVacationRentalOwner() {\r\n      return this.$store.getters.user === \"vacationRentalOwner\";\r\n    },\r\n    isBoatOwner() {\r\n      return this.$store.getters.user === \"boatOwner\";\r\n    }\r\n  },\r\n  methods: {\r\n    isDataEntered() {\r\n      if (this.date === null) {\r\n        this.dateIsSelected = false;\r\n        return false;\r\n      }\r\n      this.dateIsSelected = true\r\n      if (this.client === null) {\r\n        this.clientIsSelected = false;\r\n        return false;\r\n      }\r\n      this.clientIsSelected = true;\r\n      return true;\r\n    },\r\n    book() {\r\n      if (this.isDataEntered()) {\r\n        this.range.start.setTime(this.range.start.getTime());\r\n        this.range.end.setTime(this.range.end.getTime());\r\n        this.initDate = this.range.start;\r\n        this.termDate = this.range.end;\r\n        const dto = {clientId: this.client.id, rentalId: this.$route.params.id, initDate: this.initDate, termDate: this.termDate, isEquipmentNeeded: this.isEquipmentNeeded};\r\n        axios.post(\"/Reservations/ownerBookForClient\", dto, {\r\n          headers: {\r\n            Authorization: \"Bearer \" + store.getters.access_token,\r\n          }\r\n        })\r\n            .then(() => {\r\n              this.$notify( {\r\n                title: \"Successful reservation\",\r\n                text: \"You have successfully booked adventure for client.\",\r\n                position: \"bottom right\",\r\n                type: \"success\"\r\n              });\r\n            })\r\n            .catch(() => {\r\n              this.$notify({\r\n                title: \"Server error\",\r\n                text: \"Server is currently off. Please try again later...\",\r\n                type: \"error\"\r\n              });\r\n            })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nlabel, small {\r\n  max-width: 400px;\r\n}\r\n\r\nh3 {\r\n  text-align: center;\r\n}\r\n\r\np {\r\n  color: #e23c52;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}