{"ast":null,"code":"import axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: \"InstructorReservationReport\",\n  props: [\"id\", \"resId\", \"reports\"],\n  components: {},\n\n  data() {\n    return {\n      complaintMissing: false,\n      isSaved: false,\n      saveButtonTxt: \"Save\",\n      closeButtonTxt: \"Cancel\",\n      newReport: {\n        reservationId: this.resId,\n        comment: null,\n        showedUp: true\n      }\n    };\n  },\n\n  mounted() {\n    this.newReport.comment = this.getReportComment;\n    this.newReport.showedUp = this.getShowedUp;\n  },\n\n  methods: {\n    save() {\n      this.newReport.comment = document.getElementById(\"insertReport\" + this.resId).value;\n      this.newReport.showedUp = !document.getElementById('flexCheckDefault_2-' + this.id).checked;\n      if (!this.saveChecks()) this.saveReport();\n    },\n\n    saveChecks() {\n      this.complaintMissing = false;\n\n      if (!this.newReport.showedUp) {\n        console.log(\"usli\");\n        return false;\n      }\n\n      this.newReport.comment = document.getElementById(\"insertReport\" + this.resId).value;\n      if (this.newReport.comment === \"\") this.complaintMissing = true;\n      return this.complaintMissing;\n    },\n\n    saveReport() {\n      console.log(\"SEJVUJEMO\");\n      axios.post(\"/Reservations/addInstructorReport\", this.newReport, {\n        headers: {\n          Authorization: \"Bearer \" + this.accessToken\n        }\n      }).then(() => {\n        this.saveButtonTxt = \"Saved!\";\n        this.isSaved = true;\n        this.closeButtonTxt = \"Close\";\n      }).catch(error => {\n        if (error.response.status === 404) {\n          this.$notify({\n            title: \"Invalid Status\",\n            text: \"Something went wrong. Try again later.\",\n            position: \"bottom right\",\n            type: \"warn\"\n          });\n        } else if (error.response.status === 500) {\n          this.$notify({\n            title: \"Internal Server Error\",\n            text: \"Something went wrong on the server! Please try again later...\",\n            position: \"bottom right\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  },\n  computed: {\n    accessToken() {\n      return store.state.access_token;\n    },\n\n    getShowedUp() {\n      let showedUp = true;\n\n      for (let i = 0; i < this.reports.length; i++) if (this.reports[i].user === \"Instructor\") showedUp = this.reports[i].showedUp;\n\n      return showedUp;\n    },\n\n    isReportPresent() {\n      for (let i = 0; i < this.reports.length; i++) if (this.reports[i].user === \"Instructor\") return true;\n\n      return false;\n    },\n\n    getReportComment() {\n      let comment = \"\";\n\n      for (let i = 0; i < this.reports.length; i++) if (this.reports[i].user === \"Instructor\") comment = this.reports[i].comment;\n\n      return comment;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","store","name","props","components","data","complaintMissing","isSaved","saveButtonTxt","closeButtonTxt","newReport","reservationId","resId","comment","showedUp","mounted","getReportComment","getShowedUp","methods","save","document","getElementById","value","id","checked","saveChecks","saveReport","console","log","post","headers","Authorization","accessToken","then","catch","error","response","status","$notify","title","text","position","type","computed","state","access_token","i","reports","length","user","isReportPresent"],"sourceRoot":"","sources":["C:\\Users\\SaÅ¡ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\FishingInstructor\\FishingInstructorPage\\components\\InstructorMainViews\\InstructorReservations\\InstructorReservationReport.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"this.reports\" class=\"modal fade\" :id=\"'report-'+this.id\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header p-0 m-0\" style=\"border-bottom: none\">\r\n        </div>\r\n        <div class=\"modal-body pt-0 mt-0\">\r\n          <div class=\"row text-center pb-0 mb-0\" style=\"border-bottom: 1px solid lightgray;\">\r\n            <h1 class=\"modal-title pb-1\" style=\"color:#e23c52; font-weight: 700;\">Report</h1>\r\n          </div>\r\n          <div class=\"row d-flex justify-content-center\">\r\n            <img src=\"../../../../../Images/warn.png\" alt=\"\" style=\"height: 50%; width:50%;\"/>\r\n          </div>\r\n          <div>\r\n            <p class=\"h5 mt-3\">Please write your complaint in great detail.</p>\r\n          </div>\r\n\r\n          <textarea v-if=\"isReportPresent\" id=\"reportExists\" :value=\"this.newReport.comment\" disabled\r\n                    rows=\"3\" placeholder=\"Leave a complaint here\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color: #e23c52; border-radius: 20px; resize: none;\" maxlength=\"1000\"></textarea>\r\n\r\n          <textarea v-if=\"!isReportPresent\" :id=\"'insertReport'+this.resId\" :content=\"this.newReport.comment\"\r\n                    :disabled=\"isSaved\" rows=\"3\" placeholder=\"Leave a complaint here\" class=\"w-100 p-2 px-3\"\r\n                    style=\"background-color: #e23c52; border-radius: 20px; resize: none;\" maxlength=\"1000\"></textarea>\r\n\r\n          <div v-if=\"complaintMissing\" id=\"missingRentalGradeMessage\" class=\"row text-center\">\r\n            <p class=\"h6 mt-3\" style=\"color: #e23c52\"><strong>You must enter a complaint.</strong></p>\r\n          </div>\r\n\r\n\r\n          <div v-if=\"isReportPresent\" class=\"form-check h4 mt-3 d-flex justify-content-center align-items-center\">\r\n            <input :checked=\"!newReport.showedUp\" class=\"form-check-input\"\r\n                   type=\"checkbox\" value=\"\" id=\"flexCheckDefault_1\" disabled>\r\n            <label class=\"form-check-label ms-2\" for=\"flexCheckDefault_1\">\r\n              Client hasn't showed up\r\n            </label>\r\n          </div>\r\n\r\n          <div v-else class=\"form-check h4 mt-3 d-flex justify-content-center align-items-center\">\r\n            <input :checked=\"!newReport.showedUp\" class=\"form-check-input\"\r\n                   type=\"checkbox\" value=\"\" :id=\"'flexCheckDefault_2-'+this.id\">\r\n            <label class=\"form-check-label ms-2\" :for=\"'flexCheckDefault_2-'+this.id\">\r\n              Client hasn't showed up\r\n            </label>\r\n          </div>\r\n\r\n\r\n\r\n        </div>\r\n        <div class=\"modal-footer d-flex\" style=\"border-top: none; justify-content: space-evenly;\">\r\n          <button v-if=\"!isReportPresent\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\r\n                  style=\"background-color: #e23c52; color: white; width: 40%\">{{ this.closeButtonTxt }}</button>\r\n          <button :disabled=\"this.isSaved\" v-if=\"!isReportPresent\" type=\"button\" class=\"btn btn-secondary\"\r\n                  style=\"color: white; width: 40%\" @click=\"save\">{{ this.saveButtonTxt }}\r\n          </button>\r\n          <button v-if=\"isReportPresent\" type=\"button\" class=\"btn btn-secondary w-100\" data-bs-dismiss=\"modal\"\r\n                  style=\"color: white;\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"InstructorReservationReport\",\r\n  props: [\"id\", \"resId\", \"reports\"],\r\n  components: {},\r\n  data() {\r\n    return {\r\n      complaintMissing: false,\r\n      isSaved: false,\r\n      saveButtonTxt: \"Save\",\r\n      closeButtonTxt: \"Cancel\",\r\n      newReport: {\r\n        reservationId: this.resId,\r\n        comment: null,\r\n        showedUp: true,\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.newReport.comment =  this.getReportComment;\r\n    this.newReport.showedUp = this.getShowedUp;\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.newReport.comment = document.getElementById(\"insertReport\"+this.resId).value;\r\n      this.newReport.showedUp = !(document.getElementById('flexCheckDefault_2-'+this.id).checked);\r\n      if(!this.saveChecks()) this.saveReport();\r\n    },\r\n    saveChecks() {\r\n      this.complaintMissing = false;\r\n      if(!this.newReport.showedUp) {\r\n        console.log(\"usli\");\r\n        return false;\r\n      }\r\n      this.newReport.comment = document.getElementById(\"insertReport\"+this.resId).value;\r\n      if(this.newReport.comment === \"\") this.complaintMissing = true;\r\n      return this.complaintMissing;\r\n    },\r\n    saveReport() {\r\n      console.log(\"SEJVUJEMO\");\r\n      axios.post(\"/Reservations/addInstructorReport\", this.newReport, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + this.accessToken,\r\n        }\r\n      })\r\n          .then(() => {\r\n            this.saveButtonTxt = \"Saved!\";\r\n            this.isSaved = true;\r\n            this.closeButtonTxt = \"Close\";\r\n          })\r\n          .catch(error => {\r\n            if (error.response.status === 404) {\r\n              this.$notify({\r\n                title: \"Invalid Status\",\r\n                text: \"Something went wrong. Try again later.\",\r\n                position: \"bottom right\",\r\n                type: \"warn\"\r\n              })\r\n            } else if (error.response.status === 500) {\r\n              this.$notify({\r\n                title: \"Internal Server Error\",\r\n                text: \"Something went wrong on the server! Please try again later...\",\r\n                position: \"bottom right\",\r\n                type: \"error\"\r\n              })\r\n            }\r\n          })\r\n\r\n    },\r\n  },\r\n  computed: {\r\n    accessToken() {\r\n      return store.state.access_token;\r\n    },\r\n    getShowedUp() {\r\n      let showedUp = true;\r\n      for(let i=0; i<this.reports.length; i++)\r\n        if(this.reports[i].user === \"Instructor\") showedUp = this.reports[i].showedUp;\r\n      return showedUp;\r\n    },\r\n    isReportPresent() {\r\n      for(let i=0; i<this.reports.length; i++)\r\n        if(this.reports[i].user === \"Instructor\") return true;\r\n      return false;\r\n    },\r\n    getReportComment() {\r\n      let comment = \"\";\r\n      for(let i=0; i<this.reports.length; i++)\r\n        if(this.reports[i].user === \"Instructor\") comment = this.reports[i].comment;\r\n      return comment;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntextarea {\r\n  color: white;\r\n  font-style: italic;\r\n  font-weight: 500;\r\n  text-align: justify;\r\n}\r\n\r\ntextarea::placeholder {\r\n  color: white;\r\n  font-weight: 400;\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: #008970;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}