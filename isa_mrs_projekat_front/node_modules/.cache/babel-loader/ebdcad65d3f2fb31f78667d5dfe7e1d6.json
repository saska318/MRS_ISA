{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3ebe3b2a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"row\"\n};\nconst _hoisted_2 = {\n  class: \"col-md-4\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"col-md-4\"\n};\nconst _hoisted_5 = {\n  class: \"row\"\n};\nconst _hoisted_6 = {\n  class: \"rentalObjectName align-items-center text-start\",\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_7 = {\n  class: \"display-6 me-1 card-title cut-text\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = {\n  class: \"row\"\n};\nconst _hoisted_10 = {\n  class: \"h4\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", {\n  style: {\n    \"color\": \"#008970\"\n  }\n}, \"Date:\", -1\n/* HOISTED */\n));\n\nconst _hoisted_12 = {\n  class: \"row\"\n};\nconst _hoisted_13 = {\n  class: \"h4\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", {\n  style: {\n    \"color\": \"#008970\"\n  }\n}, \"Profit:\", -1\n/* HOISTED */\n));\n\nconst _hoisted_15 = {\n  class: \"row mt-1\"\n};\nconst _hoisted_16 = {\n  class: \"h3\",\n  style: {\n    \"color\": \"#e23c52\"\n  }\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\" CANCELLED \");\n\nconst _hoisted_18 = {\n  class: \"col-md-4 p-5 d-flex flex-grow-1 justify-content-center align-items-center\",\n  style: {\n    \"height\": \"25vh\"\n  }\n};\nconst _hoisted_19 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_20 = {\n  class: \"row\"\n};\nconst _hoisted_21 = [\"data-bs-target\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n\n  const _component_InstructorClientPreview = _resolveComponent(\"InstructorClientPreview\");\n\n  return _openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.reservations, (reservation, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: i,\n      class: \"card reservation mb-3 px-0\"\n    }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_link, {\n      to: $options.getPath(reservation),\n      class: \"link\",\n      onClick: $event => $options.setRentalIdAndType(reservation)\n    }, {\n      default: _withCtx(() => [$props.images[i] ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        class: \"rentalPhoto\",\n        src: $props.images[i],\n        alt: \"\"\n      }, null, 8\n      /* PROPS */\n      , _hoisted_3)) : _createCommentVNode(\"v-if\", true)]),\n      _: 2\n      /* DYNAMIC */\n\n    }, 1032\n    /* PROPS, DYNAMIC_SLOTS */\n    , [\"to\", \"onClick\"])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", null, [_createElementVNode(\"h1\", _hoisted_7, _toDisplayString(reservation.rentalObject.name), 1\n    /* TEXT */\n    )]), _hoisted_8])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", _hoisted_10, [_hoisted_11, _createTextVNode(\" \" + _toDisplayString($options.getDateSpan(reservation)), 1\n    /* TEXT */\n    )])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"p\", _hoisted_13, [_hoisted_14, _createTextVNode(\" $\" + _toDisplayString($options.calculateCancellationInstructorIncome(reservation).toFixed(2)), 1\n    /* TEXT */\n    )])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"p\", _hoisted_16, [_createElementVNode(\"strong\", null, [_createVNode(_component_font_awesome_icon, {\n      icon: \"x\"\n    }), _hoisted_17])])])]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"button\", {\n      class: \"w-100 btn mb-2\",\n      style: {\n        \"font-weight\": \"500\",\n        \"color\": \"white\"\n      },\n      \"data-bs-toggle\": \"modal\",\n      \"data-bs-target\": '#clientProfile-' + reservation.id\n    }, \" Client Preview \", 8\n    /* PROPS */\n    , _hoisted_21), _createVNode(_component_InstructorClientPreview, {\n      client: reservation.client,\n      reservationId: reservation.id\n    }, null, 8\n    /* PROPS */\n    , [\"client\", \"reservationId\"])])])])])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","style","_createElementVNode","_createElementBlock","_Fragment","_renderList","$props","reservation","i","key","_createVNode","_component_router_link","to","$options","onClick","src","alt","_toDisplayString","rentalObject","name","_hoisted_8","_hoisted_11","_hoisted_14","toFixed","_component_font_awesome_icon","icon","id","_hoisted_21","_component_InstructorClientPreview","client","reservationId"],"sourceRoot":"","sources":["C:\\Users\\Saška\\Downloads\\ISA_MRS\\isa_mrs_projekat_front\\src\\components\\FishingInstructor\\FishingInstructorPage\\components\\InstructorMainViews\\InstructorReservations\\InstructorCancelledReservations\\InstructorCancelledReservations.vue"],"sourcesContent":["<template>\r\n  <div v-for=\"(reservation, i) in reservations\" :key=\"i\" class=\"card reservation mb-3 px-0\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4\" >\r\n        <router-link :to=\"getPath(reservation)\" class=\"link\" @click=\"setRentalIdAndType(reservation)\">\r\n          <img v-if=\"images[i]\" class=\"rentalPhoto\" :src=\"images[i]\" alt=\"\"/>\r\n        </router-link>\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <div class=\"row\">\r\n          <div class=\"rentalObjectName align-items-center text-start\" style=\"display: flex;\">\r\n            <div>\r\n              <h1 class=\"display-6 me-1 card-title cut-text\">{{ reservation.rentalObject.name }}</h1>\r\n            </div>\r\n            <hr>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <p class=\"h4\" ><strong style=\"color:#008970;\">Date:</strong> {{  getDateSpan(reservation) }}</p>\r\n        </div>\r\n        <div class=\"row\">\r\n          <p class=\"h4\"><strong style=\"color:#008970;\">Profit:</strong> ${{\r\n              (calculateCancellationInstructorIncome(reservation)).toFixed(2) }}</p>\r\n        </div>\r\n        <div class=\"row mt-1\">\r\n          <p class=\"h3\" style=\"color:#e23c52;\">\r\n            <strong>\r\n              <font-awesome-icon icon=\"x\"></font-awesome-icon>&emsp;CANCELLED\r\n            </strong>\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-4 p-5 d-flex flex-grow-1 justify-content-center align-items-center\" style=\"height: 25vh;\">\r\n        <div style=\"width: 100%;\">\r\n          <div class=\"row\">\r\n            <button class=\"w-100 btn mb-2\" style=\"font-weight: 500; color: white;\" data-bs-toggle=\"modal\"\r\n                    :data-bs-target=\"'#clientProfile-'+reservation.id\">\r\n              Client Preview\r\n            </button>\r\n            <InstructorClientPreview :client=\"reservation.client\"\r\n                                     :reservationId=\"reservation.id\"/>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import axios from \"axios\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/vue-fontawesome\";\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faX } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nlibrary.add(faX);\r\n\r\nimport InstructorClientPreview\r\n  from \"@/components/FishingInstructor/FishingInstructorPage/components/InstructorMainViews/InstructorReservations/InstructorClientPreview\";\r\n\r\nexport default {\r\n  name: \"InstructorCancelledReservations\",\r\n  props: [\"reservations\", \"images\"],\r\n  components: {FontAwesomeIcon, InstructorClientPreview},\r\n  data() {\r\n    return {\r\n      // images: [],\r\n    }\r\n  },\r\n  methods: {\r\n    calculateCancellationInstructorIncome(reservation) {\r\n      let total = this.calculateTotal(reservation);\r\n      let cancellationPercentage = reservation.rentalObject.cancellationFee;\r\n      if(cancellationPercentage === 0) return 0;\r\n      let feeAmount = total/100 * cancellationPercentage;\r\n      let systemIncome = feeAmount/100 * reservation.income.fee;\r\n      return feeAmount - systemIncome;\r\n    },\r\n    setRentalIdAndType(reservation) {\r\n      this.$store.dispatch(\"rentalId\", reservation.rentalObject.id);\r\n      this.$store.dispatch(\"rentalType\", reservation.rentalObject.rentalObjectType);\r\n    },\r\n    getPath(reservation) {\r\n      return \"/fishingInstructor/Adventure/\" + reservation.rentalObject.id;\r\n    },\r\n    showAdventureProfile(id) {\r\n      return this.$router.push('/fishingInstructor/Adventure/' + id);\r\n    },\r\n    getDateSpan(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      // date1.setHours(0, 0, 0);\r\n      // date2.setHours(0, 0, 0);\r\n      let dateDisplay = date1.getDate() + '.' + (date1.getMonth() + 1) + '.' +  date1.getFullYear() + '.';\r\n      if(date1.getFullYear() !== date2.getFullYear() || date1.getMonth() !== date2.getMonth() || date1.getDate() !== date2.getDate())\r\n        dateDisplay += ' - ' + date2.getDate() + '.' + (date2.getMonth() + 1) + '.' +  date2.getFullYear() + '.';\r\n      return dateDisplay;\r\n    },\r\n    isFeeNull(reservation) {\r\n      return reservation.rentalObject.cancellationFee !== null;\r\n    },\r\n    calculateTotal(reservation) {\r\n      let days = this.getNumberOfDays(reservation);\r\n      let services = this.calculateAdditionalServices(reservation);\r\n      let price = reservation.price;\r\n      if(reservation.specialOffer !== null) {\r\n        console.log(((days*price)/100 * (100-reservation.specialOffer.discount)));\r\n        return (days*price)/100 * (100-reservation.specialOffer.discount);\r\n      }\r\n      return days*price+services;\r\n    },\r\n    getNumberOfDays(reservation) {\r\n      let initDate = reservation.initDate, termDate = reservation.termDate;\r\n      let date1 = new Date(initDate), date2 = new Date(termDate);\r\n      date1.setHours(0, 0, 0);\r\n      date2.setHours(0, 0, 0);\r\n      let timeDiff = date2.getTime() - date1.getTime();\r\n      let daysDiff = timeDiff / (1000 * 3600 * 24);\r\n      return daysDiff + 1;\r\n    },\r\n    calculateAdditionalServices(reservation) {\r\n      let services = reservation.additionalServices, totalServices = 0;\r\n      for(let i=0; i<services.length; i++) totalServices += services[i].price;\r\n      return totalServices;\r\n    },\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nhr {\r\n  flex-grow: 1;\r\n}\r\n.cut-text {\r\n  width: 100%;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\ndiv.rentalObjectName {\r\n  display: flex;\r\n}\r\ndiv.reservation {\r\n  box-shadow: 0.1rem 0.1rem 0.4rem rgb(0 0 0 / 15%);\r\n  background-color: #ffffff;\r\n}\r\ndiv.reservation:hover {\r\n  padding: 3px;\r\n}\r\nimg.rentalPhoto {\r\n  height: 25vh;\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  object-fit: cover;\r\n  object-position: center;\r\n}\r\n.card {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: fit-content;\r\n  min-width: 0;\r\n  word-wrap: break-word;\r\n  background-color: #fff;\r\n  background-clip: border-box;\r\n  border: none;\r\n  box-shadow: 0 0.5rem 1rem rgb(0 0 0 / 15%);\r\n  border-radius: 1rem;\r\n}\r\n.card-header:first-child {\r\n  border-radius: calc(1rem - 1px) calc(1rem - 1px) 0 0;\r\n}\r\n.card-header {\r\n  position: relative;\r\n  padding: 2rem 2rem;\r\n  border-bottom: none;\r\n  background-color: inherit;\r\n  box-shadow: 0 0.125rem 0.25rem rgb(0 0 0 / 8%);\r\n  z-index: 2;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}