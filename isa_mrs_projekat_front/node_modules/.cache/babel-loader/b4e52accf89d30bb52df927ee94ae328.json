{"ast":null,"code":"import { DatePicker } from \"v-calendar\";\nimport { toggleLoading } from \"@/components/state\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nexport default {\n  name: \"AdminFinancesView\",\n  components: {\n    DatePicker\n  },\n\n  data() {\n    return {\n      incomes: [],\n      range: {\n        start: new Date(new Date().setFullYear(new Date().getFullYear() - 1)),\n        end: new Date()\n      }\n    };\n  },\n\n  methods: {\n    generateReport() {\n      toggleLoading();\n      const start = this.range.start.toISOString().slice(0, 19);\n      const end = this.range.end.toISOString().slice(0, 19);\n      console.log(start);\n      console.log(end);\n      axios.get(\"/Profits/adminReport\", {\n        headers: {\n          Authorization: \"Bearer \" + store.getters.access_token\n        },\n        params: {\n          start: start,\n          end: end\n        }\n      }).then(response => {\n        this.incomes = response.data;\n        toggleLoading();\n      }).catch(() => {\n        this.$notify({\n          title: \"Server error\",\n          text: \"Server is currently off. Please try again later...\",\n          type: \"error\"\n        });\n        toggleLoading();\n      });\n    }\n\n  },\n\n  mounted() {\n    this.generateReport();\n  },\n\n  computed: {\n    totalIncome() {\n      let income = 0;\n      this.incomes.forEach(i => {\n        income += i.value;\n      });\n      return income;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4CA,SAAQA,UAAR,QAAyB,YAAzB;AACA,SAAQC,aAAR,QAA4B,oBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,eAAe;AACbC,MAAI,EAAE,mBADO;AAEbC,YAAU,EAAE;AAACL;AAAD,GAFC;;AAGbM,MAAI,GAAG;AACL,WAAO;AACLC,aAAO,EAAE,EADJ;AAELC,WAAK,EAAE;AACLC,aAAK,EAAE,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,WAAX,CAAuB,IAAID,IAAJ,GAAWE,WAAX,KAA2B,CAAlD,CAAT,CADF;AAELC,WAAG,EAAE,IAAIH,IAAJ;AAFA;AAFF,KAAP;AAOD,GAXY;;AAYbI,SAAO,EAAE;AACPC,kBAAc,GAAG;AACfd,mBAAa;AACb,YAAMQ,KAAI,GAAI,KAAKD,KAAL,CAAWC,KAAX,CAAiBO,WAAjB,GAA+BC,KAA/B,CAAqC,CAArC,EAAwC,EAAxC,CAAd;AACA,YAAMJ,GAAE,GAAI,KAAKL,KAAL,CAAWK,GAAX,CAAeG,WAAf,GAA6BC,KAA7B,CAAmC,CAAnC,EAAsC,EAAtC,CAAZ;AACAC,aAAO,CAACC,GAAR,CAAYV,KAAZ;AACAS,aAAO,CAACC,GAAR,CAAYN,GAAZ;AACAX,WAAK,CAACkB,GAAN,CAAU,sBAAV,EAAkC;AAACC,eAAO,EAAE;AACxCC,uBAAa,EAAE,YAAYnB,KAAK,CAACoB,OAAN,CAAcC;AADD,SAAV;AAGhCC,cAAM,EAAE;AACNhB,eAAK,EAAEA,KADD;AAENI,aAAG,EAAEA;AAFC;AAHwB,OAAlC,EAQCa,IARD,CAQOC,QAAD,IAAc;AAClB,aAAKpB,OAAL,GAAeoB,QAAQ,CAACrB,IAAxB;AACAL,qBAAa;AACd,OAXD,EAYC2B,KAZD,CAYO,MAAM;AACX,aAAKC,OAAL,CAAa;AACXC,eAAK,EAAE,cADI;AAEXC,cAAI,EAAE,oDAFK;AAGXC,cAAI,EAAE;AAHK,SAAb;AAKA/B,qBAAa;AACd,OAnBD;AAoBF;;AA3BO,GAZI;;AAyCbgC,SAAO,GAAG;AACR,SAAKlB,cAAL;AACD,GA3CY;;AA4CbmB,UAAQ,EAAE;AACRC,eAAW,GAAG;AACZ,UAAIC,MAAK,GAAI,CAAb;AACA,WAAK7B,OAAL,CAAa8B,OAAb,CAAqBC,KAAK;AACxBF,cAAK,IAAKE,CAAC,CAACC,KAAZ;AACD,OAFD;AAGA,aAAOH,MAAP;AACF;;AAPQ;AA5CG,CAAf","names":["DatePicker","toggleLoading","axios","store","name","components","data","incomes","range","start","Date","setFullYear","getFullYear","end","methods","generateReport","toISOString","slice","console","log","get","headers","Authorization","getters","access_token","params","then","response","catch","$notify","title","text","type","mounted","computed","totalIncome","income","forEach","i","value"],"sourceRoot":"","sources":["C:\\Users\\Sa≈°ka\\Downloads\\MRS_ISA\\isa_mrs_projekat_front\\src\\components\\Administrator\\AdminPage\\components\\AdminMainViews\\AdminFinancesView.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-1\"></div>\r\n    <div class=\"col-10 pt-5 mb-5\">\r\n      <div class=\"row container-fluid pe-0 ps-0 me-0 ms-0\">\r\n        <div class=\"col-4 text-center\">\r\n          <date-picker mode=\"range\" v-model=\"range\" is-range></date-picker>\r\n          <button class=\"btn mt-2\" @click=\"generateReport\">Generate Report</button>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <div class=\"align-items-center\">\r\n            <div class=\"row main-col text-center header rounded mb-3\">\r\n              <table>\r\n                <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>Type</th>\r\n                  <th>Time Stamp</th>\r\n                  <th class=\"text-end pe-5\">Value</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"(income, index) in this.incomes\" :key=\"index\" :class=\"index%2!==0?'odd':'even'\">\r\n                  <td>{{income.id}}</td>\r\n                  <td>{{income.type}}</td>\r\n                  <td>{{income.timeStamp.replace('T', ' ')}}</td>\r\n                  <td class=\"text-end pe-5\">{{income.value}}$</td>\r\n                </tr>\r\n                <tr style=\"background-color: #6c757d; color: white\">\r\n                  <td class=\"fw-bolder text-start\">Total:</td>\r\n                  <td colspan=\"3\" class=\"fw-bolder text-end pe-5\">{{totalIncome.toFixed(1)}}$</td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-1\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {DatePicker} from \"v-calendar\";\r\nimport {toggleLoading} from \"@/components/state\";\r\nimport axios from \"axios\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"AdminFinancesView\",\r\n  components: {DatePicker},\r\n  data() {\r\n    return {\r\n      incomes: [],\r\n      range: {\r\n        start: new Date(new Date().setFullYear(new Date().getFullYear() - 1)),\r\n        end: new Date()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    generateReport() {\r\n      toggleLoading();\r\n      const start = this.range.start.toISOString().slice(0, 19);\r\n      const end = this.range.end.toISOString().slice(0, 19);\r\n      console.log(start);\r\n      console.log(end);\r\n      axios.get(\"/Profits/adminReport\", {headers: {\r\n          Authorization: \"Bearer \" + store.getters.access_token,\r\n        },\r\n        params: {\r\n          start: start,\r\n          end: end\r\n        }\r\n      })\r\n      .then((response) => {\r\n        this.incomes = response.data;\r\n        toggleLoading();\r\n      })\r\n      .catch(() => {\r\n        this.$notify({\r\n          title: \"Server error\",\r\n          text: \"Server is currently off. Please try again later...\",\r\n          type: \"error\"\r\n        });\r\n        toggleLoading();\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.generateReport();\r\n  },\r\n  computed: {\r\n    totalIncome() {\r\n      let income = 0;\r\n      this.incomes.forEach(i => {\r\n        income += i.value;\r\n      })\r\n      return income;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}